window.__require=function t(e,i,n){function s(r,a){if(!i[r]){if(!e[r]){var c=r.split("/");if(c=c[c.length-1],!e[c]){var h="function"==typeof __require&&__require;if(!a&&h)return h(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var l=i[r]={exports:{}};e[r][0].call(l.exports,function(t){return s(e[r][1][t]||t)},l,l.exports,t,e,i,n)}return i[r].exports}for(var o="function"==typeof __require&&__require,r=0;r<n.length;r++)s(n[r]);return s}({AdjustPos:[function(t,e,i){"use strict";cc._RF.push(e,"752d8n7eoxJR7pYLF5yWHLk","AdjustPos"),cc.Class({extends:cc.Component,editor:{disallowMultiple:!1,menu:"\u81ea\u5b9a\u4e49\u7ec4\u4ef6/Adjust Pos"},properties:{posStep:{default:1,min:0},scaleStep:{default:.05,min:0},rotationStep:{default:1}},onLoad:function(){this.node.removeComponent(this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},onDestroy:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},onKeyDown:function(t){switch(t.keyCode){case cc.macro.KEY.up:this.node.y+=this.posStep;break;case cc.macro.KEY.right:this.node.x+=this.posStep;break;case cc.macro.KEY.down:this.node.y-=this.posStep;break;case cc.macro.KEY.left:this.node.x-=this.posStep;break;case cc.macro.KEY["+"]:this.node.scale+=this.scaleStep;break;case cc.macro.KEY["-"]:this.node.scale-=this.scaleStep;break;case cc.macro.KEY.home:this.node.angle+=this.rotationStep;break;case cc.macro.KEY.end:this.node.angle-=this.rotationStep;break;case cc.macro.KEY.pageup:this.node.setSiblingIndex(this.node.getSiblingIndex()-1);break;case cc.macro.KEY.pagedown:this.node.setSiblingIndex(this.node.getSiblingIndex()+1);break;case cc.macro.KEY.num0:this.node.setPosition(0,0),this.node.scale=1,this.node.angle=0}var e=this.node.getPosition();cc.log(this.node[" INFO "],{x:e.x,y:e.y},this.node.scale,-this.node.angle,this.node.getSiblingIndex())}}),cc._RF.pop()},{}],AutoLayout:[function(t,e,i){"use strict";cc._RF.push(e,"3ad54z026xKE5780SR6KN/Z","AutoLayout");var n=cc.Enum({NODE:1,PREFAB:2});cc.Class({extends:cc.Component,editor:{disallowMultiple:!1,menu:"\u81ea\u5b9a\u4e49\u7ec4\u4ef6/Auto Layout",executionOrder:-5e3},properties:{templateType:{default:n.NODE,type:n},tmpNode:{default:null,type:cc.Node,tooltip:!1,visible:function(){var t=this.templateType==n.NODE;return t||(this.tmpNode=null),t}},tmpPrefab:{default:null,type:cc.Prefab,tooltip:!1,visible:function(){var t=this.templateType==n.PREFAB;return t||(this.tmpPrefab=null),t}},frameByFrameRenderNum:{default:0,type:cc.Integer,range:[0,12,1],tooltip:!1,slide:!0},renderEvent:{default:null,type:cc.Component.EventHandler,tooltip:!1},_numItems:{default:0,serializable:!1},numItems:{visible:!1,get:function(){return this._numItems},set:function(t){if(null==t||t<0)cc.error("\u6e32\u67d3\u6570\u91cf\u8bbe\u7f6e\u6709\u8bef::",t);else{this._numItems=t,this.startRenderItems()}}},_layout:null,layout:{visible:!1,get:function(){return this._layout||(this._layout=this.node.getComponent(cc.Layout)),this._layout}}},onLoad:function(){var t=this;(t.templateType==n.PREFAB?t.tmpPrefab:t.tmpNode)||cc.error(zk.Tools.getNodePath(this.node)),t._itemTmp=cc.instantiate(t.templateType==n.PREFAB?t.tmpPrefab:t.tmpNode),t._updateCounter=0,t._updateDone=!0,t.node.removeAllChildren(),t.numItems&&t.startRenderItems()},onDestroy:function(){this._itemTmp&&this._itemTmp.isValid&&this._itemTmp.destroy(),this.tmpNode&&this.tmpNode.isValid&&this.tmpNode.destroy()},startRenderItems:function(){var t=this;if(t.enabledInHierarchy&&(t._delRedundantItem(),t.numItems>0))if(t.frameByFrameRenderNum>0){for(var e=t.frameByFrameRenderNum>t.numItems?t.numItems:t.frameByFrameRenderNum,i=0;i<e;i++)t._createOrUpdateItem(i);t.frameByFrameRenderNum<t.numItems&&(t._updateCounter=t.frameByFrameRenderNum,t._updateDone=!1)}else for(var n=0;n<t.numItems;n++)t._createOrUpdateItem(n)},update:function(){if(!(this.frameByFrameRender<=0||this._updateDone)){for(var t=this._updateCounter+this.frameByFrameRenderNum>this._numItems?this._numItems:this._updateCounter+this.frameByFrameRenderNum,e=this._updateCounter;e<t;e++)this._createOrUpdateItem(e);this._updateCounter>=this._numItems-1?this._updateDone=!0:this._updateCounter+=this.frameByFrameRenderNum}},_createOrUpdateItem:function(t){var e=this,i=e.node.children[t];i||(i=cc.instantiate(e._itemTmp)),i.parent=e.node,e.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],i,t)},updateItem:function(t){Array.isArray(t)||(t=[t]);for(var e=0,i=t.length;e<i;e++){var n=t[e],s=this.node.children[n];this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],s,n)}},updateAll:function(){this.numItems=this.numItems},_delRedundantItem:function(){for(var t=this;t.node.childrenCount>t._numItems;)t._delSingleItem(t.node.children[t.node.childrenCount-1])},_delSingleItem:function(t){t.removeFromParent(),t.destroy&&t.destroy(),t=null},getItemById:function(t){return this.node.children[t]}}),cc._RF.pop()},{}],BaseUI:[function(t,e,i){"use strict";cc._RF.push(e,"1e562ejhhhGup7qhPc/up6s","BaseUI"),cc.Class({extends:cc.Component,onEnable:function(){this.addEvent()},onDisable:function(){this.delEvent()},addEvent:function(){},delEvent:function(){},btnEventSound:function(){},btnEventCloseSound:function(){}}),cc._RF.pop()},{}],BigNumber:[function(t,e,i){"use strict";cc._RF.push(e,"c1c18YyyY1G6YDR4ZzIBHuB","BigNumber"),function(t){var i,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,s=Math.ceil,o=Math.floor,r="[BigNumber Error] ",a=r+"Number primitive has more than 15 significant digits: ",c=1e14,h=14,l=9007199254740991,u=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],d=1e7,f=1e9;function p(t){var e=0|t;return t>0||t===e?e:e-1}function m(t){for(var e,i,n=1,s=t.length,o=t[0]+"";n<s;){for(e=t[n++]+"",i=h-e.length;i--;e="0"+e);o+=e}for(s=o.length;48===o.charCodeAt(--s););return o.slice(0,s+1||1)}function _(t,e){var i,n,s=t.c,o=e.c,r=t.s,a=e.s,c=t.e,h=e.e;if(!r||!a)return null;if(i=s&&!s[0],n=o&&!o[0],i||n)return i?n?0:-a:r;if(r!=a)return r;if(i=r<0,n=c==h,!s||!o)return n?0:!s^i?1:-1;if(!n)return c>h^i?1:-1;for(a=(c=s.length)<(h=o.length)?c:h,r=0;r<a;r++)if(s[r]!=o[r])return s[r]>o[r]^i?1:-1;return c==h?0:c>h^i?1:-1}function g(t,e,i,n){if(t<e||t>i||t!==(t<0?s(t):o(t)))throw Error(r+(n||"Argument")+("number"==typeof t?t<e||t>i?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function v(t){var e=t.c.length-1;return p(t.e/h)==e&&t.c[e]%2!=0}function y(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function T(t,e,i){var n,s;if(e<0){for(s=i+".";++e;s+=i);t=s+t}else if(++e>(n=t.length)){for(s=i,e-=n;--e;s+=i);t+=s}else e<n&&(t=t.slice(0,e)+"."+t.slice(e));return t}(i=function t(e){var i,E,S,b=k.prototype={constructor:k,toString:null,valueOf:null},w=new k(1),I=20,L=4,C=-7,x=21,N=-1e7,D=1e7,P=!1,A=1,R=0,M={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xa0",suffix:""},O="0123456789abcdefghijklmnopqrstuvwxyz";function k(t,e){var i,s,r,c,u,d,f,p,m=this;if(!(m instanceof k))return new k(t,e);if(null==e){if(t instanceof k)return m.s=t.s,m.e=t.e,void(m.c=(t=t.c)?t.slice():t);if((d="number"==typeof t)&&0*t==0){if(m.s=1/t<0?(t=-t,-1):1,t===~~t){for(c=0,u=t;u>=10;u/=10,c++);return m.e=c,void(m.c=[t])}p=String(t)}else{if(p=String(t),!n.test(p))return S(m,p,d);m.s=45==p.charCodeAt(0)?(p=p.slice(1),-1):1}(c=p.indexOf("."))>-1&&(p=p.replace(".","")),(u=p.search(/e/i))>0?(c<0&&(c=u),c+=+p.slice(u+1),p=p.substring(0,u)):c<0&&(c=p.length)}else{if(g(e,2,O.length,"Base"),p=String(t),10==e)return H(m=new k(t instanceof k?t:p),I+m.e+1,L);if(d="number"==typeof t){if(0*t!=0)return S(m,p,d,e);if(m.s=1/t<0?(p=p.slice(1),-1):1,k.DEBUG&&p.replace(/^0\.0*|\./,"").length>15)throw Error(a+t);d=!1}else m.s=45===p.charCodeAt(0)?(p=p.slice(1),-1):1;for(i=O.slice(0,e),c=u=0,f=p.length;u<f;u++)if(i.indexOf(s=p.charAt(u))<0){if("."==s){if(u>c){c=f;continue}}else if(!r&&(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase()))){r=!0,u=-1,c=0;continue}return S(m,String(t),d,e)}(c=(p=E(p,e,10,m.s)).indexOf("."))>-1?p=p.replace(".",""):c=p.length}for(u=0;48===p.charCodeAt(u);u++);for(f=p.length;48===p.charCodeAt(--f););if(p=p.slice(u,++f)){if(f-=u,d&&k.DEBUG&&f>15&&(t>l||t!==o(t)))throw Error(a+m.s*t);if((c=c-u-1)>D)m.c=m.e=null;else if(c<N)m.c=[m.e=0];else{if(m.e=c,m.c=[],u=(c+1)%h,c<0&&(u+=h),u<f){for(u&&m.c.push(+p.slice(0,u)),f-=h;u<f;)m.c.push(+p.slice(u,u+=h));p=p.slice(u),u=h-p.length}else u-=f;for(;u--;p+="0");m.c.push(+p)}}else m.c=[m.e=0]}function z(t,e,i,n){var s,o,r,a,c;if(null==i?i=L:g(i,0,8),!t.c)return t.toString();if(s=t.c[0],r=t.e,null==e)c=m(t.c),c=1==n||2==n&&r<=C?y(c,r):T(c,r,"0");else if(o=(t=H(new k(t),e,i)).e,a=(c=m(t.c)).length,1==n||2==n&&(e<=o||o<=C)){for(;a<e;c+="0",a++);c=y(c,o)}else if(e-=r,c=T(c,o,"0"),o+1>a){if(--e>0)for(c+=".";e--;c+="0");}else if((e+=o-a)>0)for(o+1==a&&(c+=".");e--;c+="0");return t.s<0&&s?"-"+c:c}function F(t,e){for(var i,n=1,s=new k(t[0]);n<t.length;n++){if(!(i=new k(t[n])).s){s=i;break}e.call(s,i)&&(s=i)}return s}function B(t,e,i){for(var n=1,s=e.length;!e[--s];e.pop());for(s=e[0];s>=10;s/=10,n++);return(i=n+i*h-1)>D?t.c=t.e=null:i<N?t.c=[t.e=0]:(t.e=i,t.c=e),t}function H(t,e,i,n){var r,a,l,d,f,p,m,_=t.c,g=u;if(_){t:{for(r=1,d=_[0];d>=10;d/=10,r++);if((a=e-r)<0)a+=h,l=e,m=(f=_[p=0])/g[r-l-1]%10|0;else if((p=s((a+1)/h))>=_.length){if(!n)break t;for(;_.length<=p;_.push(0));f=m=0,r=1,l=(a%=h)-h+1}else{for(f=d=_[p],r=1;d>=10;d/=10,r++);m=(l=(a%=h)-h+r)<0?0:f/g[r-l-1]%10|0}if(n=n||e<0||null!=_[p+1]||(l<0?f:f%g[r-l-1]),n=i<4?(m||n)&&(0==i||i==(t.s<0?3:2)):m>5||5==m&&(4==i||n||6==i&&(a>0?l>0?f/g[r-l]:0:_[p-1])%10&1||i==(t.s<0?8:7)),e<1||!_[0])return _.length=0,n?(e-=t.e+1,_[0]=g[(h-e%h)%h],t.e=-e||0):_[0]=t.e=0,t;if(0==a?(_.length=p,d=1,p--):(_.length=p+1,d=g[h-a],_[p]=l>0?o(f/g[r-l]%g[l])*d:0),n)for(;;){if(0==p){for(a=1,l=_[0];l>=10;l/=10,a++);for(l=_[0]+=d,d=1;l>=10;l/=10,d++);a!=d&&(t.e++,_[0]==c&&(_[0]=1));break}if(_[p]+=d,_[p]!=c)break;_[p--]=0,d=1}for(a=_.length;0===_[--a];_.pop());}t.e>D?t.c=t.e=null:t.e<N&&(t.c=[t.e=0])}return t}function G(t){var e,i=t.e;return null===i?t.toString():(e=m(t.c),e=i<=C||i>=x?y(e,i):T(e,i,"0"),t.s<0?"-"+e:e)}return k.clone=t,k.ROUND_UP=0,k.ROUND_DOWN=1,k.ROUND_CEIL=2,k.ROUND_FLOOR=3,k.ROUND_HALF_UP=4,k.ROUND_HALF_DOWN=5,k.ROUND_HALF_EVEN=6,k.ROUND_HALF_CEIL=7,k.ROUND_HALF_FLOOR=8,k.EUCLID=9,k.config=k.set=function(t){var e,i;if(null!=t){if("object"!=typeof t)throw Error(r+"Object expected: "+t);if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(g(i=t[e],0,f,e),I=i),t.hasOwnProperty(e="ROUNDING_MODE")&&(g(i=t[e],0,8,e),L=i),t.hasOwnProperty(e="EXPONENTIAL_AT")&&((i=t[e])&&i.pop?(g(i[0],-f,0,e),g(i[1],0,f,e),C=i[0],x=i[1]):(g(i,-f,f,e),C=-(x=i<0?-i:i))),t.hasOwnProperty(e="RANGE"))if((i=t[e])&&i.pop)g(i[0],-f,-1,e),g(i[1],1,f,e),N=i[0],D=i[1];else{if(g(i,-f,f,e),!i)throw Error(r+e+" cannot be zero: "+i);N=-(D=i<0?-i:i)}if(t.hasOwnProperty(e="CRYPTO")){if((i=t[e])!==!!i)throw Error(r+e+" not true or false: "+i);if(i){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw P=!i,Error(r+"crypto unavailable");P=i}else P=i}if(t.hasOwnProperty(e="MODULO_MODE")&&(g(i=t[e],0,9,e),A=i),t.hasOwnProperty(e="POW_PRECISION")&&(g(i=t[e],0,f,e),R=i),t.hasOwnProperty(e="FORMAT")){if("object"!=typeof(i=t[e]))throw Error(r+e+" not an object: "+i);M=i}if(t.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(i=t[e])||/^.$|[+-.\s]|(.).*\1/.test(i))throw Error(r+e+" invalid: "+i);O=i}}return{DECIMAL_PLACES:I,ROUNDING_MODE:L,EXPONENTIAL_AT:[C,x],RANGE:[N,D],CRYPTO:P,MODULO_MODE:A,POW_PRECISION:R,FORMAT:M,ALPHABET:O}},k.isBigNumber=function(t){return t instanceof k||t&&!0===t._isBigNumber||!1},k.maximum=k.max=function(){return F(arguments,b.lt)},k.minimum=k.min=function(){return F(arguments,b.gt)},k.random=function(){var t=9007199254740992*Math.random()&2097151?function(){return o(9007199254740992*Math.random())}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)};return function(e){var i,n,a,c,l,d=0,p=[],m=new k(w);if(null==e?e=I:g(e,0,f),c=s(e/h),P)if(crypto.getRandomValues){for(i=crypto.getRandomValues(new Uint32Array(c*=2));d<c;)(l=131072*i[d]+(i[d+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),i[d]=n[0],i[d+1]=n[1]):(p.push(l%1e14),d+=2);d=c/2}else{if(!crypto.randomBytes)throw P=!1,Error(r+"crypto unavailable");for(i=crypto.randomBytes(c*=7);d<c;)(l=281474976710656*(31&i[d])+1099511627776*i[d+1]+4294967296*i[d+2]+16777216*i[d+3]+(i[d+4]<<16)+(i[d+5]<<8)+i[d+6])>=9e15?crypto.randomBytes(7).copy(i,d):(p.push(l%1e14),d+=7);d=c/7}if(!P)for(;d<c;)(l=t())<9e15&&(p[d++]=l%1e14);for(c=p[--d],e%=h,c&&e&&(l=u[h-e],p[d]=o(c/l)*l);0===p[d];p.pop(),d--);if(d<0)p=[a=0];else{for(a=-1;0===p[0];p.splice(0,1),a-=h);for(d=1,l=p[0];l>=10;l/=10,d++);d<h&&(a-=h-d)}return m.e=a,m.c=p,m}}(),k.sum=function(){for(var t=1,e=arguments,i=new k(e[0]);t<e.length;)i=i.plus(e[t++]);return i},E=function(){function t(t,e,i,n){for(var s,o,r=[0],a=0,c=t.length;a<c;){for(o=r.length;o--;r[o]*=e);for(r[0]+=n.indexOf(t.charAt(a++)),s=0;s<r.length;s++)r[s]>i-1&&(null==r[s+1]&&(r[s+1]=0),r[s+1]+=r[s]/i|0,r[s]%=i)}return r.reverse()}return function(e,n,s,o,r){var a,c,h,l,u,d,f,p,_=e.indexOf("."),g=I,v=L;for(_>=0&&(l=R,R=0,e=e.replace(".",""),d=(p=new k(n)).pow(e.length-_),R=l,p.c=t(T(m(d.c),d.e,"0"),10,s,"0123456789"),p.e=p.c.length),h=l=(f=t(e,n,s,r?(a=O,"0123456789"):(a="0123456789",O))).length;0==f[--l];f.pop());if(!f[0])return a.charAt(0);if(_<0?--h:(d.c=f,d.e=h,d.s=o,f=(d=i(d,p,g,v,s)).c,u=d.r,h=d.e),_=f[c=h+g+1],l=s/2,u=u||c<0||null!=f[c+1],u=v<4?(null!=_||u)&&(0==v||v==(d.s<0?3:2)):_>l||_==l&&(4==v||u||6==v&&1&f[c-1]||v==(d.s<0?8:7)),c<1||!f[0])e=u?T(a.charAt(1),-g,a.charAt(0)):a.charAt(0);else{if(f.length=c,u)for(--s;++f[--c]>s;)f[c]=0,c||(++h,f=[1].concat(f));for(l=f.length;!f[--l];);for(_=0,e="";_<=l;e+=a.charAt(f[_++]));e=T(e,h,a.charAt(0))}return e}}(),i=function(){function t(t,e,i){var n,s,o,r,a=0,c=t.length,h=e%d,l=e/d|0;for(t=t.slice();c--;)a=((s=h*(o=t[c]%d)+(n=l*o+(r=t[c]/d|0)*h)%d*d+a)/i|0)+(n/d|0)+l*r,t[c]=s%i;return a&&(t=[a].concat(t)),t}function e(t,e,i,n){var s,o;if(i!=n)o=i>n?1:-1;else for(s=o=0;s<i;s++)if(t[s]!=e[s]){o=t[s]>e[s]?1:-1;break}return o}function i(t,e,i,n){for(var s=0;i--;)t[i]-=s,s=t[i]<e[i]?1:0,t[i]=s*n+t[i]-e[i];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(n,s,r,a,l){var u,d,f,m,_,g,v,y,T,E,S,b,w,I,L,C,x,N=n.s==s.s?1:-1,D=n.c,P=s.c;if(!(D&&D[0]&&P&&P[0]))return new k(n.s&&s.s&&(D?!P||D[0]!=P[0]:P)?D&&0==D[0]||!P?0*N:N/0:NaN);for(T=(y=new k(N)).c=[],N=r+(d=n.e-s.e)+1,l||(l=c,d=p(n.e/h)-p(s.e/h),N=N/h|0),f=0;P[f]==(D[f]||0);f++);if(P[f]>(D[f]||0)&&d--,N<0)T.push(1),m=!0;else{for(I=D.length,C=P.length,f=0,N+=2,(_=o(l/(P[0]+1)))>1&&(P=t(P,_,l),D=t(D,_,l),C=P.length,I=D.length),w=C,S=(E=D.slice(0,C)).length;S<C;E[S++]=0);x=P.slice(),x=[0].concat(x),L=P[0],P[1]>=l/2&&L++;do{if(_=0,(u=e(P,E,C,S))<0){if(b=E[0],C!=S&&(b=b*l+(E[1]||0)),(_=o(b/L))>1)for(_>=l&&(_=l-1),v=(g=t(P,_,l)).length,S=E.length;1==e(g,E,v,S);)_--,i(g,C<v?x:P,v,l),v=g.length,u=1;else 0==_&&(u=_=1),v=(g=P.slice()).length;if(v<S&&(g=[0].concat(g)),i(E,g,S,l),S=E.length,-1==u)for(;e(P,E,C,S)<1;)_++,i(E,C<S?x:P,S,l),S=E.length}else 0===u&&(_++,E=[0]);T[f++]=_,E[0]?E[S++]=D[w]||0:(E=[D[w]],S=1)}while((w++<I||null!=E[0])&&N--);m=null!=E[0],T[0]||T.splice(0,1)}if(l==c){for(f=1,N=T[0];N>=10;N/=10,f++);H(y,r+(y.e=f+d*h-1)+1,a,m)}else y.e=d,y.r=+m;return y}}(),S=function(){var t=/^(-?)0([xbo])(?=\w[\w.]*$)/i,e=/^([^.]+)\.$/,i=/^\.([^.]+)$/,n=/^-?(Infinity|NaN)$/,s=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(o,a,c,h){var l,u=c?a:a.replace(s,"");if(n.test(u))o.s=isNaN(u)?null:u<0?-1:1,o.c=o.e=null;else{if(!c&&(u=u.replace(t,function(t,e,i){return l="x"==(i=i.toLowerCase())?16:"b"==i?2:8,h&&h!=l?t:e}),h&&(l=h,u=u.replace(e,"$1").replace(i,"0.$1")),a!=u))return new k(u,l);if(k.DEBUG)throw Error(r+"Not a"+(h?" base "+h:"")+" number: "+a);o.c=o.e=o.s=null}}}(),b.absoluteValue=b.abs=function(){var t=new k(this);return t.s<0&&(t.s=1),t},b.comparedTo=function(t,e){return _(this,new k(t,e))},b.decimalPlaces=b.dp=function(t,e){var i,n,s,o=this;if(null!=t)return g(t,0,f),null==e?e=L:g(e,0,8),H(new k(o),t+o.e+1,e);if(!(i=o.c))return null;if(n=((s=i.length-1)-p(this.e/h))*h,s=i[s])for(;s%10==0;s/=10,n--);return n<0&&(n=0),n},b.dividedBy=b.div=function(t,e){return i(this,new k(t,e),I,L)},b.dividedToIntegerBy=b.idiv=function(t,e){return i(this,new k(t,e),0,1)},b.exponentiatedBy=b.pow=function(t,e){var i,n,a,c,l,u,d,f,p=this;if((t=new k(t)).c&&!t.isInteger())throw Error(r+"Exponent not an integer: "+G(t));if(null!=e&&(e=new k(e)),l=t.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!t.c||!t.c[0])return f=new k(Math.pow(+G(p),l?2-v(t):+G(t))),e?f.mod(e):f;if(u=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new k(NaN);(n=!u&&p.isInteger()&&e.isInteger())&&(p=p.mod(e))}else{if(t.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||l&&p.c[1]>=24e7:p.c[0]<8e13||l&&p.c[0]<=9999975e7)))return c=p.s<0&&v(t)?-0:0,p.e>-1&&(c=1/c),new k(u?1/c:c);R&&(c=s(R/h+2))}for(l?(i=new k(.5),u&&(t.s=1),d=v(t)):d=(a=Math.abs(+G(t)))%2,f=new k(w);;){if(d){if(!(f=f.times(p)).c)break;c?f.c.length>c&&(f.c.length=c):n&&(f=f.mod(e))}if(a){if(0===(a=o(a/2)))break;d=a%2}else if(H(t=t.times(i),t.e+1,1),t.e>14)d=v(t);else{if(0==(a=+G(t)))break;d=a%2}p=p.times(p),c?p.c&&p.c.length>c&&(p.c.length=c):n&&(p=p.mod(e))}return n?f:(u&&(f=w.div(f)),e?f.mod(e):c?H(f,R,L,void 0):f)},b.integerValue=function(t){var e=new k(this);return null==t?t=L:g(t,0,8),H(e,e.e+1,t)},b.isEqualTo=b.eq=function(t,e){return 0===_(this,new k(t,e))},b.isFinite=function(){return!!this.c},b.isGreaterThan=b.gt=function(t,e){return _(this,new k(t,e))>0},b.isGreaterThanOrEqualTo=b.gte=function(t,e){return 1===(e=_(this,new k(t,e)))||0===e},b.isInteger=function(){return!!this.c&&p(this.e/h)>this.c.length-2},b.isLessThan=b.lt=function(t,e){return _(this,new k(t,e))<0},b.isLessThanOrEqualTo=b.lte=function(t,e){return-1===(e=_(this,new k(t,e)))||0===e},b.isNaN=function(){return!this.s},b.isNegative=function(){return this.s<0},b.isPositive=function(){return this.s>0},b.isZero=function(){return!!this.c&&0==this.c[0]},b.minus=function(t,e){var i,n,s,o,r=this,a=r.s;if(e=(t=new k(t,e)).s,!a||!e)return new k(NaN);if(a!=e)return t.s=-e,r.plus(t);var l=r.e/h,u=t.e/h,d=r.c,f=t.c;if(!l||!u){if(!d||!f)return d?(t.s=-e,t):new k(f?r:NaN);if(!d[0]||!f[0])return f[0]?(t.s=-e,t):new k(d[0]?r:3==L?-0:0)}if(l=p(l),u=p(u),d=d.slice(),a=l-u){for((o=a<0)?(a=-a,s=d):(u=l,s=f),s.reverse(),e=a;e--;s.push(0));s.reverse()}else for(n=(o=(a=d.length)<(e=f.length))?a:e,a=e=0;e<n;e++)if(d[e]!=f[e]){o=d[e]<f[e];break}if(o&&(s=d,d=f,f=s,t.s=-t.s),(e=(n=f.length)-(i=d.length))>0)for(;e--;d[i++]=0);for(e=c-1;n>a;){if(d[--n]<f[n]){for(i=n;i&&!d[--i];d[i]=e);--d[i],d[n]+=c}d[n]-=f[n]}for(;0==d[0];d.splice(0,1),--u);return d[0]?B(t,d,u):(t.s=3==L?-1:1,t.c=[t.e=0],t)},b.modulo=b.mod=function(t,e){var n,s,o=this;return t=new k(t,e),!o.c||!t.s||t.c&&!t.c[0]?new k(NaN):!t.c||o.c&&!o.c[0]?new k(o):(9==A?(s=t.s,t.s=1,n=i(o,t,0,3),t.s=s,n.s*=s):n=i(o,t,0,A),(t=o.minus(n.times(t))).c[0]||1!=A||(t.s=o.s),t)},b.multipliedBy=b.times=function(t,e){var i,n,s,o,r,a,l,u,f,m,_,g,v,y,T,E=this,S=E.c,b=(t=new k(t,e)).c;if(!(S&&b&&S[0]&&b[0]))return!E.s||!t.s||S&&!S[0]&&!b||b&&!b[0]&&!S?t.c=t.e=t.s=null:(t.s*=E.s,S&&b?(t.c=[0],t.e=0):t.c=t.e=null),t;for(n=p(E.e/h)+p(t.e/h),t.s*=E.s,(l=S.length)<(m=b.length)&&(v=S,S=b,b=v,s=l,l=m,m=s),s=l+m,v=[];s--;v.push(0));for(y=c,T=d,s=m;--s>=0;){for(i=0,_=b[s]%T,g=b[s]/T|0,o=s+(r=l);o>s;)i=((u=_*(u=S[--r]%T)+(a=g*u+(f=S[r]/T|0)*_)%T*T+v[o]+i)/y|0)+(a/T|0)+g*f,v[o--]=u%y;v[o]=i}return i?++n:v.splice(0,1),B(t,v,n)},b.negated=function(){var t=new k(this);return t.s=-t.s||null,t},b.plus=function(t,e){var i,n=this,s=n.s;if(e=(t=new k(t,e)).s,!s||!e)return new k(NaN);if(s!=e)return t.s=-e,n.minus(t);var o=n.e/h,r=t.e/h,a=n.c,l=t.c;if(!o||!r){if(!a||!l)return new k(s/0);if(!a[0]||!l[0])return l[0]?t:new k(a[0]?n:0*s)}if(o=p(o),r=p(r),a=a.slice(),s=o-r){for(s>0?(r=o,i=l):(s=-s,i=a),i.reverse();s--;i.push(0));i.reverse()}for((s=a.length)-(e=l.length)<0&&(i=l,l=a,a=i,e=s),s=0;e;)s=(a[--e]=a[e]+l[e]+s)/c|0,a[e]=c===a[e]?0:a[e]%c;return s&&(a=[s].concat(a),++r),B(t,a,r)},b.precision=b.sd=function(t,e){var i,n,s,o=this;if(null!=t&&t!==!!t)return g(t,1,f),null==e?e=L:g(e,0,8),H(new k(o),t,e);if(!(i=o.c))return null;if(n=(s=i.length-1)*h+1,s=i[s]){for(;s%10==0;s/=10,n--);for(s=i[0];s>=10;s/=10,n++);}return t&&o.e+1>n&&(n=o.e+1),n},b.shiftedBy=function(t){return g(t,-l,l),this.times("1e"+t)},b.squareRoot=b.sqrt=function(){var t,e,n,s,o,r=this,a=r.c,c=r.s,h=r.e,l=I+4,u=new k("0.5");if(1!==c||!a||!a[0])return new k(!c||c<0&&(!a||a[0])?NaN:a?r:1/0);if(0==(c=Math.sqrt(+G(r)))||c==1/0?(((e=m(a)).length+h)%2==0&&(e+="0"),c=Math.sqrt(+e),h=p((h+1)/2)-(h<0||h%2),n=new k(e=c==1/0?"1e"+h:(e=c.toExponential()).slice(0,e.indexOf("e")+1)+h)):n=new k(c+""),n.c[0])for((c=(h=n.e)+l)<3&&(c=0);;)if(o=n,n=u.times(o.plus(i(r,o,l,1))),m(o.c).slice(0,c)===(e=m(n.c)).slice(0,c)){if(n.e<h&&--c,"9999"!=(e=e.slice(c-3,c+1))&&(s||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(H(n,n.e+I+2,1),t=!n.times(n).eq(r));break}if(!s&&(H(o,o.e+I+2,0),o.times(o).eq(r))){n=o;break}l+=4,c+=4,s=1}return H(n,n.e+I+1,L,t)},b.toExponential=function(t,e){return null!=t&&(g(t,0,f),t++),z(this,t,e,1)},b.toFixed=function(t,e){return null!=t&&(g(t,0,f),t=t+this.e+1),z(this,t,e)},b.toFormat=function(t,e,i){var n,s=this;if(null==i)null!=t&&e&&"object"==typeof e?(i=e,e=null):t&&"object"==typeof t?(i=t,t=e=null):i=M;else if("object"!=typeof i)throw Error(r+"Argument not an object: "+i);if(n=s.toFixed(t,e),s.c){var o,a=n.split("."),c=+i.groupSize,h=+i.secondaryGroupSize,l=i.groupSeparator||"",u=a[0],d=a[1],f=s.s<0,p=f?u.slice(1):u,m=p.length;if(h&&(o=c,c=h,h=o,m-=o),c>0&&m>0){for(o=m%c||c,u=p.substr(0,o);o<m;o+=c)u+=l+p.substr(o,c);h>0&&(u+=l+p.slice(o)),f&&(u="-"+u)}n=d?u+(i.decimalSeparator||"")+((h=+i.fractionGroupSize)?d.replace(new RegExp("\\d{"+h+"}\\B","g"),"$&"+(i.fractionGroupSeparator||"")):d):u}return(i.prefix||"")+n+(i.suffix||"")},b.toFraction=function(t){var e,n,s,o,a,c,l,d,f,p,_,g,v=this,y=v.c;if(null!=t&&(!(l=new k(t)).isInteger()&&(l.c||1!==l.s)||l.lt(w)))throw Error(r+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+G(l));if(!y)return new k(v);for(e=new k(w),f=n=new k(w),s=d=new k(w),g=m(y),a=e.e=g.length-v.e-1,e.c[0]=u[(c=a%h)<0?h+c:c],t=!t||l.comparedTo(e)>0?a>0?e:f:l,c=D,D=1/0,l=new k(g),d.c[0]=0;p=i(l,e,0,1),1!=(o=n.plus(p.times(s))).comparedTo(t);)n=s,s=o,f=d.plus(p.times(o=f)),d=o,e=l.minus(p.times(o=e)),l=o;return o=i(t.minus(n),s,0,1),d=d.plus(o.times(f)),n=n.plus(o.times(s)),d.s=f.s=v.s,_=i(f,s,a*=2,L).minus(v).abs().comparedTo(i(d,n,a,L).minus(v).abs())<1?[f,s]:[d,n],D=c,_},b.toNumber=function(){return+G(this)},b.toPrecision=function(t,e){return null!=t&&g(t,1,f),z(this,t,e,2)},b.toString=function(t){var e,i=this,n=i.s,s=i.e;return null===s?n?(e="Infinity",n<0&&(e="-"+e)):e="NaN":(e=m(i.c),null==t?e=s<=C||s>=x?y(e,s):T(e,s,"0"):(g(t,2,O.length,"Base"),e=E(T(e,s,"0"),10,t,n,!0)),n<0&&i.c[0]&&(e="-"+e)),e},b.valueOf=b.toJSON=function(){return G(this)},b._isBigNumber=!0,"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator&&(b[Symbol.toStringTag]="BigNumber",b[Symbol.for("nodejs.util.inspect.custom")]=b.valueOf),null!=e&&k.set(e),k}()).default=i.BigNumber=i,"function"==typeof define&&define.amd?define(function(){return i}):void 0!==e&&e.exports?e.exports=i:(t||(t="undefined"!=typeof self&&self?self:window),t.BigNumber=i)}(void 0),cc._RF.pop()},{}],Breath:[function(t,e,i){"use strict";cc._RF.push(e,"87115XPJPlH2KGBvhVFio5V","Breath");var n=cc.Enum({OPACITY:1,SCALE:2});cc.Class({editor:{disallowMultiple:!0,menu:"\u81ea\u5b9a\u4e49\u7ec4\u4ef6/Breath"},extends:cc.Component,properties:{duration:{default:2,min:.2,step:.1,tooltip:!1},breathType:{default:n.OPACITY,type:n},opacityMin:{default:50,rang:[0,255,1],tooltip:!1,visible:function(){return this.breathType==n.OPACITY}},opacityMax:{default:255,rang:[0,255,1],tooltip:!1,visible:function(){return this.breathType==n.OPACITY}},scaleMin:{default:1,min:0,tooltip:!1,visible:function(){return this.breathType==n.SCALE}},scaleMax:{default:1.1,min:0,tooltip:!1,visible:function(){return this.breathType==n.SCALE}},times:{default:0,type:cc.Integer,min:0,tooltip:!1},afterDel:{default:!1,tooltip:!1,visible:function(){return this.times>0}},delayDel:{default:0,type:cc.Float,min:0,tooltip:!1}},start:function(){var t,e,i=this;switch(i.duration=Math.abs(i.duration),i.breathType){case n.OPACITY:t=new cc.Sequence([new cc.fadeTo(i.duration/2,i.opacityMin),new cc.fadeTo(i.duration/2,i.opacityMax)]);break;case n.SCALE:var s;s=i.node.scaleX==i.opacityMax?[new cc.scaleTo(i.duration/2,i.scaleMin),new cc.scaleTo(i.duration/2,i.scaleMax)]:[new cc.scaleTo(i.duration/2,i.scaleMax),new cc.scaleTo(i.duration/2,i.scaleMin)],t=new cc.Sequence(s)}i.times>0?(e=cc.repeat(t,i.times),i.node.runAction(new cc.Sequence([e,new cc.callFunc(function(){i.afterDel&&(i.node.removeFromParent(),i.node.destroy())})]))):(e=cc.repeatForever(t),i.node.runAction(e)),i.delayDel>0&&i.scheduleOnce(function(){i.node.removeFromParent(),i.node.destroy()},i.delayDel)},onDestroy:function(){this.node&&this.node.stopAllActions(),this.unscheduleAllCallbacks()}}),cc._RF.pop()},{}],CDHelper:[function(t,e,i){"use strict";cc._RF.push(e,"92837xizElCa5i639XmXHPL","CDHelper");var n=cc.Enum({NONE:0,RICH_TEXT:1,LABEL:2}),s=cc.Enum({"hh:mm:ss":1,"hh:mm":2,"mm:ss":3,ss:4,"dd:hh:mm":5}),o=cc.Enum({HIDE:1,DESTROY:2,FADE_OUT:3,FADE_OUT_DESTROY:4}),r=t("Time");cc.Class({editor:{disallowMultiple:!0,menu:"\u81ea\u5b9a\u4e49\u7ec4\u4ef6/CDHelper"},extends:cc.Component,properties:{textType:{default:n.RICH_TEXT,type:n,notify:function(){0}},richText:{default:null,type:cc.RichText,visible:function(){var t=this.textType==n.RICH_TEXT;return t||(this.richText=null),t}},label:{default:null,type:cc.Label,visible:function(){var t=this.textType==n.LABEL;return t||(this.label=null),t}},text:{get:function(){return this.richText||this.label},visible:!1},countDown:{default:!0,tooltip:!1},_cd:0,cd:{get:function(){return this._cd},set:function(t){if(this._cd=t,this.countDown){var e=this._endTime||0;this._endTime=r.unixtime()+t,Math.abs(e-this._endTime)>1&&this.resetBar()}else{var i=this._startTime||0;this._startTime=r.unixtime()-t,Math.abs(i-this._startTime)>1&&this.resetBar()}this.forMat(!0)}},maxCd:{default:0,visible:function(){return!this.countDown||this.bar}},unitZh:{default:!1,tooltip:!1,notify:function(){},visible:function(){return this.textType!=n.NONE}},formatTimeFuncName:{default:"formatSeconds6",tooltip:!1,visible:function(){return this.textType!=n.NONE&&this.unitZh}},cdType:{default:s["hh:mm:ss"],type:s,notify:function(){},visible:function(){return!this.unitZh&&this.textType!=n.NONE}},updateRate:{default:1,min:0,tooltip:!1},finishedString:{default:"",tooltip:!1,visible:function(){return this.textType!=n.NONE}},finishedEvt:{default:null,type:cc.Component.EventHandler,tooltip:!1},hideWhenEndTarget:{default:null,type:cc.Node,tooltip:!1},endEvt:{default:o.HIDE,type:o,tooltip:!1,visible:function(){return!!this.hideWhenEndTarget}},fodeOutDuration:{default:1,tooltip:!1,visible:function(){return this.endEvt==o.FADE_OUT||this.endEvt==o.FADE_OUT_DESTROY}},sound:{default:0,tooltip:!1},jump:{default:0,tooltip:!1},red:{default:0,tooltip:!1},redColor:{default:cc.color(255,54,0),tooltip:!1,visible:function(){return this.red>0}},bar:{default:null,type:cc.Node,tooltip:!1,notify:function(){0}},barMaxWidth:0,_prefixStr:"",prefix:{default:"",notify:function(){},visible:function(){var t=this.textType!=n.NONE;return t||(this._prefixStr=""),t}},prefixColor:{default:cc.color(0,0,0),tooltip:!1,notify:function(){},visible:function(){return this.textType==n.RICH_TEXT}},_suffixStr:"",suffix:{default:"",notify:function(){},visible:function(){var t=this.textType!=n.NONE;return t||(this._suffixStr=""),t}},suffixColor:{default:cc.color(0,0,0),tooltip:!1,notify:function(){},visible:function(){return this.textType==n.RICH_TEXT}},cdColor:{default:cc.color(0,0,0),tooltip:!1,notify:function(){},visible:function(){return this.textType==n.RICH_TEXT}}},onLoad:function(){(this.countDown&&this.cd>0||this.cd<this.maxCd)&&(this._updateRate=0),this.sound},onEnable:function(){this.countDown?void 0!=this._endTime&&(this.cd=Math.max(0,this._endTime-r.unixtime()),this.resetBar()):void 0!=this._startTime&&(this.cd=Math.min(this.maxCd-.1,r.unixtime()-this._startTime),this.resetBar())},stop:function(){this._stop=!0},pause:function(){this._pause=!0},resume:function(){this._pause=!1},resetBar:function(){if(this.bar)if(this.bar.stopAllActions(),this.countDown){var t=this.maxCd||this.cd;this.bar.width=this.barMaxWidth*this.cd/t,cc.tween(this.bar).to(this.cd,{width:0}).start()}else this.bar.width=(this.maxCd-this.cd)/this.maxCd*this.barMaxWidth,cc.tween(this.bar).to(this.cd,{width:this.barMaxWidth}).start()},forMat:function(t){switch(this.textType){case n.RICH_TEXT:this._prefixStr=this.prefix?"<color=#"+this.prefixColor.toHEX("#rrggbb")+">"+this.prefix+"</c>":"",this._suffixStr=this.suffix?"<color=#"+this.suffixColor.toHEX("#rrggbb")+">"+this.suffix+"</c>":"",this.cdColorHex=this.cdColor.toHEX("#rrggbb");break;case n.LABEL:this._prefixStr=this.prefix?this.prefix:"",this._suffixStr=this.suffix?this.suffix:""}t&&this.updateText()},updateText:function(){if(this.textType!=n.NONE&&this.text)if(this.countDown&&this.cd<=0||!this.countDown&&this.cd>=this.maxCd)this.text.string=this.finishedString||"";else{var t;cc.isValid(this.hideWhenEndTarget)&&(this.hideWhenEndTarget.active=!0,this.hideWhenEndTarget.opacity=255);var e="",i=Math.floor(this.cd);if(this.unitZh)e=r[this.formatTimeFuncName]?r[this.formatTimeFuncName](i):"\u65e0\u6548\u51fd\u6570";else switch(this.cdType){case s["dd:hh:mm"]:e=r.formatSecondsByFormat(i,"dd:hh:mm");break;case s["hh:mm:ss"]:e=r.formatSecondsByFormat(i,"hh:mm:ss");break;case s["hh:mm"]:e=r.formatSecondsByFormat(i,"hh:mm");break;case s["mm:ss"]:e=r.formatSecondsByFormat(i,"mm:ss");break;case s.ss:e=Math.floor(i)}t=""+this._prefixStr+e+this._suffixStr,this.textType==n.RICH_TEXT&&(this.text.format?this.cd<=this.red&&(t="<color=#"+this.redColor.toHEX()+">"+t+"</c>"):t="<color=#"+(this.cd<=this.red?this.redColor.toHEX():this.cdColorHex)+">"+t+"</c>"),this.text.format?this.text.format(t):this.text.string=t}},update:function(t){var e=this;if(!this._stop&&!this._pause){var i=!1;this.countDown?this.cd>0&&(this.cd=Math.max(0,this.cd-t),this._updateRate-=t,i=this.cd<=0):this.cd<this.maxCd&&(this.cd=Math.min(this.maxCd,this.cd+t),this._updateRate-=t,i=this.cd>=this.maxCd),this._updateRate<=0&&(this._updateRate=this.updateRate,this.jump&&this.cd<=this.jump+1&&cc.tween(this.node).to(.1,{scale:1.2}).to(.1,{scale:1}).start(),this.updateText()),i&&(this.finishedEvt&&this.finishedEvt.emit([this]),this.hideWhenEndTarget&&(this.endEvt==o.DESTROY?this.hideWhenEndTarget.destroy():this.endEvt==o.HIDE?this.hideWhenEndTarget.active=!1:(this.hideWhenEndTarget.stopAllActions(),cc.tween(this.hideWhenEndTarget).to(this.fodeOutDuration,{opacity:0}).call(function(){e.endEvt==o.FADE_OUT_DESTROY&&e.hideWhenEndTarget.destroy()}).start())))}}}),cc._RF.pop()},{Time:"Time"}],Debug:[function(t,e,i){"use strict";cc._RF.push(e,"bc62e7RvQtLorzFGlYMZoVM","Debug"),window.kllog=function(){cc.log.apply(cc,arguments)},window.lkllog=function(){cc.log.apply(cc,arguments)},window.gzalog=function(){cc.log.apply(cc,arguments)},cc._RF.pop()},{}],Demo:[function(t,e,i){"use strict";cc._RF.push(e,"91411G+7MZH56GKM+l2phCG","Demo");var n=t("ProgressBar"),s=t("List");cc.Class({extends:t("BaseUI"),properties:{lab:cc.Label,tempPrefab:cc.Prefab,pro:n,list:s}}),cc._RF.pop()},{BaseUI:"BaseUI",List:"List",ProgressBar:"ProgressBar"}],Drag:[function(t,e,i){"use strict";cc._RF.push(e,"88fe2tNAd9KwId/3RGzo3Ft","Drag"),cc.Class({extends:cc.Component,editor:{disallowMultiple:!1,menu:"\u81ea\u5b9a\u4e49\u7ec4\u4ef6/Drag"},properties:{dragStartEvent:{default:null,type:cc.Component.EventHandler,tooltip:!1},dragMoveEvent:{default:null,type:cc.Component.EventHandler,tooltip:!1},dragEndEvent:{default:null,type:cc.Component.EventHandler,tooltip:!1},boundsActive:{tooltip:!1,default:!1},boundTop:{default:0,visible:function(){return this.boundsActive},notify:function(){this._checkedBounds=null}},boundBottom:{default:0,visible:function(){return this.boundsActive},notify:function(){this._checkedBounds=null}},boundLeft:{default:0,visible:function(){return this.boundsActive},notify:function(){this._checkedBounds=null}},boundRight:{default:0,visible:function(){return this.boundsActive},notify:function(){this._checkedBounds=null}}},onEnable:function(){this._registerEvent()},onDisable:function(){this._unregisterEvent()},_registerEvent:function(){var t=this;t.node.on(cc.Node.EventType.TOUCH_START,t._onTouchStart,t),t.node.on(cc.Node.EventType.TOUCH_MOVE,t._onTouchMove,t),t.node.on(cc.Node.EventType.TOUCH_END,t._onTouchEnd,t),t.node.on(cc.Node.EventType.TOUCH_CANCEL,t._onTouchCancel,t)},_unregisterEvent:function(){var t=this;t.node.off(cc.Node.EventType.TOUCH_START,t._onTouchStart,t),t.node.off(cc.Node.EventType.TOUCH_MOVE,t._onTouchMove,t),t.node.off(cc.Node.EventType.TOUCH_END,t._onTouchEnd,t),t.node.off(cc.Node.EventType.TOUCH_CANCEL,t._onTouchCancel,t)},_onTouchStart:function(t){this._startNodePos=this.node.getPosition(),this._startTouchPos={x:t.touch._point.x,y:t.touch._point.y},this.dragStartEvent&&cc.Component.EventHandler.emitEvents([this.dragStartEvent],this.node,this._startNodePos)},_onTouchMove:function(t){if(this._startNodePos&&this._startTouchPos){var e=t.touch._point,i=e.x-this._startTouchPos.x,n=e.y-this._startTouchPos.y,s=this._startNodePos.x+i,o=this._startNodePos.y+n;this.boundsActive&&(this._checkBounds(),o>this.boundTop&&(o=this.boundTop),s>this.boundRight&&(s=this.boundRight),o<this.boundBottom&&(o=this.boundBottom),s<this.boundLeft&&(s=this.boundLeft));var r=cc.v2(s,o);this.node.setPosition(r),this.dragMoveEvent&&cc.Component.EventHandler.emitEvents([this.dragMoveEvent],this.node,r)}},_onTouchEnd:function(t){this.stopDarg()},_onTouchCancel:function(t){},_checkBounds:function(){!this._checkedBounds&&this.boundsActive&&(this.boundBottom>this.boundTop&&(cc.warn("The boundBottom > boundTop"),this.boundBottom=this.boundTop),this.boundRight<this.boundLeft&&(cc.warn("The boundRight > boundLeft"),this.boundRight=this.boundLeft),this._checkedBounds=!0)},stopDarg:function(){this._startNodePos=this._startTouchPos=null,this.dragEndEvent&&cc.Component.EventHandler.emitEvents([this.dragEndEvent],this.node,this.node.getPosition())}}),cc._RF.pop()},{}],Enemy:[function(t,e,i){"use strict";cc._RF.push(e,"69c0eOitHRF7oTFBkxpPVEB","Enemy"),cc.Class({extends:cc.Component,properties:{sp:cc.Sprite,frames:[cc.SpriteFrame]},onLoad:function(){this.node.comp=this,this.setType(zk.Tools.rand(1,3))},setType:function(t){this.type=t,this.sp.spriteFrame=this.frames[t]}}),cc._RF.pop()},{}],EventDispatcher:[function(t,e,i){"use strict";cc._RF.push(e,"309245zlUZKaYI56a6dY67R","EventDispatcher");var n=t("EventSystem"),s=cc.Class({name:"EventDispatcher",properties:{_eventSystem:null},ctor:function(){this._eventSystem=new n},clear:function(){for(var e in this)if(this.hasOwnProperty(e)&&"_eventSystem"!=e){if(!this[e])continue;switch(typeof this[e]){case"number":this[e]=0;break;case"string":this[e]="";break;case"boolean":this[e]=!1;break;case"function":break;case"object":var i=this[e].constructor?this[e].constructor.name:"";this[e]="Array"==i?[]:"BigNumber"==i?t("BigNumber")(0):null}}},bind:function(t,e,i){this._eventSystem.bind(t,e,i)},send:function(t,e){this._eventSystem.send(t,e)},unBind:function(t,e,i){this._eventSystem.unBind(t,e,i)},unBindAll:function(){this._eventSystem.unBindAll()}});e.exports=s,cc._RF.pop()},{BigNumber:"BigNumber",EventSystem:"EventSystem"}],EventSystem:[function(t,e,i){"use strict";cc._RF.push(e,"cb2cbZvJa5LNbdQrh2LQCrF","EventSystem");var n=cc.Class({name:"EventSystem",properties:{_listenerFuncList:null},ctor:function(){this._listenerFuncList={}},bind:function(t,e,i){if(e&&t){var n=this._listenerFuncList[t];n||(n=[],this._listenerFuncList[t]=n);for(var s=n.length-1;s>=0;s--)if(n[s][0]==e&&n[s][1]==i)return;n.push([e,i])}},send:function(t,e){if(!t)throw new Error("event name can not be null");var i=this._listenerFuncList[t];if(i)for(var n=i.length-1;n>=0;n--)i[n][0].call(i[n][1],e)},unBind:function(t,e,i){if(!e||!t)throw new Error(t+" 's func can not be null");var n=this._listenerFuncList[t];if(n)for(var s=n.length-1;s>=0;s--)if(n[s][0]==e&&n[s][1]==i){n.splice(s,1);break}},unBindAll:function(){this._listenerFuncList={}}});e.exports=n,cc._RF.pop()},{}],GameBegin:[function(t,e,i){"use strict";cc._RF.push(e,"0bc00AgC9pIpo6Lf7Ej/yHi","GameBegin"),cc.Class({extends:t("BaseUI"),properties:{},onLoad:function(){},addEvent:function(){},delEvent:function(){},btnEv:function(t){}}),cc._RF.pop()},{BaseUI:"BaseUI"}],Game:[function(t,e,i){"use strict";cc._RF.push(e,"dbd6cLigvZBkrZg36RA6phj","Game");t("Tile");var n=t("Map"),s=t("Player");cc.Class({extends:t("BaseUI"),properties:{block:cc.Node,titleN:cc.Node,overN:cc.Node,labScore:cc.Label,labOver:cc.Label,typeSp:cc.Sprite,camera:cc.Camera,map:n,enemyMap:n,itemLayer:cc.Node,enemyLayer:cc.Node,roleLayer:cc.Node,player:s,enemyTmp:cc.Prefab,item1Tmp:cc.Prefab,item2Tmp:cc.Prefab,item3Tmp:cc.Prefab},onLoad:function(){zk.Game=this,this.easing="sineOut",this._n=0,this.enemyCol=9,this.enemyArr=[],this.itemArr=[],this.titleN.active=!0,this.player.node.active=!1,this.overN.active=!1,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},startGame:function(){this._n=0,this.enemyGoCD=150,this.enemyGoCD2=500,this.enemyGoCDOffset=10,this.enemyGoCDMin=70,this.newTileCD=200,this.newTileCD2=400,this.newTileCDOffset=20,this.newTileCDMin=100,this.newEnemyCD=500,this.newEnemyCD2=600,this.newEnemyCDOffset=70,this.newEnemyCDMin=100,this.newEnemyColNum=1,this.curColor=1,this.score=0,this.camera.node.x=0,this.titleN.active=this.overN.active=!1,[this.enemyArr,this.itemArr].forEach(function(t){for(;t.length;){var e=t.pop();cc.isValid(e)&&e.destroy()}}),this.initMap(),this.initEnemy(),this.player.node.active=!0,this.doMove(this.player.node,2,13,this.roleLayer,0),this.playing=!0,this.isOver=!1},overGame:function(){this.isOver=!0,this.playing=!1,this.overN.active=!0,this.labOver.string="\u554a\uff0c\u4f60\u88ab\u8682\u8681\u5403\u6389\u4e86\uff01\n\u5f97\u5206\uff1a"+this.score},initMap:function(){this.map.clear(),this.mapData=zk.MapManager.createMap(18,5,1),this.mapData.zeroAll(),this.map.updateMap(this.mapData)},initEnemy:function(){cc.log(this.mapData);for(var t=0;t<this.mapData.row;t++)for(var e=0;e<this.enemyCol;e++){if(0==this.mapData.mapT[t][e]){var i=cc.instantiate(this.enemyTmp);i.comp=i.getComponent("Enemy"),this.doMove(i,t,e,this.enemyLayer,0),this.enemyArr.push(i)}}},update:function(){var t=this;if(!this.isOver&&this.playing&&(this._n++,this._n%this.enemyGoCD2==0&&(this.enemyGoCD=Math.max(this.enemyGoCD-this.enemyGoCDOffset,this.enemyGoCDMin)),this._n%this.newTileCD2==0&&(this.newTileCD=Math.max(this.newTileCD-this.newTileCDOffset,this.newTileCDMin)),this._n%this.newEnemyCD2==0&&(this.newEnemyCD=Math.max(this.newEnemyCD-this.newEnemyCDOffset,this.newEnemyCDMin)),this._n%this.newTileCD==0&&(this.map.newCol(),this.addScore(100)),this._n%this.enemyGoCD==0&&this.enemyArr.forEach(function(e){var i=e.row,n=e.col+1;t.doMove(e,i,n,t.enemyLayer,null,function(){if(t.player.node.row==i&&t.player.node.col==n)t.overGame();else{var s=t.getItem(i,n);if(s)switch(s.itemType){case 1:s.comp.type==e.comp.type&&(t.killEnemy(e),t.addScore(500)),t.delItem(s)}}})}),this._n%this.newEnemyCD==0)){var e=999999;this.enemyArr.forEach(function(t){t.col<e&&(e=t.col)}),e--,e--;for(var i=zk.Tools.rand(0,this.newEnemyColNum),n=0;n<i;n++)for(var s=0;s<this.mapData.row;s++){var o=s,r=e+n;if(!this.getEnemy(o,r)&&!this.getItem(o,r))if(0==this.mapData.mapT[o][r]){var a=cc.instantiate(this.enemyTmp);a.comp=a.getComponent("Enemy"),this.doMove(a,o,r,this.enemyLayer,0),this.enemyArr.push(a);var c=a.y;a.y+=30,a.opacity=0,cc.tween(a).to(.2,{y:c,opacity:255}).start()}}}},addScore:function(t){this.score+=t,this.labScore.string=this.score},getEnemy:function(t,e){return this.enemyArr.find(function(i){return i.col==e&&i.row==t})},getItem:function(t,e,i){return this.itemArr.find(function(n){return n.col==e&&n.row==t&&(!i||n.itemType==i)})},killEnemy:function(t){zk.Tools.arrayDel(this.enemyArr,function(e){return e===t}),cc.tween(t).by(.1,{scale:.2}).call(function(){t.destroy()}).start()},delItem:function(t){zk.Tools.arrayDel(this.itemArr,function(e){return e===t}),t.destroy()},onTileRender:function(t,e){t.color=cc.color(["#ffffff","#FF7C7C","#8EFF70","#4EB6FF"][e])},onNewCol:function(){var t=this;cc.tween(this.camera.node).to(.25,{x:this.map.getRightX()-this.camera.node.width},{easing:this.easing}).call(function(){t.map.clearDeadTile(t.camera.node.x-72)}).start()},onKeyDown:function(t){var e,i,n,s,o=this;switch(t.keyCode){case cc.macro.KEY.up:e=this.player.node.row,i=this.player.node.col,n=this.player.node.row-1,s=this.player.node.col;break;case cc.macro.KEY.down:e=this.player.node.row,i=this.player.node.col,n=this.player.node.row+1,s=this.player.node.col;break;case cc.macro.KEY.left:e=this.player.node.row,i=this.player.node.col,n=this.player.node.row,s=this.player.node.col-1;break;case cc.macro.KEY.right:e=this.player.node.row,i=this.player.node.col,n=this.player.node.row,s=this.player.node.col+1;break;case cc.macro.KEY.z:this.curColor=1;break;case cc.macro.KEY.x:this.curColor=2;break;case cc.macro.KEY.c:this.curColor=3}null!=n&&(this.getEnemy(n,s)||this.doMove(this.player.node,n,s,this.roleLayer,null,function(){if(o.getEnemy(n,s))cc.log("\u6b7b\u4ea1\uff01");else{var t=o.getItem(e,i,1);if(t&&t.comp.type!=o.curColor&&(o.delItem(t),t=null),!t){var r=cc.instantiate(o.item1Tmp);r.scale=0,o.doMove(r,e,i,o.itemLayer,0,function(){var t=r.y;r.y+=20,cc.tween(r).to(.1,{scale:1,y:t},{easing:o.easing}).start()}),r.itemType=1,r.comp.setType(o.curColor),o.itemArr.push(r)}}}))},doMove:function(t,e,i,n,s,o){t.parent||(t.parent=n);var r=this.map.getTilePos(e,i,n);r&&(t.row=e,t.col=i,null==s&&(s=.13),s?cc.tween(t).to(s,{position:r},{easing:this.easing}).call(function(){o&&o(t)}).start():(t.setPosition(r),o&&o()))}}),cc._RF.pop()},{BaseUI:"BaseUI",Map:"Map",Player:"Player",Tile:"Tile"}],Gesture:[function(t,e,i){"use strict";cc._RF.push(e,"0d37cJT+bZEuJhSnhrPvsBT","Gesture");cc.Enum({UP:1,RIGHT:2,DOWN:3,LEFT:4});cc.Class({editor:{menu:"\u81ea\u5b9a\u4e49\u7ec4\u4ef6/Gesture"},extends:cc.Component,properties:{minDistance:{default:100,min:0,step:1,tooltip:!1},maxDistance:{default:300,min:-1,step:1,tooltip:!1},releaseEvent:{default:!0,tooltip:!1},events:{default:[],type:cc.Component.EventHandler,tooltip:!1}},onEnable:function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onSlideStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onSliding,this),this.node.on(cc.Node.EventType.TOUCH_END,this._onSlideStop,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onSlideStop,this)},onDisable:function(){this.node.off(cc.Node.EventType.TOUCH_START,this._onSlideStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this._onSliding,this),this.node.off(cc.Node.EventType.TOUCH_END,this._onSlideStop,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onSlideStop,this)},_onSlideStart:function(t){this._startPos=t.touch._point.clone(),this.interruption=null},_onSliding:function(t){this.maxDistance<=0||this.interruption||(this.releaseEvent||this._startPos.sub(t.touch._point.clone()).mag()>this.maxDistance&&(this._onSlideStop(t),this.interruption=!0))},_onSlideStop:function(t){if(this.interruption)return this.interruption=null;if(this._startPos){this._stopPos=t.touch._point.clone();for(var e=[this._stopPos.y-this._startPos.y,this._stopPos.x-this._startPos.x,this._startPos.y-this._stopPos.y,this._startPos.x-this._stopPos.x],i=e[e.length-1],n=e.length-1,s=e.length-2;s>=0;s--)i<e[s]&&(i=e[s],n=s);this._startPos.sub(this._stopPos).mag()<this.minDistance||(this.event(n+1),this._startPos=null)}},event:function(t){cc.Component.EventHandler.emitEvents(this.events,t)}}),cc._RF.pop()},{}],HtmlTextParser:[function(t,e,i){"use strict";cc._RF.push(e,"71776tlaClAYriEUO3sQUj7","HtmlTextParser");var n=/^(click)(\s)*=|(param)(\s)*=/,s=/(\s)*src(\s)*=|(\s)*height(\s)*=|(\s)*width(\s)*=|(\s)*click(\s)*=|(\s)*param(\s)*=/,o=function(){this._parsedObject={},this._specialSymbolArray=[],this._specialSymbolArray.push([/&lt;/g,"<"]),this._specialSymbolArray.push([/&gt;/g,">"]),this._specialSymbolArray.push([/&amp;/g,"&"]),this._specialSymbolArray.push([/&quot;/g,'"']),this._specialSymbolArray.push([/&apos;/g,"'"])};o.prototype={constructor:o,parse:function(t){this._resultObjectArray=[],this._stack=[];for(var e=0,i=t.length;e<i;){var n=t.indexOf("<",e);if(n<0)this._stack.pop(),this._processResult(t.substring(e)),e=i;else{this._processResult(t.substring(e,n));var s=t.indexOf(">",e);-1===s?s=n:"/"===t.charAt(n+1)?this._stack.pop():this._addToStack(t.substring(n+1,s)),e=s+1}}return this._resultObjectArray},_attributeToObject:function(t){var e,i,n,o,r={},a=(t=t.trim()).match(/^(color|size)(\s)*=/);if(a){if(e=a[0],""===(t=t.substring(e.length).trim()))return r;switch(i=t.indexOf(" "),e[0]){case"c":r.color=i>-1?t.substring(0,i).trim():t;break;case"s":r.size=parseInt(t)}return i>-1&&(o=t.substring(i+1).trim(),n=this._processEventHandler(o),r.event=n),r}if((a=t.match(/^(br(\s)*\/)/))&&a[0].length>0&&(e=a[0].trim()).startsWith("br")&&"/"===e[e.length-1])return r.isNewLine=!0,this._resultObjectArray.push({text:"",style:{newline:!0}}),r;if((a=t.match(/^(img(\s)*src(\s)*=[^>]+\/)/))&&a[0].length>0&&(e=a[0].trim()).startsWith("img")&&"/"===e[e.length-1]){var c;a=t.match(s);for(var h=!1;a;)e=(t=t.substring(t.indexOf(a[0]))).substr(0,a[0].length),u=(i=(c=t.substring(e.length).trim()).indexOf(" "))>-1?c.substr(0,i):c,e=(e=e.replace(/[^a-zA-Z]/g,"").trim()).toLocaleLowerCase(),t=c.substring(i).trim(),"src"===e?(r.isImage=!0,u.endsWith("/")&&(u=u.substring(0,u.length-1)),0===u.indexOf("'")?(h=!0,u=u.substring(1,u.length-1)):0===u.indexOf('"')&&(h=!0,u=u.substring(1,u.length-1)),r.src=u):"height"===e?r.imageHeight=parseInt(u):"width"===e?r.imageWidth=parseInt(u):"click"===e&&(r.event=this._processEventHandler(e+"="+u)),r.event&&"param"===e&&(r.event.param=u.replace(/^\"|\"$/g,"")),a=t.match(s);return h&&r.isImage&&this._resultObjectArray.push({text:"",style:r}),{}}if(a=t.match(/^(outline(\s)*[^>]*)/)){var l={color:"#ffffff",width:1};if(t=a[0].substring("outline".length).trim()){var u,d=/(\s)*color(\s)*=|(\s)*width(\s)*=|(\s)*click(\s)*=|(\s)*param(\s)*=/;for(a=t.match(d);a;)e=(t=t.substring(t.indexOf(a[0]))).substr(0,a[0].length),u=(i=(c=t.substring(e.length).trim()).indexOf(" "))>-1?c.substr(0,i):c,e=(e=e.replace(/[^a-zA-Z]/g,"").trim()).toLocaleLowerCase(),t=c.substring(i).trim(),"click"===e?r.event=this._processEventHandler(e+"="+u):"color"===e?l.color=u:"width"===e&&(l.width=parseInt(u)),r.event&&"param"===e&&(r.event.param=u.replace(/^\"|\"$/g,"")),a=t.match(d)}r.outline=l}if((a=t.match(/^(on|u|b|i)(\s)*/))&&a[0].length>0){switch(e=a[0],t=t.substring(e.length).trim(),e[0]){case"u":r.underline=!0;break;case"i":r.italic=!0;break;case"b":r.bold=!0}if(""===t)return r;n=this._processEventHandler(t),r.event=n}return r},_processEventHandler:function(t){for(var e=0,i={},s=t.match(n),o=!1;s;){var r=s[0],a="";if(o=!1,'"'===(t=t.substring(r.length).trim()).charAt(0))(e=t.indexOf('"',1))>-1&&(a=t.substring(1,e).trim(),o=!0),e++;else if("'"===t.charAt(0))(e=t.indexOf("'",1))>-1&&(a=t.substring(1,e).trim(),o=!0),e++;else{var c=t.match(/(\S)+/);e=(a=c?c[0]:"").length}o&&(i[r=r.substring(0,r.length-1).trim()]=a),s=(t=t.substring(e).trim()).match(n)}return i},_addToStack:function(t){var e=this._attributeToObject(t);if(0===this._stack.length)this._stack.push(e);else{if(e.isNewLine||e.isImage)return;var i=this._stack[this._stack.length-1];for(var n in i)e[n]||(e[n]=i[n]);this._stack.push(e)}},_processResult:function(t){""!==t&&(t=this._escapeSpecialSymbol(t),this._stack.length>0?this._resultObjectArray.push({text:t,style:this._stack[this._stack.length-1]}):this._resultObjectArray.push({text:t}))},_escapeSpecialSymbol:function(t){for(var e=0;e<this._specialSymbolArray.length;++e){var i=this._specialSymbolArray[e][0],n=this._specialSymbolArray[e][1];t=t.replace(i,n)}return t}},e.exports=zk.HtmlTextParser=o,cc._RF.pop()},{}],Item1:[function(t,e,i){"use strict";cc._RF.push(e,"ef8f2tKecdCrrcQGfXs+hUs","Item1"),cc.Class({extends:cc.Component,properties:{aniN:cc.Node},onLoad:function(){this.node.comp=this},setType:function(t){this.type=t,this.aniN.color=cc.color(["#ffffff","#900D0D","#06A202","#3E7296"][t])}}),cc._RF.pop()},{}],KeyDown:[function(t,e,i){"use strict";cc._RF.push(e,"806358SQ99G56YrPcOCe15Y","KeyDown");var n=cc.Class({name:"KeyDownData",properties:{key:"",event:{default:null,type:cc.Component.EventHandler}}});cc.Class({extends:cc.Component,editor:{disallowMultiple:!1,menu:"\u81ea\u5b9a\u4e49\u7ec4\u4ef6/KeyDown"},properties:{data:[n]},onLoad:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},onDestroy:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},onKeyDown:function(t){for(var e=this.data.length-1;e>=0;e--){var i=this.data[e];t.keyCode==cc.macro.KEY[i.key]&&i.event&&cc.Component.EventHandler.emitEvents([i.event])}}}),cc._RF.pop()},{}],Keypad:[function(t,e,i){"use strict";cc._RF.push(e,"c9416PB7PBBnpkZachaaTG5","Keypad"),cc.Class({extends:cc.Component,properties:{alNum:t("AutoLayout"),changeEvent:{default:null,type:cc.Component.EventHandler},confirmEvent:{default:null,type:cc.Component.EventHandler},labelNum:cc.Label,_min:1,_max:999,minLimitEvent:{default:null,type:cc.Component.EventHandler,tooltip:!1},maxLimitEvent:{default:null,type:cc.Component.EventHandler,tooltip:!1},_num:{default:1,serializable:!1},num:{visible:!1,type:cc.Integer,set:function(t){var e=this;if("string"!=typeof t){if(e._justPlus&&t>=e._max)return e._maxLimitCount++,e._num=e._max,e.updateInfo(),e.changeEvent&&cc.Component.EventHandler.emitEvents([e.changeEvent],e._num),void(e.maxLimitEvent&&cc.Component.EventHandler.emitEvents([e.maxLimitEvent],e._num,e._maxLimitCount));if(e._justSub&&t<=e._min)return e._minLimitCount++,e._num=e._min,e.updateInfo(),e.changeEvent&&cc.Component.EventHandler.emitEvents([e.changeEvent],e._num),void(e.minLimitEvent&&cc.Component.EventHandler.emitEvents([e.minLimitEvent],e._num,e._minLimitCount));t<e._max&&t>e._min&&(e._maxLimitCount=e._minLimitCount=0)}e._num=t,e.updateInfo(),e.changeEvent&&cc.Component.EventHandler.emitEvents([e.changeEvent],t),e._justPlus=e._justSub=!1},get:function(){return this._num}},_maxLimitCount:0,_minLimitCount:0},onLoad:function(){var t=this;t.padData=[1,2,3,"\u5220",4,5,6,0,7,8,9,"OK"],t.alNum.numItems=t.padData.length},onALRender:function(t,e){t.getComponentInChildren(cc.Label).string=this.padData[e]},updateInfo:function(){this.labelNum&&(this.labelNum.string=this.num)},plus:function(t,e){isNaN(t)||(e=t),e=parseInt(e),this._justPlus=!0,this.num+=e},sub:function(t,e){isNaN(t)||(e=t),e=parseInt(e),this._justSub=!0,this.num-=e},doMax:function(){this._justPlus=!0,this.num=this._max},doMin:function(){this._justSub=!0,this.num=this._min},onTapBtn:function(t){var e,i=this,n=i.padData[t.target.getSiblingIndex()];i.num;switch(n){case"\u2190":case"\u5220":var s=i.num.toString();e=s.length>1?parseInt(s.substring(0,s.length-1)):"";break;case"C":i.doMin();break;case"OK":i.switch(0),cc.Component.EventHandler.emitEvents([i.confirmEvent],i.num);break;default:e=parseInt(i.num+""+n)}i._lastKey=n,null!=e&&("string"!=typeof val&&(e>i.num?i._justPlus=!0:e<i.num&&(i._justSub=!0)),i.num=e)},switch:function(t,e){var i=this;isNaN(t)&&1!=t&&0!=t||(e=t),isNaN(parseInt(e))||(e=parseInt(e)),null==e&&(e=!i.node.active),i.node.active=e,e||""!=i.num&&null!=i.num||i.doMin()}}),cc._RF.pop()},{AutoLayout:"AutoLayout"}],ListItem:[function(t,e,i){"use strict";cc._RF.push(e,"8d96eS1U4FLTIPcxXDW1I7p","ListItem");var n=cc.Enum({NONE:0,TOGGLE:1,SWITCH:2});cc.Class({editor:{disallowMultiple:!1,menu:"\u81ea\u5b9a\u4e49\u7ec4\u4ef6/List Item",executionOrder:-5001},extends:cc.Component,properties:{icon:{default:null,type:cc.Sprite},title:cc.Node,selectedMode:{default:n.NONE,type:n,tooltip:!1},selectedFlag:{default:null,type:cc.Node,visible:function(){var t=this.selectedMode>0;return t||(this.selectedFlag=null),t}},selectedSpriteFrame:{default:null,type:cc.SpriteFrame,visible:function(){var t=this.selectedMode==n.SWITCH;return t||(this.selectedSpriteFrame=null),t}},adaptiveSize:{default:!1,tooltip:!1},_selected:!1,selected:{visible:!1,get:function(){return this._selected},set:function(t){if(this._selected=t,this.selectedFlag)switch(this.selectedMode){case n.TOGGLE:this.selectedFlag.active=t;break;case n.SWITCH:this.selectedFlag.spriteFrame=t?this.selectedSpriteFrame:this._unselectedSpriteFrame}}},_btnCom:null,btnCom:{visible:!1,get:function(){return this._btnCom||(this._btnCom=this.node.getComponent(cc.Button)),this._btnCom}}},onLoad:function(){if(this.title){var t=this.title.getComponent(cc.Label);t||(t=this.title.getComponent(cc.RichText)),this.title=t}if(this.selectedMode==n.SWITCH){var e=this.selectedFlag.getComponent(cc.Sprite);this.selectedFlag=e,this._unselectedSpriteFrame=e.spriteFrame}},onDestroy:function(){this.node.off(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this)},_registerEvent:function(){this.eventReg||(this.btnCom&&this._list.selectedMode>0&&this.btnCom.clickEvents.unshift(this.createEvt(this,"onClickThis")),this.adaptiveSize&&this.node.on(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this),this.eventReg=!0)},_onSizeChange:function(){this._list._onItemAdaptive(this.node)},createEvt:function(t,e,i){if(t.isValid){t.comName=t.comName||t.name.match(/\<(.*?)\>/g).pop().replace(/\<|>/g,"");var n=new cc.Component.EventHandler;return n.target=i||t.node,n.component=t.comName,n.handler=e,n}},showAni:function(t,e,i){var n,s=this;switch(t){case 0:n=[new cc.scaleTo(.2,.7),new cc.moveBy(.3,0,2*this.node.height)];break;case 1:n=[new cc.scaleTo(.2,.7),new cc.moveBy(.3,2*this.node.width,0)];break;case 2:n=[new cc.scaleTo(.2,.7),new cc.moveBy(.3,0,-2*this.node.height)];break;case 3:n=[new cc.scaleTo(.2,.7),new cc.moveBy(.3,-2*this.node.width,0)];break;default:n=[new cc.scaleTo(.3,.1)]}(e||i)&&n.push(new cc.CallFunc(function(){if(i){s._list._delSingleItem(s.node);for(var t=s._list.displayData.length-1;t>=0;t--)if(s._list.displayData[t].listId==s.node._listId){s._list.displayData.splice(t,1);break}}e()})),this.node.runAction(new cc.Sequence(n))},onClickThis:function(){this._list.selectedId=this.node._listId}}),cc._RF.pop()},{}],List:[function(t,e,i){"use strict";cc._RF.push(e,"2233aG/6fJLyo07102ch813","List");var n=cc.Enum({NODE:1,PREFAB:2}),s=cc.Enum({NORMAL:1,ADHERING:2,PAGE:3}),o=cc.Enum({NONE:0,SINGLE:1,MULT:2}),r=t("ListItem");cc.Class({extends:cc.Component,editor:{disallowMultiple:!1,menu:"\u81ea\u5b9a\u4e49\u7ec4\u4ef6/List",requireComponent:cc.ScrollView,executionOrder:-5e3},properties:{templateType:{default:n.NODE,type:n},tmpNode:{default:null,type:cc.Node,tooltip:!1,visible:function(){var t=this.templateType==n.NODE;return t||(this.tmpNode=null),t}},tmpPrefab:{default:null,type:cc.Prefab,tooltip:!1,visible:function(){var t=this.templateType==n.PREFAB;return t||(this.tmpPrefab=null),t}},_slideMode:1,slideMode:{type:s,tooltip:!1,get:function(){return this._slideMode},set:function(t){null!=t&&(this._slideMode=t)}},pageDistance:{default:.3,type:cc.Float,range:[0,1,.1],tooltip:!1,slide:!0,visible:function(){return this._slideMode==s.PAGE}},pageChangeEvent:{default:null,type:cc.Component.EventHandler,tooltip:!1,visible:function(){var t=this._slideMode==s.PAGE;return t||(this.pageChangeEvent=null),t}},_virtual:!0,virtual:{tooltip:!1,get:function(){return this._virtual},set:function(t){null!=t&&(this._virtual=t),0!=this._numItems&&this._onScrolling()}},cyclic:{default:!1,tooltip:!1,visible:function(){var t=this.slideMode==s.NORMAL;return t||(this.cyclic=!1),t}},lackCenter:{default:!1,tooltip:!1,visible:function(){return this.virtual}},lackSlide:{default:!1,tooltip:!1,visible:function(){var t=this.virtual&&!this.lackCenter;return t||(this.lackSlide=!1),t}},_updateRate:0,updateRate:{type:cc.Integer,range:[0,6,1],tooltip:!1,slide:!0,get:function(){return this._updateRate},set:function(t){t>=0&&t<=6&&(this._updateRate=t)}},frameByFrameRenderNum:{default:0,type:cc.Integer,range:[0,12,1],tooltip:!1,slide:!0},renderEvent:{default:null,type:cc.Component.EventHandler,tooltip:!1},selectedMode:{default:o.NONE,type:o,tooltip:!1},repeatEventSingle:{default:!1,tooltip:!1,visible:function(){return this.selectedMode==o.SINGLE}},selectedEvent:{default:null,type:cc.Component.EventHandler,tooltip:!1,visible:function(){var t=this.selectedMode>0;return t||(this.selectedEvent=null),t}},_selectedId:-1,selectedId:{visible:!1,get:function(){return this._selectedId},set:function(t){var e,i=this;switch(i.selectedMode){case o.SINGLE:if(!i.repeatEventSingle&&t==i._selectedId)return;if(e=i.getItemByListId(t),i._selectedId>=0?i._lastSelectedId=i._selectedId:i._lastSelectedId=null,i._selectedId=t,e&&(e.listItem.selected=!0),i._lastSelectedId>=0&&i._lastSelectedId!=i._selectedId){var n=i.getItemByListId(i._lastSelectedId);n&&(n.listItem.selected=!1)}i.selectedEvent&&cc.Component.EventHandler.emitEvents([i.selectedEvent],e,t%this._actualNumItems,null==i._lastSelectedId?null:i._lastSelectedId%this._actualNumItems);break;case o.MULT:if(!(e=i.getItemByListId(t)))return;i._selectedId>=0&&(i._lastSelectedId=i._selectedId),i._selectedId=t;var s=!e.listItem.selected;e.listItem.selected=s;var r=i.multSelected.indexOf(t);s&&r<0?i.multSelected.push(t):!s&&r>=0&&i.multSelected.splice(r,1),i.selectedEvent&&cc.Component.EventHandler.emitEvents([i.selectedEvent],e,t%this._actualNumItems,null==i._lastSelectedId?null:i._lastSelectedId%this._actualNumItems,s)}}},_numItems:{default:0,serializable:!1},numItems:{visible:!1,get:function(){return this._actualNumItems},set:function(t){var e=this;if(e.checkInited())if(null==t||t<0)cc.error("numItems set the wrong::",t);else if(e._actualNumItems=e._numItems=t,e._forceUpdate=!0,e._virtual)e._resizeContent(),e.cyclic&&(e._numItems=e._cyclicNum*e._numItems),e._onScrolling(),e.frameByFrameRenderNum||e.slideMode!=s.PAGE||(e.curPageNum=e.nearestListId);else{e.cyclic&&(e._resizeContent(),e._numItems=e._cyclicNum*e._numItems);var i=e.content.getComponent(cc.Layout);if(i&&(i.enabled=!0),e._delRedundantItem(),e.firstListId=0,e.frameByFrameRenderNum>0){for(var n=e.frameByFrameRenderNum>e._numItems?e._numItems:e.frameByFrameRenderNum,o=0;o<n;o++)e._createOrUpdateItem2(o);e.frameByFrameRenderNum<e._numItems&&(e._updateCounter=e.frameByFrameRenderNum,e._updateDone=!1)}else{for(var r=0;r<e._numItems;r++)e._createOrUpdateItem2(r);e.displayItemNum=e._numItems}}}}},onLoad:function(){this._init()},onDestroy:function(){var t=this;t._itemTmp&&t._itemTmp.isValid&&t._itemTmp.destroy(),t.tmpNode&&t.tmpNode.isValid&&t.tmpNode.destroy(),t._pool&&t._pool.clear()},onEnable:function(){this._registerEvent(),this._init(),this._aniDelRuning&&(this._aniDelRuning=!1,this._aniDelItem&&(this._aniDelBeforePos&&(this._aniDelItem.position=this._aniDelBeforePos,delete this._aniDelBeforePos),this._aniDelBeforeScale&&(this._aniDelItem.scale=this._aniDelBeforeScale,delete this._aniDelBeforeScale),delete this._aniDelItem),this._aniDelCB&&(this._aniDelCB(),delete this._aniDelCB))},onDisable:function(){this._unregisterEvent()},_registerEvent:function(){var t=this;t.node.on(cc.Node.EventType.TOUCH_START,t._onTouchStart,t,!0),t.node.on("touch-up",t._onTouchUp,t,!0),t.node.on(cc.Node.EventType.TOUCH_CANCEL,t._onTouchCancelled,t,!0),t.node.on("scroll-began",t._onScrollBegan,t,!0),t.node.on("scroll-ended",t._onScrollEnded,t,!0),t.node.on("scrolling",t._onScrolling,t,!0),t.node.on(cc.Node.EventType.SIZE_CHANGED,t._onSizeChanged,t)},_unregisterEvent:function(){var t=this;t.node.off(cc.Node.EventType.TOUCH_START,t._onTouchStart,t,!0),t.node.off("touch-up",t._onTouchUp,t,!0),t.node.off(cc.Node.EventType.TOUCH_CANCEL,t._onTouchCancelled,t,!0),t.node.off("scroll-began",t._onScrollBegan,t,!0),t.node.off("scroll-ended",t._onScrollEnded,t,!0),t.node.off("scrolling",t._onScrolling,t,!0),t.node.off(cc.Node.EventType.SIZE_CHANGED,t._onSizeChanged,t)},_init:function(){var t=this;if(!t._inited)if(t._scrollView=t.node.getComponent(cc.ScrollView),t.content=t._scrollView.content,t.content){switch(t._layout=t.content.getComponent(cc.Layout),t._align=t._layout.type,t._resizeMode=t._layout.resizeMode,t._startAxis=t._layout.startAxis,t._topGap=t._layout.paddingTop,t._rightGap=t._layout.paddingRight,t._bottomGap=t._layout.paddingBottom,t._leftGap=t._layout.paddingLeft,t._columnGap=t._layout.spacingX,t._lineGap=t._layout.spacingY,t._colLineNum,t._verticalDir=t._layout.verticalDirection,t._horizontalDir=t._layout.horizontalDirection,t.setTemplateItem(cc.instantiate(t.templateType==n.PREFAB?t.tmpPrefab:t.tmpNode)),t._slideMode!=s.ADHERING&&t._slideMode!=s.PAGE||(t._scrollView.inertia=!1,t._scrollView._onMouseWheel=function(){}),t.virtual||(t.lackCenter=!1),t._lastDisplayData=[],t.displayData=[],t._pool=new cc.NodePool,t._forceUpdate=!1,t._updateCounter=0,t._updateDone=!0,t.curPageNum=0,t.cyclic&&(t._scrollView._processAutoScrolling=this._processAutoScrolling.bind(t),t._scrollView._startBounceBackIfNeeded=function(){return!1}),t._align){case cc.Layout.Type.HORIZONTAL:switch(t._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:t._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:t._alignCalcType=2}break;case cc.Layout.Type.VERTICAL:switch(t._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:t._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:t._alignCalcType=4}break;case cc.Layout.Type.GRID:switch(t._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(t._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:t._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:t._alignCalcType=4}break;case cc.Layout.AxisDirection.VERTICAL:switch(t._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:t._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:t._alignCalcType=2}}}t.content.removeAllChildren(),t._inited=!0}else cc.error(t.node.name+"'s cc.ScrollView unset content!")},_processAutoScrolling:function(t){this._scrollView._autoScrollAccumulatedTime+=1*t;var e=Math.min(1,this._scrollView._autoScrollAccumulatedTime/this._scrollView._autoScrollTotalTime);if(this._scrollView._autoScrollAttenuate){var i=e-1;e=i*i*i*i*i+1}var n=this._scrollView._autoScrollStartPosition.add(this._scrollView._autoScrollTargetDelta.mul(e)),s=this._scrollView.getScrollEndedEventTiming(),o=Math.abs(e-1)<=s;Math.abs(e-1)<=this._scrollView.getScrollEndedEventTiming()&&!this._scrollView._isScrollEndedWithThresholdEventFired&&(this._scrollView._dispatchEvent("scroll-ended-with-threshold"),this._scrollView._isScrollEndedWithThresholdEventFired=!0),o&&(this._scrollView._autoScrolling=!1);var r=n.sub(this._scrollView.getContentPosition());this._scrollView._moveContent(this._scrollView._clampDelta(r),o),this._scrollView._dispatchEvent("scrolling"),this._scrollView._autoScrolling||(this._scrollView._isBouncing=!1,this._scrollView._scrolling=!1,this._scrollView._dispatchEvent("scroll-ended"))},setTemplateItem:function(t){if(t){var e=this;e._itemTmp=t,e._resizeMode==cc.Layout.ResizeMode.CHILDREN?e._itemSize=e._layout.cellSize:e._itemSize=new cc.size(t.width,t.height);var i=t.getComponent(r),n=!1;switch(i||(n=!0),n&&(e.selectedMode=o.NONE),(i=t.getComponent(cc.Widget))&&i.enabled&&(e._needUpdateWidget=!0),e.selectedMode==o.MULT&&(e.multSelected=[]),e._align){case cc.Layout.Type.HORIZONTAL:e._colLineNum=1,e._sizeType=!1;break;case cc.Layout.Type.VERTICAL:e._colLineNum=1,e._sizeType=!0;break;case cc.Layout.Type.GRID:switch(e._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:var s=e.content.width-e._leftGap-e._rightGap;e._colLineNum=Math.floor((s+e._columnGap)/(e._itemSize.width+e._columnGap)),e._sizeType=!0;break;case cc.Layout.AxisDirection.VERTICAL:var a=e.content.height-e._topGap-e._bottomGap;e._colLineNum=Math.floor((a+e._lineGap)/(e._itemSize.height+e._lineGap)),e._sizeType=!1}}}},checkInited:function(t){return t=null==t||t,!!this._inited||(t&&cc.error("List initialization not completed!"),!1)},_resizeContent:function(){var t,e=this;switch(e._align){case cc.Layout.Type.HORIZONTAL:if(e._customSize){var i=e._getFixedSize();t=e._leftGap+i.val+e._itemSize.width*(e._numItems-i.count)+e._columnGap*(e._numItems-1)+e._rightGap}else t=e._leftGap+e._itemSize.width*e._numItems+e._columnGap*(e._numItems-1)+e._rightGap;break;case cc.Layout.Type.VERTICAL:if(e._customSize){var n=e._getFixedSize();t=e._topGap+n.val+e._itemSize.height*(e._numItems-n.count)+e._lineGap*(e._numItems-1)+e._bottomGap}else t=e._topGap+e._itemSize.height*e._numItems+e._lineGap*(e._numItems-1)+e._bottomGap;break;case cc.Layout.Type.GRID:switch(e.lackCenter&&(e.lackCenter=!1),e._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:var s=Math.ceil(e._numItems/e._colLineNum);t=e._topGap+e._itemSize.height*s+e._lineGap*(s-1)+e._bottomGap;break;case cc.Layout.AxisDirection.VERTICAL:var o=Math.ceil(e._numItems/e._colLineNum);t=e._leftGap+e._itemSize.width*o+e._columnGap*(o-1)+e._rightGap}}var r=e.content.getComponent(cc.Layout);if(r&&(r.enabled=!1),e._allItemSize=t,e._allItemSizeNoEdge=e._allItemSize-(e._sizeType?e._topGap+e._bottomGap:e._leftGap+e._rightGap),e.cyclic){var a=e._sizeType?e.node.height:e.node.width;e._cyclicPos1=0,a-=e._cyclicPos1,e._cyclicNum=Math.ceil(a/e._allItemSizeNoEdge)+1;var c=e._sizeType?e._lineGap:e._columnGap;e._cyclicPos2=e._cyclicPos1+e._allItemSizeNoEdge+c,e._cyclicAllItemSize=e._allItemSize+e._allItemSizeNoEdge*(e._cyclicNum-1)+c*(e._cyclicNum-1),e._cycilcAllItemSizeNoEdge=e._allItemSizeNoEdge*e._cyclicNum,e._cycilcAllItemSizeNoEdge+=c*(e._cyclicNum-1)}e._lack=!e.cyclic&&e._allItemSize<(e._sizeType?e.node.height:e.node.width);var h=e._lack&&e.lackCenter||!e.lackSlide?.1:0,l=e._lack?(e._sizeType?e.node.height:e.node.width)-h:e.cyclic?e._cyclicAllItemSize:e._allItemSize;l<0&&(l=0),e._sizeType?e.content.height=l:e.content.width=l},_onScrolling:function(t){if(null==this.frameCount&&(this.frameCount=this._updateRate),!this._forceUpdate&&t&&"scroll-ended"!=t.type&&this.frameCount>0)this.frameCount--;else if(this.frameCount=this._updateRate,!this._aniDelRuning){if(this.cyclic){var e=this.content.getPosition();e=this._sizeType?e.y:e.x;var i=this._allItemSizeNoEdge+(this._sizeType?this._lineGap:this._columnGap),n=this._sizeType?cc.v2(0,i):cc.v2(i,0);switch(this._alignCalcType){case 1:e>-this._cyclicPos1?(this.content.x=-this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(n))):e<-this._cyclicPos2&&(this.content.x=-this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(n)));break;case 2:e<this._cyclicPos1?(this.content.x=this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(n))):e>this._cyclicPos2&&(this.content.x=this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(n)));break;case 3:e<this._cyclicPos1?(this.content.y=this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(n))):e>this._cyclicPos2&&(this.content.y=this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(n)));break;case 4:e>-this._cyclicPos1?(this.content.y=-this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(n))):e<-this._cyclicPos2&&(this.content.y=-this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(n)))}}var s,o,r,a;if(this._calcViewPos(),this._sizeType?(s=this.viewTop,r=this.viewBottom):(o=this.viewRight,a=this.viewLeft),this._virtual){var c;this.displayData=[];var h=0,l=this._numItems-1;if(this._customSize)for(var u=!1;h<=l&&!u;h++)switch(c=this._calcItemPos(h),this._align){case cc.Layout.Type.HORIZONTAL:c.right>=a&&c.left<=o?this.displayData.push(c):0!=h&&this.displayData.length>0&&(u=!0);break;case cc.Layout.Type.VERTICAL:c.bottom<=s&&c.top>=r?this.displayData.push(c):0!=h&&this.displayData.length>0&&(u=!0);break;case cc.Layout.Type.GRID:switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:c.bottom<=s&&c.top>=r?this.displayData.push(c):0!=h&&this.displayData.length>0&&(u=!0);break;case cc.Layout.AxisDirection.VERTICAL:c.right>=a&&c.left<=o?this.displayData.push(c):0!=h&&this.displayData.length>0&&(u=!0)}}else{var d=this._itemSize.width+this._columnGap,f=this._itemSize.height+this._lineGap;switch(this._alignCalcType){case 1:h=(a+this._leftGap)/d,l=(o+this._rightGap)/d;break;case 2:h=(-o-this._rightGap)/d,l=(-a-this._leftGap)/d;break;case 3:h=(-s-this._topGap)/f,l=(-r-this._bottomGap)/f;break;case 4:h=(r+this._bottomGap)/f,l=(s+this._topGap)/f}for(h=Math.floor(h)*this._colLineNum,l=Math.ceil(l)*this._colLineNum,l--,h<0&&(h=0),l>=this._numItems&&(l=this._numItems-1);h<=l;h++)this.displayData.push(this._calcItemPos(h))}if(this._delRedundantItem(),this.displayData.length<=0||!this._numItems)return void(this._lastDisplayData=[]);this.firstListId=this.displayData[0].id,this.displayItemNum=this.displayData.length;var p=this._lastDisplayData.length,m=this.displayItemNum!=p;if(m&&(this.frameByFrameRenderNum>0&&this._lastDisplayData.sort(function(t,e){return t-e}),m=this.firstListId!=this._lastDisplayData[0]||this.displayData[this.displayItemNum-1].id!=this._lastDisplayData[p-1]),this._forceUpdate||m)if(this.frameByFrameRenderNum>0)this._numItems>0?(this._updateDone?this._updateCounter=0:this._doneAfterUpdate=!0,this._updateDone=!1):(this._updateCounter=0,this._updateDone=!0);else{this._lastDisplayData=[];for(var _=0;_<this.displayItemNum;_++)this._createOrUpdateItem(this.displayData[_]);this._forceUpdate=!1}this._calcNearestItem()}}},_calcViewPos:function(){var t=this.content.getPosition();switch(this._alignCalcType){case 1:this.elasticLeft=t.x>0?t.x:0,this.viewLeft=(t.x<0?-t.x:0)-this.elasticLeft,this.viewRight=this.viewLeft+this.node.width,this.elasticRight=this.viewRight>this.content.width?Math.abs(this.viewRight-this.content.width):0,this.viewRight+=this.elasticRight;break;case 2:this.elasticRight=t.x<0?-t.x:0,this.viewRight=(t.x>0?-t.x:0)+this.elasticRight,this.viewLeft=this.viewRight-this.node.width,this.elasticLeft=this.viewLeft<-this.content.width?Math.abs(this.viewLeft+this.content.width):0,this.viewLeft-=this.elasticLeft;break;case 3:this.elasticTop=t.y<0?Math.abs(t.y):0,this.viewTop=(t.y>0?-t.y:0)+this.elasticTop,this.viewBottom=this.viewTop-this.node.height,this.elasticBottom=this.viewBottom<-this.content.height?Math.abs(this.viewBottom+this.content.height):0,this.viewBottom+=this.elasticBottom;break;case 4:this.elasticBottom=t.y>0?Math.abs(t.y):0,this.viewBottom=(t.y<0?-t.y:0)-this.elasticBottom,this.viewTop=this.viewBottom+this.node.height,this.elasticTop=this.viewTop>this.content.height?Math.abs(this.viewTop-this.content.height):0,this.viewTop-=this.elasticTop}},_calcItemPos:function(t){var e,i,n,s,o,r,a,c;switch(this._align){case cc.Layout.Type.HORIZONTAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:if(this._customSize){var h=this._getFixedSize(t);o=this._leftGap+(this._itemSize.width+this._columnGap)*(t-h.count)+(h.val+this._columnGap*h.count);var l=this._customSize[t];e=l>0?l:this._itemSize.width}else o=this._leftGap+(this._itemSize.width+this._columnGap)*t,e=this._itemSize.width;if(r=o+e,this.lackCenter){var u=this.content.width/2-this._allItemSizeNoEdge/2;o+=u,r+=u}return{id:t,left:o,right:r,x:o+this._itemTmp.anchorX*e,y:this._itemTmp.y};case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:if(this._customSize){var d=this._getFixedSize(t);r=-this._rightGap-(this._itemSize.width+this._columnGap)*(t-d.count)-(d.val+this._columnGap*d.count);var f=this._customSize[t];e=f>0?f:this._itemSize.width}else r=-this._rightGap-(this._itemSize.width+this._columnGap)*t,e=this._itemSize.width;if(o=r-e,this.lackCenter){var p=this.content.width/2-this._allItemSizeNoEdge/2;o-=p,r-=p}return{id:t,right:r,left:o,x:o+this._itemTmp.anchorX*e,y:this._itemTmp.y}}break;case cc.Layout.Type.VERTICAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:if(this._customSize){var m=this._getFixedSize(t);n=-this._topGap-(this._itemSize.height+this._lineGap)*(t-m.count)-(m.val+this._lineGap*m.count);var _=this._customSize[t];s=n-(i=_>0?_:this._itemSize.height)}else n=-this._topGap-(this._itemSize.height+this._lineGap)*t,i=this._itemSize.height;if(s=n-i,this.lackCenter){var g=this.content.height/2-this._allItemSizeNoEdge/2;n-=g,s-=g}return{id:t,top:n,bottom:s,x:this._itemTmp.x,y:s+this._itemTmp.anchorY*i};case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:if(this._customSize){var v=this._getFixedSize(t);s=this._bottomGap+(this._itemSize.height+this._lineGap)*(t-v.count)+(v.val+this._lineGap*v.count);var y=this._customSize[t];i=y>0?y:this._itemSize.height}else s=this._bottomGap+(this._itemSize.height+this._lineGap)*t,i=this._itemSize.height;if(n=s+i,this.lackCenter){var T=this.content.height/2-this._allItemSizeNoEdge/2;n+=T,s+=T}return{id:t,top:n,bottom:s,x:this._itemTmp.x,y:s+this._itemTmp.anchorY*i}}case cc.Layout.Type.GRID:var E=Math.floor(t/this._colLineNum);switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:c=(s=(n=-this._topGap-(this._itemSize.height+this._lineGap)*E)-this._itemSize.height)+this._itemTmp.anchorY*this._itemSize.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:n=(s=this._bottomGap+(this._itemSize.height+this._lineGap)*E)+this._itemSize.height,c=s+this._itemTmp.anchorY*this._itemSize.height}switch(a=this._leftGap+t%this._colLineNum*(this._itemSize.width+this._columnGap),this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:a+=this._itemTmp.anchorX*this._itemSize.width,a-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:a+=(1-this._itemTmp.anchorX)*this._itemSize.width,a-=(1-this.content.anchorX)*this.content.width,a*=-1}return{id:t,top:n,bottom:s,x:a,y:c};case cc.Layout.AxisDirection.VERTICAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:r=(o=this._leftGap+(this._itemSize.width+this._columnGap)*E)+this._itemSize.width,a=o+this._itemTmp.anchorX*this._itemSize.width,a-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:a=(o=(r=-this._rightGap-(this._itemSize.width+this._columnGap)*E)-this._itemSize.width)+this._itemTmp.anchorX*this._itemSize.width,a+=(1-this.content.anchorX)*this.content.width}switch(c=-this._topGap-t%this._colLineNum*(this._itemSize.height+this._lineGap),this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:c-=(1-this._itemTmp.anchorY)*this._itemSize.height,c+=(1-this.content.anchorY)*this.content.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:c-=this._itemTmp.anchorY*this._itemSize.height,c+=this.content.anchorY*this.content.height,c*=-1}return{id:t,left:o,right:r,x:a,y:c}}}},_calcExistItemPos:function(t){var e=this.getItemByListId(t);if(!e)return null;var i={id:t,x:e.x,y:e.y};return this._sizeType?(i.top=e.y+e.height*(1-e.anchorY),i.bottom=e.y-e.height*e.anchorY):(i.left=e.x-e.width*e.anchorX,i.right=e.x+e.width*(1-e.anchorX)),i},getItemPos:function(t){return this._virtual?this._calcItemPos(t):this.frameByFrameRenderNum?this._calcItemPos(t):this._calcExistItemPos(t)},_getFixedSize:function(t){if(!this._customSize)return null;null==t&&(t=this._numItems);var e=0,i=0;for(var n in this._customSize)parseInt(n)<t&&(e+=this._customSize[n],i++);return{val:e,count:i}},_onScrollBegan:function(){this._beganPos=this._sizeType?this.viewTop:this.viewLeft},_onScrollEnded:function(){var t=this;if(null!=t.scrollToListId){var e=t.getItemByListId(t.scrollToListId);t.scrollToListId=null,e&&e.runAction(new cc.sequence(new cc.scaleTo(.1,1.06),new cc.scaleTo(.1,1)))}t._onScrolling(),t._slideMode!=s.ADHERING||t.adhering?t._slideMode==s.PAGE&&(null!=t._beganPos?this._pageAdhere():t.adhere()):t.adhere()},_onTouchStart:function(t,e){if(!this._scrollView._hasNestedViewGroup(t,e)&&!(t.eventPhase===cc.Event.AT_TARGET&&t.target===this.node)){for(var i=t.target;null==i._listId&&i.parent;)i=i.parent;this._scrollItem=null!=i._listId?i:t.target}},_onTouchUp:function(){var t=this;t._scrollPos=null,t._slideMode==s.ADHERING?(t.adhering&&(t._adheringBarrier=!0),t.adhere()):t._slideMode==s.PAGE&&(null!=t._beganPos?t._pageAdhere():t.adhere()),this._scrollItem=null},_onTouchCancelled:function(t,e){var i=this;i._scrollView._hasNestedViewGroup(t,e)||t.simulate||(i._scrollPos=null,i._slideMode==s.ADHERING?(i.adhering&&(i._adheringBarrier=!0),i.adhere()):i._slideMode==s.PAGE&&(null!=i._beganPos?i._pageAdhere():i.adhere()),this._scrollItem=null)},_onSizeChanged:function(){this.checkInited(!1)&&this._onScrolling()},_onItemAdaptive:function(t){if(!this._sizeType&&t.width!=this._itemSize.width||this._sizeType&&t.height!=this._itemSize.height){this._customSize||(this._customSize={});var e=this._sizeType?t.height:t.width;this._customSize[t._listId]!=e&&(this._customSize[t._listId]=e,this._resizeContent(),this.updateAll(),null!=this._scrollToListId&&(this._scrollPos=null,this.unschedule(this._scrollToSo),this.scrollTo(this._scrollToListId,Math.max(0,this._scrollToEndTime-(new Date).getTime()/1e3))))}},_pageAdhere:function(){var t=this;if(t.cyclic||!(t.elasticTop>0||t.elasticRight>0||t.elasticBottom>0||t.elasticLeft>0)){var e=t._sizeType?t.viewTop:t.viewLeft,i=(t._sizeType?t.node.height:t.node.width)*t.pageDistance;if(Math.abs(t._beganPos-e)>i){switch(t._alignCalcType){case 1:case 4:t._beganPos>e?t.prePage(.5):t.nextPage(.5);break;case 2:case 3:t._beganPos<e?t.prePage(.5):t.nextPage(.5)}}else t.elasticTop<=0&&t.elasticRight<=0&&t.elasticBottom<=0&&t.elasticLeft<=0&&t.adhere();t._beganPos=null}},adhere:function(){var t=this;if(t.checkInited()&&!(t.elasticTop>0||t.elasticRight>0||t.elasticBottom>0||t.elasticLeft>0)){t.adhering=!0,t._calcNearestItem();var e=(t._sizeType?t._topGap:t._leftGap)/(t._sizeType?t.node.height:t.node.width);t.scrollTo(t.nearestListId,.7,e)}},update:function(){if(!(this.frameByFrameRenderNum<=0||this._updateDone))if(this._virtual){for(var t=this._updateCounter+this.frameByFrameRenderNum>this.displayItemNum?this.displayItemNum:this._updateCounter+this.frameByFrameRenderNum,e=this._updateCounter;e<t;e++){var i=this.displayData[e];i&&this._createOrUpdateItem(i)}this._updateCounter>=this.displayItemNum-1?this._doneAfterUpdate?(this._updateCounter=0,this._updateDone=!1,this._doneAfterUpdate=!1):(this._updateDone=!0,this._delRedundantItem(),this._forceUpdate=!1,this._calcNearestItem(),this.slideMode==s.PAGE&&(this.curPageNum=this.nearestListId)):this._updateCounter+=this.frameByFrameRenderNum}else if(this._updateCounter<this._numItems){for(var n=this._updateCounter+this.frameByFrameRenderNum>this._numItems?this._numItems:this._updateCounter+this.frameByFrameRenderNum,o=this._updateCounter;o<n;o++)this._createOrUpdateItem2(o);this._updateCounter+=this.frameByFrameRenderNum}else this._updateDone=!0,this._calcNearestItem(),this.slideMode==s.PAGE&&(this.curPageNum=this.nearestListId)},_createOrUpdateItem:function(t){var e=this.getItemByListId(t.id);if(e)this._forceUpdate&&this.renderEvent&&(e.setPosition(new cc.v2(t.x,t.y)),this._resetItemSize(e),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],e,t.id%this._actualNumItems));else{var i=this._pool.size()>0;if((e=i?this._pool.get():cc.instantiate(this._itemTmp))._listId!=t.id&&(e._listId=t.id,e.setContentSize(this._itemSize)),e.setPosition(new cc.v2(t.x,t.y)),this._resetItemSize(e),this.content.addChild(e),i&&this._needUpdateWidget){var n=e.getComponent(cc.Widget);n&&n.updateAlignment()}e.setSiblingIndex(this.content.childrenCount-1);var s=e.getComponent(r);e.listItem=s,s&&(s._list=this,s._registerEvent()),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],e,t.id%this._actualNumItems)}this._resetItemSize(e),this._updateListItem(e.listItem),this._lastDisplayData.indexOf(t.id)<0&&this._lastDisplayData.push(t.id)},_createOrUpdateItem2:function(t){var e=this.content.children[t];if(e)this._forceUpdate&&this.renderEvent&&(e._listId=t,this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],e,t%this._actualNumItems));else{(e=cc.instantiate(this._itemTmp))._listId=t,this.content.addChild(e);var i=e.getComponent(r);e.listItem=i,i&&(i._list=this,i._registerEvent()),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],e,t%this._actualNumItems)}this._updateListItem(e.listItem),this._lastDisplayData.indexOf(t)<0&&this._lastDisplayData.push(t)},_updateListItem:function(t){if(t&&this.selectedMode>o.NONE)switch(this.selectedMode){case o.SINGLE:t.selected=this.selectedId==t.node._listId;break;case o.MULT:t.selected=this.multSelected.indexOf(t.node._listId)>=0}},_resetItemSize:function(t){},_updateItemPos:function(t){var e=isNaN(t)?t:this.getItemByListId(t),i=this.getItemPos(e._listId);e.setPosition(i.x,i.y)},setMultSelected:function(t,e){var i=this;if(i.checkInited()){var n,s;if(Array.isArray(t)||(t=[t]),null==e)i.multSelected=t;else if(e)for(var o=t.length-1;o>=0;o--)n=t[o],(s=i.multSelected.indexOf(n))<0&&i.multSelected.push(n);else for(var r=t.length-1;r>=0;r--)n=t[r],(s=i.multSelected.indexOf(n))>=0&&i.multSelected.splice(s,1);i._forceUpdate=!0,i._onScrolling()}},updateItem:function(t){if(this.checkInited()){Array.isArray(t)||(t=[t]);for(var e=0,i=t.length;e<i;e++){var n=t[e],s=this.getItemByListId(n);s&&cc.Component.EventHandler.emitEvents([this.renderEvent],s,n%this._actualNumItems)}}},updateAll:function(){this.checkInited()&&(this.numItems=this.numItems)},getItemByListId:function(t){if(this.content)for(var e=this.content.childrenCount-1;e>=0;e--)if(this.content.children[e]._listId==t)return this.content.children[e]},_getOutsideItem:function(){for(var t,e=[],i=this.content.childrenCount-1;i>=0;i--)t=this.content.children[i],this.displayData.find(function(e){return e.id==t._listId})||e.push(t);return e},_delRedundantItem:function(){if(this._virtual)for(var t=this._getOutsideItem(),e=t.length-1;e>=0;e--){var i=t[e];if(!this._scrollItem||i._listId!=this._scrollItem._listId){i.isCached=!0,this._pool.put(i);for(var n=this._lastDisplayData.length-1;n>=0;n--)if(this._lastDisplayData[n]==i._listId){this._lastDisplayData.splice(n,1);break}}}else for(;this.content.childrenCount>this._numItems;)this._delSingleItem(this.content.children[this.content.childrenCount-1])},_delSingleItem:function(t){t.removeFromParent(),t.destroy&&t.destroy(),t=null},aniDelItem:function(t,e,i){var n=this;if(!n.checkInited()||n.cyclic||!n._virtual)return cc.error("This function is not allowed to be called!");if(n._aniDelRuning)return cc.warn("Please wait for the current deletion to finish!");var s=n.getItemByListId(t);if(s){n._aniDelRuning=!0,n._aniDelCB=e,n._aniDelItem=s,n._aniDelBeforePos=s.position,n._aniDelBeforeScale=s.scale;var r=n.displayData[n.displayData.length-1].id,a=s.listItem.selected;s.listItem.showAni(i,function(){var i;if(r<n._numItems-2&&(i=r+1),null!=i){var c=n._calcItemPos(i);n.displayData.push(c),n._virtual?n._createOrUpdateItem(c):n._createOrUpdateItem2(i)}else n._numItems--;if(n.selectedMode==o.SINGLE)a?n._selectedId=-1:n._selectedId-1>=0&&n._selectedId--;else if(n.selectedMode==o.MULT&&n.multSelected.length){var h=n.multSelected.indexOf(t);h>=0&&n.multSelected.splice(h,1);for(var l=n.multSelected.length-1;l>=0;l--){n.multSelected[l]>=t&&n.multSelected[l]--}}if(n._customSize){n._customSize[t]&&delete n._customSize[t];var u,d={};for(var f in n._customSize)u=n._customSize[f],d[(f=parseInt(f))-(f>=t?1:0)]=u;n._customSize=d}for(var p,m,_=null!=i?i:r;_>=t+1;_--)if(s=n.getItemByListId(_)){var g=n._calcItemPos(_-1);p=[new cc.moveTo(.2333,new cc.v2(g.x,g.y))],_<=t+1&&(m=!0,p.push(new cc.CallFunc(function(){n._aniDelRuning=!1,e(t),delete n._aniDelCB}))),p.length>1?s.runAction(new cc.Sequence(p)):s.runAction(p[0])}m||(n._aniDelRuning=!1,e(t),delete n._aniDelCB)},!0)}else e(t)},scrollTo:function(t,e,i,n){var s=this;if(s.checkInited()){null==e?e=.5:e<0&&(e=0),t<0?t=0:t>=s._numItems&&(t=s._numItems-1),!s._virtual&&s._layout&&s._layout.enabled&&s._layout.updateLayout();var o,r,a=s.getItemPos(t);switch(s._alignCalcType){case 1:o=a.left,o-=null!=i?s.node.width*i:s._leftGap,a=new cc.v2(o,0);break;case 2:o=a.right-s.node.width,o+=null!=i?s.node.width*i:s._rightGap,a=new cc.v2(o+s.content.width,0);break;case 3:r=a.top,r+=null!=i?s.node.height*i:s._topGap,a=new cc.v2(0,-r);break;case 4:r=a.bottom+s.node.height,r-=null!=i?s.node.height*i:s._bottomGap,a=new cc.v2(0,-r+s.content.height)}var c=s.content.getPosition();c=Math.abs(s._sizeType?c.y:c.x);var h=s._sizeType?a.y:a.x;Math.abs((null!=s._scrollPos?s._scrollPos:c)-h)>.5&&(s._scrollPos=h,s._scrollToListId=t,s._scrollToEndTime=(new Date).getTime()/1e3+e,s._scrollView.scrollToOffset(a,e),s._scrollToSo=s.scheduleOnce(function(){if(s._adheringBarrier||(s.adhering=s._adheringBarrier=!1),s._scrollPos=s._scrollToListId=s._scrollToEndTime=s._scrollToSo=null,n){var e=s.getItemByListId(t);e&&e.runAction(new cc.sequence(new cc.scaleTo(.1,1.05),new cc.scaleTo(.1,1)))}},e+.1),e<=0&&s._onScrolling())}},_calcNearestItem:function(){var t,e,i,n,s,o,r=this;r.nearestListId=null,r._virtual&&r._calcViewPos(),i=r.viewTop,n=r.viewRight,s=r.viewBottom,o=r.viewLeft;for(var a=!1,c=0;c<r.content.childrenCount&&!a;c+=r._colLineNum)if(t=this._virtual?this.displayData[c]:this._calcExistItemPos(c))switch(e=this._sizeType?(t.top+t.bottom)/2:e=(t.left+t.right)/2,this._alignCalcType){case 1:t.right>=o&&(this.nearestListId=t.id,o>e&&(this.nearestListId+=this._colLineNum),a=!0);break;case 2:t.left<=n&&(this.nearestListId=t.id,n<e&&(this.nearestListId+=this._colLineNum),a=!0);break;case 3:t.bottom<=i&&(this.nearestListId=t.id,i<e&&(this.nearestListId+=this._colLineNum),a=!0);break;case 4:t.top>=s&&(this.nearestListId=t.id,s>e&&(this.nearestListId+=this._colLineNum),a=!0)}if((t=this._virtual?this.displayData[this.displayItemNum-1]:this._calcExistItemPos(this._numItems-1))&&t.id==r._numItems-1)switch(e=r._sizeType?(t.top+t.bottom)/2:e=(t.left+t.right)/2,r._alignCalcType){case 1:n>e&&(r.nearestListId=t.id);break;case 2:o<e&&(r.nearestListId=t.id);break;case 3:s<e&&(r.nearestListId=t.id);break;case 4:i>e&&(r.nearestListId=t.id)}},prePage:function(t){this.checkInited()&&(null==t&&(t=.5),this.skipPage(this.curPageNum-1,t))},nextPage:function(t){this.checkInited()&&(null==t&&(t=.5),this.skipPage(this.curPageNum+1,t))},skipPage:function(t,e){var i=this;if(i.checkInited())return i._slideMode!=s.PAGE?cc.error("This function is not allowed to be called, Must SlideMode = PAGE!"):void(t<0||t>=i._numItems||i.curPageNum!=t&&(i.curPageNum=t,i.pageChangeEvent&&cc.Component.EventHandler.emitEvents([i.pageChangeEvent],t),i.scrollTo(t,e)))},calcCustomSize:function(t){var e=this;if(e.checkInited()){if(!e._itemTmp)return cc.error("Unset template item!");if(!e.renderEvent)return cc.error("Unset Render-Event!");e._customSize={};var i=cc.instantiate(e._itemTmp);e.content.addChild(i);for(var n=0;n<t;n++)cc.Component.EventHandler.emitEvents([e.renderEvent],i,n),i.height==e._itemSize.height&&i.width==e._itemSize.width||(e._customSize[n]=e._sizeType?i.height:i.width);return Object.keys(e._customSize).length||(e._customSize=null),i.removeFromParent(),i.destroy&&i.destroy(),e._customSize}}}),cc._RF.pop()},{ListItem:"ListItem"}],MapManager:[function(t,e,i){"use strict";cc._RF.push(e,"81d29KyUetK0q28MjtgYaKK","MapManager");var n=cc.Enum({Way:-1,Obstacle:-1,Crack:-1,WHITE:-1,GREEN:-1,RED:-1,BLUE:-1}),s=cc.Enum({WHITE:-1,GREEN:-1,RED:-1,BLUE:-1}),o=cc.Enum({WHITE:-1,GREEN:-1,RED:-1,BLUE:-1}),r={Way:0,Obstacle:-99,Crack:-1,WHITE:0,GREEN:-1,RED:-2,BLUE:-3};function a(t,e){var i=e-t,n=Math.random();return t+Math.round(n*i)}var c=function(t,e,i){this.type=i,this.TYPE=1==i?n:o;var s=Object.keys(this.TYPE).length;this.TYPE_NUM=1==i?s-4:s,this.row=e,this.col=t;for(var r=[],c=0,h=0;h<e;h++){r[h]||(r[h]=[]);for(var l=0;l<t;l++)c=l===t-1||2==i&&l>=t-6?0:a(0,this.TYPE_NUM-1),r[h][l]=c}this.mapT=r},h=c.prototype;h.unshift=function(t){t=void 0==t?1:t;for(var e=0;e<this.mapT.length;e++){var i=t?a(0,this.TYPE_NUM-1):0;this.mapT[e].unshift(i)}this.col+=1},h.push=function(t){for(var e=0;e<this.mapT.length;e++){var i=null==t?a(0,this.TYPE_NUM-1):t;this.mapT[e].push(i)}this.col+=1},h.pop=function(){for(var t=[],e=0;e<this.mapT.length;e++)t.push(this.mapT[e].pop());return this.col-=1,t},h.getTop=function(){for(var t=[],e=0;e<this.mapT.length;e++)t.push(this.mapT[e][this.mapT[e].length-1]);return t},h.shift=function(){for(var t=[],e=0;e<this.mapT.length;e++)t.push(this.mapT[e].shift());return this.col-=1,t},h.opt=function(t,e){var i=r[o[t]]+r[n[e]];return 0===i?[o.WHITE,n.WHITE]:i>0?[t,n.WHITE]:[o.WHITE,e]},h.mult=function(t){if(2!==this.type)return console.warn("\u4ec5\u9650\u4e8e\u8682\u8681\u5206\u5e03\u56fe\u8c03\u7528");for(var e=0;e<this.row-1;e++)for(var i=0;i<this.col-1;i++){var n=this.opt(this.mapT[e][i],t[e][i]);this.mapT[e][i]=n[0],t[e][i]=n[1]}},h.zeroAll=function(t){for(var e=this.mapT.length-1;e>=0;e--)for(var i=this.mapT[e].length-1;i>=0;i--)this.mapT[e][i]=0};var l=function(){return new function(){this.dict={}}}();l.createMap=function(t,e,i){return this.dict[i]=new c(t,e,i),this.dict[i]},l.addNewEnemy=function(){if(!this.dict[2])return!1;this.dict[2].pop(),this.dict[2].unshift()},l.MAP_TYPE=n,l.ANT_TYPE=o,l.POSION_TYPE=s,e.exports=zk.MapManager=l,cc._RF.pop()},{}],Map:[function(t,e,i){"use strict";cc._RF.push(e,"fc370BKpRdEVpfepqYhmt+b","Map"),cc.Class({extends:cc.Component,properties:{tilePrefab:cc.Prefab,top:-34.5,left:36.5,right:36.5,spacingX:71,spacingY:71,newColEvent:{default:null,type:cc.Component.EventHandler,tooltip:!1},tileRenderEvent:{default:null,type:cc.Component.EventHandler,tooltip:!1}},onLoad:function(){zk.Map=this,this.rowNum=0,this.pool=new cc.NodePool,this.dict=[]},newCol:function(t){t=t||1;for(var e=0;e<t;e++)this.mapData.push(0),this.updateMap(),this.newColEvent&&cc.Component.EventHandler.emitEvents([this.newColEvent])},updateMap:function(t){t&&(this.mapData=t);for(var e=0;e<this.mapData.row;e++){this.dict[e]||(this.dict[e]=[]);for(var i=0;i<this.mapData.col;i++){var n=cc.v2(this.left+this.spacingX*i,this.top-this.spacingY*e),s=this.dict[e][i];n.x<=this.lastDeadX?s&&this.delTile(s):(s||(s=this.pool.get()||cc.instantiate(this.tilePrefab),this.dict[e][i]=s),s.setPosition(n),s.row=e,s.col=i,s.parent=this.node,this.tileRenderEvent&&cc.Component.EventHandler.emitEvents([this.tileRenderEvent],s,this.mapData.mapT[e][i]))}}return this.mapData},getRightX:function(){return this.dict[0][this.dict[0].length-1].x+this.right},clearDeadTile:function(t){this.lastDeadX=t;for(var e=this.node.childrenCount-1;e>=0;e--){var i=this.node.children[e];i.x<=t&&this.delTile(i)}},getTilePos:function(t,e,i){var n=this.getTile(t,e);if(n)return i?i.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(n.getPosition())):n.position()},getTile:function(t,e){return this.dict[t]&&this.dict[t][e]},delTile:function(t){delete this.dict[t.row][t.col],this.pool.put(t)},updeteAll:function(){var t=this;this.tileRenderEvent&&this.node.children.forEach(function(e){cc.Component.EventHandler.emitEvents([t.tileRenderEvent],e)})},clear:function(){for(;this.dict.length;)for(var t=this.dict.pop();t.length;){var e=t.pop();cc.isValid(e)&&e.destroy()}}}),cc._RF.pop()},{}],Menu:[function(t,e,i){"use strict";cc._RF.push(e,"5f4040DrdhPorRq96Ny6qUd","Menu");var n=t("MyButton"),s=t("AutoLayout"),o=t("List");cc.Class({editor:{disallowMultiple:!1,executeInEditMode:!0},extends:t("BaseUI"),properties:{blockBtn:cc.Button,btnSelf:cc.Node,btnSwitch:n,btnSwitchCloseSF:cc.SpriteFrame,al:s,list:o,showContent:cc.Node,unselectedString:"- \u8bf7\u9009\u62e9 -",_open:!1,open:{set:function(t){this.switch(t)},get:function(){return this._open}},_selectedId:-1,selectedId:{visible:!1,get:function(){return this._selectedId},set:function(t){this._selectedId=t,this._updateState(),this.selectedEvent&&t>=0&&cc.Component.EventHandler.emitEvents([this.selectedEvent],t,this.data?this.data[t]:null)},min:-1,step:1},selectedEvent:{default:null,type:cc.Component.EventHandler,tooltip:!1},contentCom:{visible:!1,get:function(){return this.al||this.list}}},onLoad:function(){this.btnSwitch&&(this.btnSwitch.node.sp=this.btnSwitch.node.getComponent(cc.Sprite),this.initBtnSwitchSf=this.btnSwitch.node.sp.spriteFrame),this._updateState()},addEvent:function(){},delEvent:function(){},setData:function(t,e){this.data=t,this.selectedId=null==e?-1:e},onALRender:function(t,e){t.getComponentInChildren(cc.Label).string=this.data[e],t.getComponentInChildren(cc.Sprite).node.active=e!=(this.isReverse?0:this.contentCom.numItems-1)},switch:function(t){1!=t&&0!=t&&(t=null),null==t&&(t=!this._open),this._open=t,this._updateState()},onOtherMenuOpen:function(t){t.uuid!=this.node.uuid&&this.switch(!1)},close:function(t){if(this.open){for(var e=this.contentCom.scrollTo?this.contentCom.content.children:this.contentCom.node.children,i=0;i<e.length;i++){var n=e[i];if(zk.Tools.isInTarget(t,n)){this.selectedId=i;break}}this.open=!1}},_updateState:function(){var t=null!=this.data&&this.data.length>0;if(this.content||(this.content=this.showContent?this.showContent:this.contentCom.node),t||(this._open=!1,this._selectedId=-1),this.btnSelf.getComponentInChildren(cc.Label).string=this.selectedId>=0?this.data[this.selectedId]:this.unselectedString,this.btnSwitch&&this.initBtnSwitchSf&&!t&&(this.btnSwitch.node.sp.spriteFrame=this.initBtnSwitchSf),this.btnSwitch.gray=!t,this.btnSelf.getComponent(cc.Button).enabled=t,this.content.active=!!t&&this.open,this.blockBtn.enabled=!!t&&!this.open,t)if(this._open){if(this.content.active=!0,this.blockBtn.enabled=!0,null!=this.contentCom._alignCalcType)this.isReverse=4==this.contentCom._alignCalcType;else{var e=this.contentCom.node.getComponent(cc.Layout);this.isReverse=e.verticalDirection==cc.Layout.VerticalDirection.BOTTOM_TO_TOP}this.contentCom.numItems=this.data.length,this.isReverse&&this.contentCom.scrollTo&&this.contentCom.scrollTo(this.data.length-1),this.btnSwitch&&this.btnSwitchCloseSF&&(this.btnSwitch.node.sp.spriteFrame=this.btnSwitchCloseSF),zk.OtherModel.send(zk.OtherEvent.ON_MENU_OPEN,this.node)}else this.content.active=!1,this.blockBtn.enabled=!1,this.btnSwitch&&this.initBtnSwitchSf&&(this.btnSwitch.node.sp.spriteFrame=this.initBtnSwitchSf)},bgEv:function(){this.open=!1},itemEv:function(t){var e=t.currentTarget.parent,i=null!=e._listId?e._listId:e.getSiblingIndex();this.selectedId=i,this.open=!1}}),cc._RF.pop()},{AutoLayout:"AutoLayout",BaseUI:"BaseUI",List:"List",MyButton:"MyButton"}],MyButton:[function(t,e,i){"use strict";cc._RF.push(e,"9cc54HEeIZNj6cCXKdjHgWH","MyButton");var n=t("Tools"),s=cc.Enum({YELLOW:1,ORANGE:2,BLUE:3}),o=cc.Enum({0:"535353",1:"4A2400",2:"000000",3:"ffffff"});cc.Class({editor:{executeInEditMode:!0,menu:"\u81ea\u5b9a\u4e49\u7ec4\u4ef6/My Button"},extends:cc.Button,properties:{normalFrameList:[cc.SpriteFrame],graySpriteFrame:cc.SpriteFrame,btnType:{default:s.YELLOW,type:s,notify:function(){var t=this.normalFrameList[this.btnType-1];t&&(!this.gray&&this._sprite&&(this._sprite.spriteFrame=t),this.initSpriteFrame=t),this._setLabelColor()}},_gray:!1,gray:{get:function(){return this._gray},set:function(t){var e=this;t!=e._gray&&e._sprite&&(e._gray=t,e.graySpriteFrame?(e.initSpriteFrame||(e.initSpriteFrame=e._sprite.spriteFrame),e._sprite.spriteFrame=t?e.graySpriteFrame:e.initSpriteFrame):n.setGray(e._sprite,t),e._setLabelColor())}},_btnLabel:null,btnLabel:{visible:!1,get:function(){return this._btnLabel||(this._btnLabel=this.node.getComponentInChildren(cc.Label)),this._btnLabel}},_cdh:null,cdh:{visible:!1,get:function(){return this._cdh||(this._cdh=this.node.getComponentInChildren("CDHelper")),this._cdh}},effType:{default:-1,min:-1,step:1}},onLoad:function(){this.effType>-1&&this.playEff(this.effType)},_setLabelColor:function(){if(this.btnLabel){if(this.btnLabel.font)return;if(this.gray)this.btnLabel.node.color=cc.color(o[0]);else{var t=o[this.btnType];t&&(this.btnLabel.node.color=cc.color(t))}}},_updateDisabledState:function(){var t=this;t._super(),t.graySpriteFrame?t._gray?t._sprite.spriteFrame=t.graySpriteFrame:t.initSpriteFrame&&(t._sprite.spriteFrame=t.initSpriteFrame):n.setGray(t._sprite,t._gray)},setLabelStr:function(t,e){if(t.length<3&&(t=zk.Tools.strSpace(t)),!this.btnLabel)return cc.warn("The button none label. ->",this.node.name);this.btnLabel.string=t,e&&(this.btnLabel.node.color=e)},playEff:function(t,e,i){var n,s,o,r,a,c,h=this;switch(e&&zk.ui.showErrMessage(e,i),h.cancelEff(),t){case 0:r=20,o=.06,h._effSavePos=h.node.getPosition(),h._effAction=cc.sequence([cc.scaleTo(o/2,1.1),cc.spawn(cc.sequence([cc.moveBy(o/2,cc.v2(-r/2,0)),cc.moveBy(o,cc.v2(r,0)),cc.moveBy(o,cc.v2(-r,0)),cc.moveBy(o,cc.v2(r,0)),cc.moveBy(o/2,cc.v2(-r/2,0))]),cc.sequence([cc.tintTo(2*o,255,200,200),cc.tintTo(2*o,255,255,255)])),cc.scaleTo(o/2,1)]);break;case 1:s=1.3,o=.8,h._effTarget=cc.instantiate(h.node),(a=h._effTarget.getComponent(cc.Button))&&h._effTarget.removeComponent(a),h.node.addChild(h._effTarget),h._effTarget.setPosition(0,0),h._effTarget.setSiblingIndex(h.node.childrenCount-1),h._effAction=cc.sequence([cc.spawn(cc.scaleTo(0,1),cc.fadeTo(0,100)),cc.spawn(cc.scaleTo(o,s),cc.fadeTo(o,0))]),n=0;break;case 2:c=8,o=.73,h._effAction=cc.sequence([cc.rotateTo(o/5,c),cc.rotateTo(o/5,.8*-c),cc.rotateTo(o/5,.65*c),cc.rotateTo(o/5,.5*-c),cc.rotateTo(o/5,0)])}null!=n&&n>1?h._effAction=cc.repeat(h._effAction,n):n<=0&&(h._effAction=cc.repeatForever(h._effAction)),(h._effTarget||h.node).runAction(h._effAction)},cancelEff:function(){var t=this;t._effAction&&(t._effTarget||t.node)&&(t._effTarget||t.node).stopAllActions(),t._effAction=null,t.node.setScale(1),t.node.angle=0,t.node.opcity=1,t._effSavePos&&t.node.setPosition(t._effSavePos),t._effSavePos=null,t._effTarget&&(t._effTarget.destroy&&t._effTarget.destroy(),t._effTarget=null)}}),cc._RF.pop()},{Tools:"Tools"}],MyLabel:[function(t,e,i){"use strict";cc._RF.push(e,"18009zSl99CAJZIf1O+dtfJ","MyLabel");var n=t("Tools");cc.Class({editor:{executeInEditMode:!0,menu:"MyLabel"},extends:cc.Label,properties:{placeholder:{tooltip:!1,default:"{0}",notify:function(){this.string=this.placeholder},multiline:!0},customRG:{tooltip:!1,default:!1},redColor:{default:cc.color(255,0,0),visible:function(){return this.customRG}},greenColor:{default:cc.color(0,255,0),visible:function(){return this.customRG}}},format:function(){1==arguments.length?this.string=n.format(this.placeholder||"{0}",arguments[0]):this.string=n.format(this.placeholder||"{0}",arguments)},setRG:function(t,e){this.customRG?this.node.color=t?this.greenColor:this.redColor:this.node.color=e?cc.color(t?zk.DARK_HEX.GREEN:zk.DARK_HEX.RED):cc.color(t?zk.LIGHT_HEX.GREEN:zk.LIGHT_HEX.RED)}}),cc._RF.pop()},{Tools:"Tools"}],MyRichText:[function(t,e,i){"use strict";cc._RF.push(e,"96980iFT4JABYbcNl9+b7vG","MyRichText");var n=t("HtmlTextParser"),s=t("Tools");cc.Class({editor:{disallowMultiple:!0,menu:"My RichText"},extends:cc.RichText,properties:{spcNodeList:[],fixImgSize:!1,_fontFamily:{default:"Simhei",override:!0},spriteWidth:{default:25,visible:function(){return this.fixImgSize}},spriteHeight:{default:25,visible:function(){return this.fixImgSize}},placeholder:{tooltip:!1,default:"{0}",notify:function(){0},multiline:!0},maxLength:{default:0,tooltip:!1},wordsOneLine:{default:9,tooltip:!1,visible:function(){return this.maxLength>0}},ellipsis:{default:"...",tooltip:!1,visible:function(){return this.maxLength>0}}},format:function(){1==arguments.length?this.string=s.format(this.placeholder||"{0}",arguments[0]):this.string=s.format(this.placeholder||"{0}",arguments)},_addRichTextImageElement:function(t){var e=t.style.src,i=e.split("|"),n=null,s=!1,o=!1,r=this.fixImgSize?this.spriteWidth:0,a=this.fixImgSize?this.spriteHeight:0;if(1==i.length?(n=this.imageAtlas.getSpriteFrame(e),/^[0-9]+.?[0-9]*$/.test(e)&&(s=!0)):i.length>1&&(o=!0),n||o){var c,h;if(h=(c=new cc.PrivateNode("RICHTEXT_Image_CHILD")).addComponent(cc.Sprite),c.setAnchorPoint(0,0),o)"goods"==i[0]&&(this.fixImgSize||(r=30,a=30),h.type=cc.Sprite.Type.SIMPLE,h.sizeMode=cc.Sprite.SizeMode.CUSTOM);else if(h.type=cc.Sprite.Type.SLICED,h.sizeMode=cc.Sprite.SizeMode.CUSTOM,h.spriteFrame=n,!this.fixImgSize){var l=n.getRect();r=s?30:l.width,a=s?30:l.height}this.node.addChild(c),this._labelSegments.push(c),this.maxWidth>0?(this._lineOffsetX+r>this.maxWidth&&this._updateLineInfo(),this._lineOffsetX+=r):(this._lineOffsetX+=r,this._lineOffsetX>this._labelWidth&&(this._labelWidth=this._lineOffsetX)),c.setContentSize(r,a),c._lineCount=this._lineCount,t.style.event?(t.style.event.click&&(c._clickHandler=t.style.event.click),t.style.event.param?c._clickParam=t.style.event.param:c._clickParam=""):c._clickHandler=null}else cc.warnID(4400)},_updateRichText:function(){if(this.enabledInHierarchy){var t=(new n).parse(this.string);if(!this._needsUpdateTextLayout(t))return this._textArray=t,void this._updateLabelSegmentTextAttributes();this._textArray=t,this._resetState();for(var e=0;e<this.spcNodeList.length;++e)this.spcNodeList[e].removeFromParent(!0);this.spcNodeList=[];for(var i,s=!1,o=0,r=0;r<this._textArray.length&&!(this.maxLength>0&&o>=this.maxLength);++r){var a=this._textArray[r],c=a.text;if(""===c){if(a.style&&a.style.newline){o+=this.wordsOneLine,this._updateLineInfo();continue}if(a.style&&a.style.isImage){if(o+=1,!(this.maxLength>0&&o>this.maxLength&&this.ellipsis)){this._addRichTextImageElement(a);continue}c=this.ellipsis}}if(this.maxLength){var h=c.length;(o+=h)>this.maxLength&&(c=c.substr(0,h-o+this.maxLength),this.ellipsis&&(c+=this.ellipsis))}for(var l=c.split("\n"),u=a.style,d=u&&u.size?u.size:this.fontSize,f=0;f<l.length;++f){var p=l[f];if(""!==p)if(s=!1,this.maxWidth>0){var m=this._measureText(p,d);this._updateRichTextWithMaxWidth(p,m,r,d),l.length>1&&f<l.length-1&&this._updateLineInfo()}else i=this._addLabelSegment(p,r).getContentSize(),this._lineOffsetX+=i.width,this._lineOffsetX>this._labelWidth&&(this._labelWidth=this._lineOffsetX),l.length>1&&f<l.length-1&&this._updateLineInfo();else{if(this._isLastComponentCR(c)&&f==l.length-1)continue;this._updateLineInfo(),s=!0}}}s||this._linesWidth.push(this._lineOffsetX),this.maxWidth>0&&(this._labelWidth=this.maxWidth);var _=this._calcHeightInfo();this._labelHeight=_.max,this.node.setContentSize(this._labelWidth,this._labelHeight),this._updateRichTextPosition(_),this._layoutDirty=!1}},_updateRichTextWithMaxWidth:function(t,e,i,n){var s=e;if(this._lineOffsetX>0&&s+this._lineOffsetX>this.maxWidth)for(var o=0;this._lineOffsetX<=this.maxWidth;){var r=this._getFirstWordLen(t,o,t.length),a=t.substr(o,r),c=this._measureText(a,n);if(!(this._lineOffsetX+c<=this.maxWidth)){if(o>0){var h=t.substr(0,o);this._addLabelSegment(h,i),t=t.substr(o,t.length),s=this._measureText(t,n)}this._updateLineInfo();break}this._lineOffsetX+=c,o+=r}if(s>this.maxWidth)for(var l=cc.textUtils.fragmentText(t,s,this.maxWidth,this._measureText("",n)),u=0;u<l.length;++u){var d=l[u],f=this._addLabelSegment(d,i).getContentSize();this._lineOffsetX+=f.width,l.length>1&&u<l.length-1&&this._updateLineInfo()}else this._lineOffsetX+=s,this._addLabelSegment(t,i)},_measureText:function(t,e){var i=function(t){return zk.Tools.getStrLength(t)*e/2};return t?i(t):i},_calcHeightInfo:function(){for(var t=1,e=0,i={},n=0;n<this._labelSegments.length;++n){var s=this._labelSegments[n],o=s._lineCount,r=s.getContentSize().height;o>t?(i[t]=e,e=r,t=o):e=Math.max(e,r)}i[t]=e;for(var a={},c={},h=0,l=this._lineCount;l>=1;l--){a[l]=h;var u=i[l]||this.lineHeight;c[l]=u,h+=u}return{dict:a,max:h,heightDict:c}},_updateRichTextPosition:function(t){for(var e=t.dict,i=t.heightDict,n=0,s=1,o=(this._lineCount,0);o<this._labelSegments.length;++o){var r=this._labelSegments[o],a=r._lineCount;a>s&&(n=0,s=a);var c=0;switch(this.horizontalAlign){case cc.macro.TextAlignment.LEFT:c=-this._labelWidth/2;break;case cc.macro.TextAlignment.CENTER:c=-this._linesWidth[a-1]/2;break;case cc.macro.TextAlignment.RIGHT:c=this._labelWidth/2-this._linesWidth[a-1]}r.x=n+c;var h=r.getContentSize(),l=e[a],u=i[a];r.y=l-t.max/2+(u-h.height)/2,a===s&&(n+=h.width)}},_onTouchEnded:function(t){for(var e=this,i=this.node.getComponents(cc.Component),n=function(n){var s=e._labelSegments[n],o=s._clickHandler;if(o&&e._containsTouchLocation(s,t.touch.getLocation())){var r=o.split("|");o=r[0];var a=r[1];if(!a&&o){var c=o.split(":");o="clickModule",a={module:c[0]};for(var h=1;h<c.length;h++){var l=c[h].split("=");a[l[0]]=l[1]}if(!e._myData||"miner2"!=c[0]&&"escort3"!=c[0]&&"escort4"!=c[0]&&"escort5"!=c[0]||(a.nickname=e._myData.nickname,a.role_id=e._myData.role_id,a.time=e._myData.time),"escort4"==c[0]&&!a.escort_lv)for(var u=EscortLvConfig.asArray(),d=0;d<u.length;d++)if(e.string.indexOf(u[d].name)>=0){a.escort_lv=u[d].lv;break}}var f=e;i.forEach(function(e){e.enabledInHierarchy&&e[o]&&("clickModule"==o?e[o](a,t):e[o](f._myData?f._myData.clickArgs[a]:a,t))}),t.stopPropagation()}},s=0;s<this._labelSegments.length;++s)n(s)},_addLabelSegment:function(t,e){var i;return(i=0===this._labelSegmentsCache.length?this._createFontLabel(t):this._labelSegmentsCache.pop())._styleIndex=e,i._lineCount=this._lineCount,i.active=this.node.active,i.group=this.node.group,i.groupIndex=this.node.groupIndex,i.setAnchorPoint(0,0),this._applyTextAttribute(i,t),this.node.addChild(i),this._labelSegments.push(i),i},handler1:function(t){},handler2:function(t){},getPreSize:function(t){for(var e=(new n).parse(t),i=0,s=0,o=1,r=0,a=function(){s=0,o++},c=this,h=function(t){var e=c.fixImgSize?c.spriteWidth:0;if(!c.fixImgSize){var i=t.style.src,n=i.split("|"),o=null,h=!1,l=!1;1==n.length?(o=c.imageAtlas.getSpriteFrame(i),/^[0-9]+.?[0-9]*$/.test(i)&&(h=!0)):n.length>1&&(l=!0),(o||l)&&(l?"goods"==n[0]&&(e=30):e=h?30:o.getRect().width)}c.maxWidth>0?(s+e>c.maxWidth&&a(),s+=e):(s+=e)>r&&(r=s)},l=0;l<e.length&&!(this.maxLength>0&&i>=this.maxLength);++l){var u=e[l],d=u.style,f=u.text;if(""===f){if(d&&d.newline){i+=this.wordsOneLine,a();continue}if(d&&d.isImage){if(i+=1,!(this.maxLength>0&&i>this.maxLength&&this.ellipsis)){h(u);continue}f=this.ellipsis}}if(this.maxLength){var p=f.length;(i+=p)>this.maxLength&&(f=f.substr(0,p-i+this.maxLength),this.ellipsis&&(f+=this.ellipsis))}for(var m=f.split("\n"),_=d&&d.size?d.size:this.fontSize,g=0;g<m.length;++g){var v=m[g];if(""!==v){if(this.maxWidth>0)for(var y in v){var T=cc.textUtils.isUnicodeCJK(v[y])?1:.5;s+(T*=_)>this.maxWidth&&a(),s+=T}else{var E=zk.Tools.getStrLength(v)*_/2;(s+=E)>r&&(r=s)}m.length>1&&g<m.length-1&&a()}else{if(this._isLastComponentCR(f)&&g==m.length-1)continue;a()}}}return{height:o*this.lineHeight*(1+cc.textUtils.BASELINE_RATIO),width:this.maxWidth?this.maxWidth:r}}}),cc._RF.pop()},{HtmlTextParser:"HtmlTextParser",Tools:"Tools"}],Player:[function(t,e,i){"use strict";cc._RF.push(e,"954bctuhC5EH6N8G8dvulqj","Player"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],ProgressBar:[function(t,e,i){"use strict";cc._RF.push(e,"3146dK0UqhFXKh0fof+IjFI","ProgressBar");var n=t("MyLabel"),s=cc.Enum({cur:1,"cur/max":2,"cur%":3});cc.Class({editor:{disallowMultiple:!0,menu:"\u81ea\u5b9a\u4e49\u7ec4\u4ef6/ProgressBar"},extends:cc.ProgressBar,properties:{level:{default:0,min:0,step:1,serializable:!1,notify:function(){this.updateInfo()}},val:{default:0,min:0,serializable:!1,notify:function(){!this.allowValGreaterThanMax&&this.val>this.maxVal&&(this.val=this.maxVal),this.updateInfo()}},maxVal:{default:1,serializable:!1,notify:function(){!this.allowValGreaterThanMax&&this.val>this.maxVal&&(this.maxVal=this.val),this.updateInfo()}},allowValGreaterThanMax:{default:!1,tooltip:!1},pre:{default:0,serializable:!1,visible:!1},label:n,labelType:{default:s["cur/max"],type:s},numToFixed:{default:0,min:0,step:1,tooltip:!1},labelLv:n},setVal:function(t,e,i,n){var s=this,o=null==s._targetVal?s.val:s._targetVal,r=null==s._targetMax?s.maxVal:s._targetMax,a=null==s._targetLevel?s.level:s._targetLevel,c=t/e;if(c==o/s.maxVal&&t==o&&e==r){if(null==i)return;if(i==a)return}if(null==n&&(n=.8),n<0&&(n=0),n){var h,l=null!=i&&i!=s.level;s._runingAni&&(s.tween.stop(),s._onAniDone()),i>s.level?h=!0:i<s.level&&(h=!1),null==h&&(h=c>s.pre),s._targetVal=t,null!=i&&(s._targetLevel=i),null!=e&&(s._targetMax=e);var u,d,f,p,m,_,g,v;if(l)m=n*(p=(u=h?r-o:o)/(f=u+(d=h?s._targetVal:r-s._targetVal))),_=n*(d/f),v=(g=s._targetMax-r)*p,s.tween=cc.tween(s).to(m,{val:h?r+v:0,maxVal:r+v},{easing:"sineOut"}).call(function(){s&&s.isValid&&(s.val=h?0:r,s.level=s._targetLevel,s.tween=cc.tween(s).to(_,{val:s._targetVal,maxVal:r+g},{easing:"sineOut"}).call(s._onAniDone.bind(s)).start())}).start();else s.tween=cc.tween(s).to(n,{val:s._targetVal,maxVal:s._targetMax||s.maxVal},{easing:"sineOut"}).call(s._onAniDone.bind(s)).start();s._runingAni=!0}else null!=e&&(s.maxVal=e),s.val=t,null!=i&&(s.level=i);s.isMax=t>=e},_onAniDone:function(){this._targetVal&&(this.val=this._targetVal),this._targetMax&&(this.maxVal=this._targetMax),this._targetVal=null,this._targetMax=null,this._targetLevel=null,this.tween=null,this._runingAni=!1},updateInfo:function(){if(this.pre=this.val/this.maxVal,this.label){var t=this.val.toFixed(this.numToFixed),e=this.maxVal.toFixed(this.numToFixed);switch(this.labelType){case s.cur:this.label.string=t;break;case s["cur/max"]:this.label.string=t+"/"+e;break;case s["cur%"]:this.label.string=(this.val/this.maxVal*100).toFixed(this.numToFixed)+"%"}}this.labelLv&&this.labelLv.format([this.level]);var i=(this.pre>1?1:this.pre)*this.totalLength;if(this.barSprite)switch(this.mode){case cc.ProgressBar.Mode.HORIZONTAL:this.barSprite.node.width=i;break;case cc.ProgressBar.Mode.VERTICAL:this.barSprite.node.height=i;break;case cc.ProgressBar.Mode.FILLED:this.barSprite.fillRange=this.pre}}}),cc._RF.pop()},{MyLabel:"MyLabel"}],Relation:[function(t,e,i){"use strict";cc._RF.push(e,"8c56dWdfG9CnIOtiZgW0ii7","Relation");var n=cc.Enum({NONE:0,WIDTH_WIDTH:1,HEIGHT_HEIGHT:2,LEFT_LEFT:3,LEFT_CENTER:4,LEFT_RIGHT:5,RIGHT_RIGHT:6,RIGHT_CENTER:7,RIGHT_LEFT:8,TOP_TOP:9,TOP_CENTER:10,TOP_BOTTOM:11,BOTTOM_BOTTOM:12,BOTTOM_CENTER:13,BOTTOM_TOP:14,HORIZONTAL_CENTER:15,VERTICAL_CENTER:16,LEFTEXT_LEFT:17,LEFTEXT_RIGHT:18,RIGHTEXT_LEFT:19,RIGHTEXT_RIGHT:20,TOPEXT_TOP:21,TOPEXT_BOTTOM:22,BOTTOMEXT_TOP:23,BOTTOMEXT_BOTTOM:24}),s={1:"WW",2:"HH",3:"LL",4:"LC",5:"RR",6:"RR",7:"LC",8:"LL",9:"TT",10:"TC",11:"BB",12:"BB",13:"TC",14:"TT",15:"LC",16:"TC",17:"LLE",18:"LLE",19:"RLE",20:"RLE",21:"TTE",22:"TTE",23:"BBE",24:"BBE"},o={1:"WW",2:"HH",3:"LL",4:"LC",5:"RR",6:"RR",7:"LC",8:"LL",9:"TT",10:"TC",11:"BB",12:"BB",13:"TC",14:"TT",15:"LC",16:"TC",17:"LLE",18:"LLE",19:"RLE",20:"RLE",21:"TTE",22:"TTE",23:"BBE",24:"BBE"};cc.Class({editor:{menu:"\u81ea\u5b9a\u4e49\u7ec4\u4ef6/Relation",executeInEditMode:!0,executionOrder:-5002},extends:cc.Component,properties:{target:{type:cc.Node,default:null,notify:function(){this.target&&this._registerEvent(),this._initTargetInfo()}},relations:{default:[],type:n}},onLoad:function(){this._initNodeInfo(),this._initTargetInfo(),this._registerEvent()},onEnable:function(){this._initTargetInfo(),this._initNodeInfo()},onDisable:function(){},onDestroy:function(){this._unregisterEvent()},_registerEvent:function(){var t=this;t._unregisterEvent(),cc.director.on(cc.Director.EVENT_AFTER_UPDATE,t._onEvAfterUpdate,t),t.node.on(cc.Node.EventType.POSITION_CHANGED,t._initNodeInfo,t),t.node.on(cc.Node.EventType.SIZE_CHANGED,t._initNodeInfo,t),t.target&&(t.target.on(cc.Node.EventType.POSITION_CHANGED,t._onTargetPositionChange,t),t.target.on(cc.Node.EventType.SIZE_CHANGED,t._onTargetSizeChange,t),t.target.on(cc.Node.EventType.ANCHOR_CHANGED,t._onTargetAhchorChange,t))},_unregisterEvent:function(){var t=this;cc.director.off(cc.Director.EVENT_AFTER_UPDATE,t._onEvAfterUpdate,t),t.node.off(cc.Node.EventType.POSITION_CHANGED,t._initNodeInfo,t),t.node.off(cc.Node.EventType.SIZE_CHANGED,t._initNodeInfo,t),t.target&&(t.target.off(cc.Node.EventType.POSITION_CHANGED,t._onTargetPositionChange,t),t.target.off(cc.Node.EventType.SIZE_CHANGED,t._onTargetSizeChange,t),t.target.off(cc.Node.EventType.ANCHOR_CHANGED,t._onTargetAhchorChange,t))},_initNodeInfo:function(){this._myLastPos=this.node.getPosition(),this._myLastSize=this.node.getContentSize()},_initTargetInfo:function(){var t=this;t.target&&(t._targetLastPos=t.target.getPosition(),t._targetLastSize=t.target.getContentSize(),t._targetLastAnchor=t.target.getAnchorPoint())},_updatePositionRR:function(t){this.node.x=this._myLastPos.x+(t.x-this._targetLastPos.x)},_updatePositionLL:function(t){this.node.x=this._myLastPos.x+(t.x-this._targetLastPos.x)},_updatePositionLC:function(t){this.node.x=this._myLastPos.x+(t.x-this._targetLastPos.x)},_updatePositionTT:function(t){this.node.y=this._myLastPos.y+(t.y-this._targetLastPos.y)},_updatePositionBB:function(t){this.node.y=this._myLastPos.y+(t.y-this._targetLastPos.y)},_updatePositionTC:function(t){this.node.y=this._myLastPos.y+(t.y-this._targetLastPos.y)},_updatePositionLLE:function(){var t,e,i;t=this._targetLastPos.x-this._targetLastAnchor.x*this._targetLastSize.width,e=this.target.x-this.target.anchorX*this.target.width,i=this._myLastPos.x+(1-this.node.anchorX)*this._myLastSize.width,this.node.width=this._myLastSize.width-(e-t),this.node.x=i-this.node.width*this.node.anchorX},_updatePositionRLE:function(){var t,e,i;t=this._targetLastPos.x+(1-this._targetLastAnchor.x)*this._targetLastSize.width,e=this.target.x+(1-this.target.anchorX)*this.target.width,i=this._myLastPos.x-this.node.anchorX*this._myLastSize.width,this.node.width=this._myLastSize.width+(e-t),this.node.x=i+this.node.width*(1-this.node.anchorX)},_updatePositionTTE:function(t){var e,i,n;e=this._targetLastPos.y+(1-this._targetLastAnchor.y)*this._targetLastSize.height,i=this.target.y+(1-this.target.anchorY)*this.target.height,n=this._myLastPos.y-this.node.anchorY*this._myLastSize.height,this.node.height=this._myLastSize.height+(i-e),this.node.y=n+this.node.height*this.node.anchorY},_updatePositionBBE:function(){var t,e,i;t=this._targetLastPos.y-this._targetLastAnchor.y*this._targetLastSize.height,e=this.target.y-this.target.anchorY*this.target.height,i=this._myLastPos.y+(1-this.node.anchorY)*this._myLastSize.height,this.node.height=this._myLastSize.height-(e-t),this.node.y=i-this.node.height*(1-this.node.anchorY)},_onTargetPositionChange:function(t,e){var i=this;this.enabled&&this.target&&t&&(e||t.x!=this._targetLastPos.x||t.y!=this._targetLastPos.y)&&(this.relations.forEach(function(e,n){var s="_updatePosition"+o[e];i[s]&&i[s](t)},this),this._targetLastPos=t)},_updateSizeRR:function(){var t,e;t=this._targetLastPos.x+(1-this._targetLastAnchor.x)*this._targetLastSize.width,e=this.target.x+(1-this.target.anchorX)*this.target.width,this.node.x=this._myLastPos.x+(e-t)},_updateSizeLL:function(){var t,e;(this.hasRelation(n.LEFT_LEFT)||this.hasRelation(n.RIGHT_LEFT))&&(t=this._targetLastPos.x-this._targetLastAnchor.x*this._targetLastSize.width,e=this.target.x-this.target.anchorX*this.target.width,this.node.x=this._myLastPos.x+(e-t))},_updateSizeLC:function(){var t,e;t=(this._targetLastPos.x-this._targetLastAnchor.x*this._targetLastSize.width+(this._targetLastPos.x+(1-this._targetLastAnchor.x)*this._targetLastSize.width))/2,e=(this.target.x-this.target.anchorX*this.target.width+(this.target.x+(1-this.target.anchorX)*this.target.width))/2,this.node.x=this._myLastPos.x+(e-t)},_updateSizeTT:function(){var t,e;t=this._targetLastPos.y+(1-this._targetLastAnchor.y)*this._targetLastSize.height,e=this.target.y+(1-this.target.anchorY)*this.target.height,this.node.y=this._myLastPos.y+(e-t)},_updateSizeBB:function(){var t,e;t=this._targetLastPos.y-this._targetLastAnchor.y*this._targetLastSize.height,e=this.target.y-this.target.anchorY*this.target.height,this.node.y=this._myLastPos.y+(e-t)},_updateSizeTC:function(){var t,e;t=(this._targetLastPos.y-this._targetLastAnchor.y*this._targetLastSize.height+(this._targetLastPos.y+(1-this._targetLastAnchor.y)*this._targetLastSize.height))/2,e=(this.target.y-this.target.anchorY*this.target.height+(this.target.y+(1-this.target.anchorY)*this.target.height))/2,this.node.y=this._myLastPos.y+(e-t)},_updateSizeWW:function(t,e){this.node.width=this._myLastSize.width+(e.width-this._targetLastSize.width)},_updateSizeHH:function(t,e){this.node.height=this._myLastSize.height+(e.height-this._targetLastSize.height)},_updateSizeLLE:function(t){var e,i,s,o=t===n.LEFTEXT_LEFT?0:this._targetLastSize.width;e=this._targetLastPos.x-this._targetLastAnchor.x*this._targetLastSize.width+o,i=this.target.x-this.target.anchorX*this.target.width+o,s=this._myLastPos.x+(1-this.node.anchorX)*this._myLastSize.width,this.node.width=this._myLastSize.width-(i-e),this.node.x=s-this.node.width*this.node.anchorX},_updateSizeRLE:function(t){var e,i,s,o=t===n.RIGHTEXT_LEFT?0:this._targetLastSize.width;e=this._targetLastPos.x-this._targetLastAnchor.x*this._targetLastSize.width+o,i=this.target.x-this.target.anchorX*this.target.width+o,s=this._myLastPos.x-this.node.anchorX*this._myLastSize.width,this.node.width=this._myLastSize.width-(e-i),this.node.x=s+this.node.width*(1-this.node.anchorX)},_updateSizeTTE:function(t){var e,i,s,o=t===n.TOPEXT_BOTTOM?0:this._targetLastSize.height;e=this._targetLastPos.y-this._targetLastAnchor.y*this._targetLastSize.height+o,i=this.target.y-this.target.anchorY*this.target.height+o,s=this._myLastPos.y-this.node.anchorY*this._myLastSize.height,this.node.height=this._myLastSize.height+(i-e),this.node.y=s+this.node.height*(1-this.node.anchorY)},_updateSizeBBE:function(t){var e,i,s,o=t===n.BOTTOMEXT_BOTTOM?0:this._targetLastSize.height;e=this._targetLastPos.y-this._targetLastAnchor.y*this._targetLastSize.height+o,i=this.target.y-this.target.anchorY*this.target.height+o,s=this._myLastPos.y+this.node.anchorY*this._myLastSize.height,this.node.height=this._myLastSize.height+(e-i),this.node.y=s-this.node.height*this.node.anchorY},_onTargetSizeChange:function(t,e){var i=this;t||(t=this.target.getContentSize()),this.enabled&&this.target&&t&&(e||t.width!=this._targetLastSize.width||t.height!=this._targetLastSize.height)&&(this.relations.forEach(function(e,n){var o="_updateSize"+s[e];i[o]&&i[o](e,t)},this),this._targetLastSize=t)},_onTargetAhchorChange:function(){this.target&&(this._onTargetSizeChange(this.target.getContentSize(),1),this._targetLastAnchor=this.target.getAnchorPoint())},_onEvAfterUpdate:function(){this.target&&(this._onTargetPositionChange(this.target.getPosition()),this._onTargetSizeChange(this.target.getContentSize()))},hasRelation:function(t){return this.relations.indexOf(t)>=0},addRelation:function(t){this.hasRelation(t)||this.relations.push(t)},delRelation:function(t){var e=this.relations.indexOf(t)>=0;e>=0&&this.relations.splice(e,1)}}),cc._RF.pop()},{}],ScrollWall:[function(t,e,i){"use strict";cc._RF.push(e,"de2810PNk9GCp8qNXiVb6Na","ScrollWall"),cc.Class({extends:cc.Component,properties:{camera:cc.Camera,tmp:cc.Prefab,size:0},start:function(){}}),cc._RF.pop()},{}],Shake:[function(t,e,i){"use strict";cc._RF.push(e,"c7159df/UxCoaDIaaHw0JN5","Shake");var n=cc.Enum({VERTICAL:1,HORIZONTAL:2});cc.Class({editor:{menu:"\u81ea\u5b9a\u4e49\u7ec4\u4ef6/Shake"},extends:cc.Component,properties:{direction:{default:n.VERTICAL,type:n,tooltip:!1},duration:{default:2,type:cc.Float,min:.2,tooltip:!1},distance:{default:20,type:cc.Integer,min:0,tooltip:!1},times:{default:0,type:cc.Integer,min:0,tooltip:!1},afterDel:{default:!1,tooltip:!1,visible:function(){return this.times>0}},delayDel:{default:0,type:cc.Float,min:0,tooltip:!1}},start:function(){var t,e,i=this;switch(i.direction){case n.VERTICAL:i.node.y=i.node.y+i.distance/2,t=new cc.Sequence([new cc.moveBy(i.duration/2,cc.v2(0,-i.distance)).easing(cc.easeInOut(2)),new cc.moveBy(i.duration/2,cc.v2(0,i.distance)).easing(cc.easeInOut(2))]);break;case n.HORIZONTAL:i.node.x=i.node.x-i.distance/2,t=new cc.Sequence([new cc.moveBy(i.duration/2,cc.v2(i.distance,0)).easing(cc.easeInOut(2)),new cc.moveBy(i.duration/2,cc.v2(-i.distance,0)).easing(cc.easeInOut(2))])}i.times>0?(e=cc.repeat(t,i.times),i.node.runAction(new cc.Sequence([e,new cc.callFunc(function(){i.afterDel&&(i.node.removeFromParent(),i.node.destroy())})]))):(e=cc.repeatForever(t),i.node.runAction(e)),i.delayDel>0&&i.scheduleOnce(function(){i.node.removeFromParent(),i.node.destroy()},i.delayDel)},onDestroy:function(){this.node&&this.node.stopAllActions(),this.unscheduleAllCallbacks()}}),cc._RF.pop()},{}],Tab:[function(t,e,i){"use strict";cc._RF.push(e,"ecd65WbldBL+705MV8RKyAz","Tab");var n=t("List");cc.Class({extends:cc.Component,editor:{disallowMultiple:!1,menu:"\u81ea\u5b9a\u4e49\u7ec4\u4ef6/Tab"},properties:{list:n,lrScale:-1,leftLightSF:{type:cc.SpriteFrame,default:null},middleLightSF:{type:cc.SpriteFrame,default:null},leftDarkSF:{type:cc.SpriteFrame,default:null},middleDarkSF:{type:cc.SpriteFrame,default:null},switchTextColor:!1,textSelectedColor:{default:cc.color(0,0,0),tooltip:!1,visible:function(){return this.switchTextColor}},controlledNodes:[cc.Node],renderEvent:{default:null,type:cc.Component.EventHandler,tooltip:!1},changeEvent:{default:null,type:cc.Component.EventHandler},checkUnlock:{default:null,type:cc.Component.EventHandler},_selectedId:-1,selectedId:{visible:!1,get:function(){return this._selectedId},set:function(t){var e=this;t==e._selectedId&&this._inited||(e.lastSelectedId=e._selectedId,e._selectedId=t,e.controlledNodes&&e.controlledNodes.length>0&&(e.lastSelectedId>-1&&(e.controlledNodes[e.lastSelectedId].active=!1),e.controlledNodes[t].active=!0),this.data&&(e.list.numItems=this.data.length,e.list.selectedId=t),e.changeEvent&&cc.Component.EventHandler.emitEvents([e.changeEvent],e._selectedId,e.lastSelectedId))}}},onLoad:function(){this._saveTextNormalColor()},_saveTextNormalColor:function(){if(!this.textNormalColor){var t,e=this.list._itemTmp;e&&(t=e.getComponentInChildren(cc.Label)),t&&(this.textNormalColor=t.node.color)}},init:function(t,e){var i=this;if(i._inited=!0,i._saveTextNormalColor(),i.data=t,i.controlledNodes)for(var n=i.controlledNodes.length-1;n>=0;n--)i.controlledNodes[n]._tab=i,i.controlledNodes[n].active=!1;i.list.numItems=i.data.length,i.selectedId=null!=e?e:0,null!=e&&i.list.scrollTo(e)},onListRender:function(t,e){var i=this;t.bg||zk.Tools.parseNode(t,[["bg",cc.Sprite],["label",cc.Label]]);var n,s=i.data[e],o=1,r=e==i.selectedId;r?(n=i.middleLightSF,e<=0?n=i.leftLightSF:e>=i.list.numItems-1&&(n=i.leftLightSF,o=this.lrScale)):(n=i.middleDarkSF,e<=0?n=i.leftDarkSF:e>=i.list.numItems-1&&(n=i.leftDarkSF,o=this.lrScale)),t.bg.spriteFrame=n,t.bg.node.scaleX=o,t.label&&s.name&&(t.label.string=s.name,i.switchTextColor&&(t.label.node.color=r?i.textSelectedColor:i.textNormalColor)),i.renderEvent&&cc.Component.EventHandler.emitEvents([i.renderEvent],t,e)},onClickItem:function(t){var e=this,i=t.target._listId;if(e.checkUnlock&&cc.isValid(e.checkUnlock.target)&&e.checkUnlock.handler){var n=e.checkUnlock.target,s=e.checkUnlock._componentName||e.checkUnlock.component,o=n.getComponent(s);if(!cc.isValid(o))return;var r=o[e.checkUnlock.handler];if("function"!=typeof r)return;if(!r.call(n,i))return}e.selectedId=i}}),cc._RF.pop()},{List:"List"}],TileHelper:[function(t,e,i){"use strict";cc._RF.push(e,"336b6zSF4RKQKUkKzK1jDcD","TileHelper");var n=cc.Enum({LT:1,RT:2,RB:3,LB:4});cc.Class({editor:{disallowMultiple:!1,menu:"\u81ea\u5b9a\u4e49\u7ec4\u4ef6/Tile Helper",executeInEditMode:!0},extends:cc.Component,properties:{tilePrefab:cc.Prefab,direction:{type:n,default:n.LT},startPos:cc.v2(0,0),lineNum:3,colNum:3,tileWidth:30,tileHeight:30,spacingX:2,spacingY:2,advanceX:0,advanceY:0,angle:0,slant:!1,updateTiles:{default:!1,notify:function(){if(this.updateTiles){if(!this.tilePrefab)return this.updateTiles=!1,cc.error('Not set "tilePrefab".');this._updateTiles(),this.updateTiles=!1}}}},onLoad:function(){var t=this;this._dict={},this.node.children.forEach(function(e){var i=e.name.split("_");e.name="",e._mapX=+i[0],e._mapY=+i[1],e._mapPos=cc.v2(e._mapX,e._mapY),t._dict[e._mapX]||(t._dict[e._mapX]=[]),t._dict[e._mapX][e._mapY]=e}),cc.log(this._dict),window._titleHelper=this},start:function(){},_updateTiles:function(){for(var t=0;t<this.colNum;t++)for(var e=0;e<this.lineNum;e++){var i=t+"_"+e,s=this._dict[t]&&this._dict[t][e];s||(s=cc.instantiate(this.tilePrefab));var o=cc.v2(t*this.tileWidth+t*this.spacingX+this.advanceX*e,e*this.tileHeight+e*this.spacingY+this.advanceY*t);switch(this.direction){case n.LT:o.x*=-1;break;case n.LB:o.x*=-1,o.y*=-1;break;case n.RB:o.y*=-1}if(this.angle){var r=(o.x-this.startPos.x)*Math.cos(this.angle*Math.PI/180)+(o.y-this.startPos.y)*Math.sin(this.angle*Math.PI/180),a=-(o.x-this.startPos.x)*Math.sin(this.angle*Math.PI/180)+(o.y-this.startPos.y)*Math.cos(this.angle*Math.PI/180);o=cc.v2(r,a)}s.setPosition(o),s.setContentSize(this.tileWidth,this.tileHeight),s.parent=this.node,s.zIndex=void 0,s.name=i}for(var c=this.node.children.length-1;c>=0;c--){var h=this.node.children[c],l=void 0;((l=h._mapPos).x>=this.colNum||l.y>=this.lineNum)&&h.removeFromParent()}},getTile:function(t,e){return this._dict[t][e]},getPath:function(t,e,i){var n=[],s={},o=this._estimateH(t,e),r={pos:t,end:e,h:o,g:0,f:o,links:[]};for(n.push(r);;){1;var a=n[0];if(n.splice(0,1),s[a.x+"_"+a.y]=a,a.x==e.x&&a.y==e.y){for(var c=[],h=a;h;)c.push(cc.v2(h.x,h.y)),h=h.parent;return cc.log("\u627e\u5230\u51fa\u53e3",c),c}a.links.length||(a.y+1<map[a.x].length&&a.addLink(a.x,a.y+1,s,map),a.y-1>=0&&a.addLink(a.x,a.y-1,s,map),a.x-1>=0&&a.addLink(a.x-1,a.y,s,map),a.x+1<map.length&&a.addLink(a.x+1,a.y,s,map),SLOPE_FLAG&&(a.x-1>=0&&a.y+1<map[a.x].length&&a.addLink(a.x-1,a.y+1,s,map),a.x+1<map.length&&a.y+1<map[a.x].length&&a.addLink(a.x+1,a.y+1,s,map),a.x-1>=0&&a.y-1>=0&&a.addLink(a.x-1,a.y-1,s,map),a.x+1<map.length&&a.y-1>=0&&a.addLink(a.x+1,a.y-1,s,map)));for(var l=a.links,u=0;u<l.length;u++){var d=l[u];this.openIndexOf(n,d)?d.dataInit(a,e,a):n.push(d)}if(!n.length){cc.log("\u672a\u627e\u5230\u51fa\u53e3");break}this.openSort(n)}},_estimateH:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},_calcG:function(t){for(var e=t,i=0;e;)i+=1,e=e.parent;return i}}),cc._RF.pop()},{}],Tile:[function(t,e,i){"use strict";cc._RF.push(e,"a1d50o85+1PXq8I5HiyPoS9","Tile"),cc.Class({extends:cc.Component,properties:{type:0,sprite:cc.Sprite},start:function(){}}),cc._RF.pop()},{}],Time:[function(t,e,i){"use strict";cc._RF.push(e,"91a0bHaxVBOI7jPtZEnvE5p","Time");var n=function(){var t;return(t=new function(){this.offsetTimeMs=0,this.openServerTime=0,this.mergeServerTime=0}).DATE_TYPE={YMD:"YMD",MD:"MD","y-m-d":"y-m-d","m-d":"m-d"},t.TIME_TYPE={HHMMSS:"HHMMSS",HHMM:"HHMM",MMSS:"MMSS","hh:mm:ss":"hh:mm:ss","hh:mm":"hh:mm","mm:ss":"mm:ss"},t}();n.getOpenServerDays=function(){var t=this.unixtime();return Math.floor((t-this.openServerTime)/86400)+1},n.getTime=function(t){var e=new Date;if(t)for(var i in t){var n=t[i];switch(i){case"y":e.setYear(n);break;case"h":e.setHours(n);break;case"m":e.setMinutes(n);break;case"s":e.setSeconds(n);break;case"ms":e.setMilliseconds(n)}}return e.getTime()+this.offsetTimeMs},n.unixtime=function(t){return Math.round(this.getTime(t)/1e3)},n.formatTime=function(t,e,i){t||(t=this.getTime());var n=new Date(t),s=n.getFullYear(),o=n.getMonth()+1,r=n.getDate(),a=n.getHours(),c=n.getMinutes(),h=n.getSeconds(),l=(n.getMilliseconds(),"");switch(e){case this.DATE_TYPE.YMD:l=s+"\u5e74"+o+"\u6708"+r+"\u65e5 ";break;case this.DATE_TYPE.MD:l=o+"\u6708"+r+"\u65e5 ";break;case this.DATE_TYPE["y-m-d"]:l=s+"-"+o+"-"+r+" ";break;case this.DATE_TYPE["m-d"]:l=o+"-"+r+" "}switch(i){case this.TIME_TYPE.HHMMSS:l+=this.appendZero(a)+"\u65f6"+this.appendZero(c)+"\u5206"+this.appendZero(h)+"\u79d2";break;case this.TIME_TYPE.HHMM:l+=this.appendZero(a)+"\u65f6"+this.appendZero(c)+"\u5206";break;case this.TIME_TYPE.MMSS:l+=this.appendZero(c)+"\u5206"+this.appendZero(h)+"\u79d2";break;case this.TIME_TYPE["hh:mm:ss"]:l+=this.appendZero(a)+":"+this.appendZero(c)+":"+this.appendZero(h);break;case this.TIME_TYPE["hh:mm"]:l+=this.appendZero(a)+":"+this.appendZero(c);break;case this.TIME_TYPE["mm:ss"]:l+=this.appendZero(c)+":"+this.appendZero(h)}return l},n.formatDate=function(t,e,i){t||(t=this.getTime());var n=new Date(t),s=n.getFullYear(),o=n.getMonth()+1,r=n.getDate(),a=n.getHours(),c=n.getMinutes(),h=n.getSeconds(),l=n.getMilliseconds();return e?i?s+"-"+o+"-"+r+" "+this.appendZero(a)+":"+this.appendZero(c)+":"+this.appendZero(h)+"."+l:s+"-"+o+"-"+r+" "+this.appendZero(a)+":"+this.appendZero(c)+":"+this.appendZero(h):s+"-"+o+"-"+r+" "+this.appendZero(a)+":"+this.appendZero(c)},n.formatDate1=function(t,e,i){t||(t=this.getTime());var n=new Date(t),s=(n.getFullYear(),n.getMonth()+1),o=n.getDate(),r=n.getHours(),a=n.getMinutes(),c=n.getSeconds(),h=n.getMilliseconds();return e?i?s+"\u6708"+o+"\u65e5"+this.appendZero(r)+"\u65f6"+this.appendZero(a)+"\u5206"+this.appendZero(c)+"\u79d2."+h:s+"\u6708"+o+"\u65e5"+this.appendZero(r)+"\u65f6"+this.appendZero(a)+"\u5206"+this.appendZero(c)+"\u79d2":s+"\u6708"+o+"\u65e5"+this.appendZero(r)+"\u65f6"+this.appendZero(a)+"\u5206"},n.formatDate11=function(t,e,i){t||(t=this.getTime());var n=new Date(t),s=(n.getFullYear(),n.getMonth()+1),o=n.getDate(),r=n.getHours(),a=n.getMinutes(),c=n.getSeconds(),h=n.getMilliseconds();return e?i?s+"\u6708"+o+"\u65e5"+this.appendZero(r)+":"+this.appendZero(a)+":"+this.appendZero(c)+"."+h:s+"\u6708"+o+"\u65e5"+this.appendZero(r)+":"+this.appendZero(a)+":"+this.appendZero(c):s+"\u6708"+o+"\u65e5"+this.appendZero(r)+":"+this.appendZero(a)},n.formatDate2=function(t,e,i,n){t||(t=this.getTime());var s=new Date(t),o=s.getFullYear(),r=s.getMonth()+1,a=s.getDate(),c=s.getHours(),h=s.getMinutes(),l=s.getSeconds(),u=s.getMilliseconds();return e?i?o+"\u5e74"+r+"\u6708"+a+"\u65e5 "+this.appendZero(c)+(n?":":"\u65f6")+this.appendZero(h)+(n?":":"\u5206")+this.appendZero(l)+(n?".":"\u79d2.")+u:o+"\u5e74"+r+"\u6708"+a+"\u65e5 "+this.appendZero(c)+(n?":":"\u65f6")+this.appendZero(h)+(n?":":"\u5206")+this.appendZero(l)+(n?"":"\u79d2"):o+"\u5e74"+r+"\u6708"+a+"\u65e5 "+this.appendZero(c)+(n?":":"\u65f6")+this.appendZero(h)+(n?"":"\u5206")},n.formatDate3=function(t){t||(t=this.getTime());var e=new Date(t),i=e.getHours(),n=e.getMinutes(),s=e.getSeconds();return this.appendZero(i)+":"+this.appendZero(n)+":"+this.appendZero(s)},n.formatDate4=function(t,e,i,n,s){t||(t=this.getTime());var o=new Date(t),r=o.getFullYear(),a=o.getMonth()+1,c=o.getDate(),h=o.getHours(),l=o.getMinutes(),u=o.getSeconds(),d=o.getMilliseconds();return e?i?n?s?r+"\u5e74"+a+"\u6708"+c+"\u65e5 "+this.appendZero(h)+"\u65f6"+this.appendZero(l)+"\u5206"+this.appendZero(u)+"\u79d2."+d:r+"\u5e74"+a+"\u6708"+c+"\u65e5 "+this.appendZero(h)+"\u65f6"+this.appendZero(l)+"\u5206"+this.appendZero(u)+"\u79d2":r+"\u5e74"+a+"\u6708"+c+"\u65e5 "+this.appendZero(h)+"\u65f6"+this.appendZero(l)+"\u5206":r+"\u5e74"+a+"\u6708"+c+"\u65e5 "+this.appendZero(h)+"\u65f6":r+"\u5e74"+a+"\u6708"+c+"\u65e5"},n.formatDate5=function(t){t||(t=this.getTime());var e=new Date(t),i=e.getMonth()+1,n=e.getDate(),s=e.getHours(),o=e.getMinutes();return i+"-"+n+" "+this.appendZero(s)+":"+this.appendZero(o)},n.parseSeconds=function(t,e){var i=Math.floor(t/3600),n=Math.floor((t-3600*i)/60),s=Math.floor(t)%60;return{hour:e?i:this.appendZero(i),min:e?n:this.appendZero(n),second:e?s:this.appendZero(s)}},n.formatSecondsByFormat=function(t,e){var i=Math.floor(t/86400),n=Math.floor((t-86400*i)/3600),s=Math.floor((t-86400*i-3600*n)/60),o=Math.floor(t)%60;switch(e){case"dd:hh:mm":return this.appendZero(i)+":"+this.appendZero(n)+":"+this.appendZero(s);case"hh:mm:ss":return this.appendZero(24*i+n)+":"+this.appendZero(s)+":"+this.appendZero(o);case"hh:mm":return this.appendZero(24*i+n)+":"+this.appendZero(s);case"mm:ss":return this.appendZero(60*(24*i+n)+s)+":"+this.appendZero(o);default:return t}},n.formatSeconds=function(t,e,i){var n=Math.floor(t/3600),s=Math.floor((t-3600*n)/60),o=Math.floor(t)%60;return e?this.appendZero(60*n+s)+":"+this.appendZero(o):i?this.appendZero(n)+":"+this.appendZero(s):this.appendZero(n)+":"+this.appendZero(s)+":"+this.appendZero(o)},n.formatSeconds2=function(t,e){var i=this.parseSeconds(t,e);return i.hour>0?i.hour+"\u5c0f\u65f6"+i.min+"\u5206"+i.second+"\u79d2":i.min>0?i.min+"\u5206"+i.second+"\u79d2":i.second+"\u79d2"},n.formatSeconds3=function(t){t=this.unixtime()-t;var e=Math.floor(t/3600),i=Math.floor((t-3600*e)/60);return e>0?e+"\u5c0f\u65f6"+i+"\u5206\u949f\u524d":i>0?i+"\u5206\u949f\u524d":"1\u5206\u949f\u5185"},n.formatSeconds4=function(t){var e=Math.floor(t/3600);return{hour:e,min:Math.floor((t-3600*e)/60)}},n.formatSeconds5=function(t){var e=Math.floor(t/86400),i=Math.floor(t/3600),n=i%24,s=Math.floor((t-3600*i)/60),o=Math.floor(t)%60;return e>0?e+"\u5929":n>0?n+"\u5c0f\u65f6":s>0?s+"\u5206\u949f":o+"\u79d2"},n.formatSeconds6=function(t){var e=Math.floor(t/86400),i=Math.floor(t/3600),n=i%24,s=Math.floor((t-3600*i)/60),o=Math.floor(t)%60;return e>0?e+"\u5929"+this.appendZero(n)+"\u5c0f\u65f6"+this.appendZero(s)+"\u5206":this.appendZero(n)+"\u5c0f\u65f6"+this.appendZero(s)+"\u5206"+this.appendZero(o)+"\u79d2"},n.formatSeconds7=function(t){var e=Math.ceil(t/3600),i=Math.ceil(t/60);return i<10?Math.ceil(t)+"\u79d2":e<2?i+"\u5206\u949f":e<48?e+"\u5c0f\u65f6":Math.ceil(t/86400)+"\u5929"},n.formatSeconds8=function(t,e,i,n){for(var s=Math.floor(t/3600),o=Math.floor((t-3600*s)/60),r=Math.floor(t)%60,a=1e3*(t-Math.floor(t));a>99;)a/=10;return a=Math.floor(a),e?this.appendZero(60*s+o)+"\u5206"+this.appendZero(r)+"\u79d2"+this.appendZero(a):i?this.appendZero(s)+"\u65f6"+this.appendZero(o)+this.appendZero(a):this.appendZero(s)+"\u65f6"+this.appendZero(o)+"\u5206"+this.appendZero(r)+"\u79d2"+this.appendZero(a)},n.formatSeconds9=function(t){var e=Math.floor(t/86400),i=Math.floor(t/3600),n=i%24,s=Math.floor((t-3600*i)/60),o=Math.floor(t)%60;return e>=1?e+"\u5929"+this.appendZero(n)+"\u65f6":i>=1?this.appendZero(n)+"\u65f6"+this.appendZero(s)+"\u5206":this.appendZero(s)+"\u5206"+this.appendZero(o)+"\u79d2"},n.formatSeconds10=function(t){var e=this.parseSeconds(t,!0);return e.min>0?e.min+"\u5206"+e.second+"\u79d2":e.second+"\u79d2"},n.formatSeconds11=function(t){return t+"\u79d2"},n.appendZero=function(t){return t<10?"0"+t:t},n.checkBtnEventCD=function(t,e){var i=this.getTime(),n=i-t._lastTouchTime;return!(t._lastTouchTime&&n>0&&n<e)&&(t._lastTouchTime=i,!0)},n.getTimeLeft=function(t,e){var i=e-t;return this.formatSeconds4(i)},n.getTimeLeft2=function(t,e){var i=Math.abs(e-t);return this.parseSeconds(i)},n.getDays=function(t){return Math.ceil(t/86400)},n.isToday=function(t){var e=new Date(this.getTime()),i=new Date(t);return e.getFullYear()==i.getFullYear()&&(e.getMonth()==i.getMonth()&&e.getDate()==i.getDate())},n.isToday_5=function(t){var e=new Date(this.getTime()-18e6),i=new Date(t-18e6);return e.getFullYear()==i.getFullYear()&&(e.getMonth()==i.getMonth()&&e.getDate()==i.getDate())},n.week2Str=function(t){switch(t){case 1:return"\u5468\u4e00";case 2:return"\u5468\u4e8c";case 3:return"\u5468\u4e09";case 4:return"\u5468\u56db";case 5:return"\u5468\u4e94";case 6:return"\u5468\u516d";case 7:return"\u5468\u65e5"}},zk.Time=e.exports=n,cc._RF.pop()},{}],Tools:[function(t,e,i){"use strict";cc._RF.push(e,"fd96eGOd/9Fr6HhEvHsVB35","Tools");var n=t("BigNumber"),s=function(){return new function(){}}();s.setGray=function(t,e){var i;t&&(i=(e=e?1:0)?cc.MaterialVariant.createWithBuiltin("2d-gray-sprite",t):cc.MaterialVariant.createWithBuiltin("2d-sprite",t),t.setMaterial(0,i))},s.numToChines=["\u96f6","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c","\u5341\u4e09","\u5341\u56db","\u5341\u4e94","\u5341\u516d"],s.numToChineseStr=function(t,e){if(e){for(var i="",n=(t+="").length-1;n>=0;n--)i=s.numToChines[parseInt(t[n])]+i;return i}if(t<10)return s.numToChines[t];var o=Math.floor(t/10),r=t%10;return(o>1?s.numToChines[o]:"")+"\u5341"+(r>0?s.numToChines[r]:"")},s.deepCopy=function(t,e){e=e||(t.constructor===Array?[]:{});for(var i in t)t.hasOwnProperty(i)&&("object"==typeof t[i]?(e[i]=t[i].constructor===Array?[]:{},s.deepCopy(t[i],e[i])):e[i]=t[i]);return e},s.deepCopy2=function(t){return JSON.parse(JSON.stringify(t))},s.clamp=function(t,e,i){return t<e?e:t>i?i:t},s.getRandomFloat=function(t,e){var i=e-t;return t+Math.random()*i},s.getRandomInteger=function(t,e){var i=e-t,n=Math.random();return t+Math.round(n*i)},s.rand=s.getRandomInteger,s.getRandomOneOrMinusOne=function(){return this.getRandomInteger(0,1)?1:-1},s.getListRand=function(t){return t[this.getRandomInteger(0,t.length-1)]},s.getListRandAndSplice=function(t){var e=this.getRandomInteger(0,t.length-1),i=t[e];return t.splice(e,1),i},s.getListRandN=function(t,e){for(var i=this.deepCopy(t),n=[],s=0;s<e;s++){var o=this.getRandomInteger(0,i.length-1);n.push(i[o]),i.splice(o,1)}return n},s.listShuffle=function(t){t.sort(function(t,e){return Math.random()>.5?-1:1})},s.randValueToList=function(t,e){for(var i=[],n=0,s=0;s<e;s++){var o=this.rand(100,3e3);i.push(o),n+=o}for(var r=[],a=0,c=e-1;c>=0;c--){var h=i[c],l=Math.floor(t*h/n);r.push(l),a+=l}return a<t&&r.push(t-a),r},s.pad=function(t){return function(e,i){return 0>=(i-=e.toString().length)?e:(t[i]||(t[i]=Array(i+1).join(0)))+e}}([]),s.Erl2Json=function(t){return"string"!=typeof t?t:JSON.parse(t.replace(/{/gm,"[").replace(/}/gm,"]").replace(/([\w]+)/gm,'"$1"'))},s.showMoneyNum=function(t){return(t=Math.abs(t))>99999999?Math.floor(t/1e8)+"\u4ebf":t>99999?Math.floor(t/1e4)+"\u4e07":t},s.showGoodsNum=function(t){var e;return t>=1e12?e=(t/1e12).toFixed(1)+"\u5146":t>=1e8?e=(t/1e8).toFixed(1)+"\u4ebf":t>=1e4&&(e=(t/1e4).toFixed(1)+"\u4e07"),e&&isNaN(e)&&(e=e.replace(".0","")),null==e?t:e},s.showPowerNum=function(t,e,i){return t=t instanceof n?t:n(t),e=e>=9999?e:999999999,t.gt(e)?i?t.div(1e4).toFixed(i)+"\u4e07":t.idiv(1e4)+"\u4e07":t.toString()},s.showMoneyNum3=function(t){return t>9999?parseFloat((t/1e4).toFixed(2))+"\u4e07":t},s.showExpNum=function(t){return(t=Math.abs(t))>99999999?this.toDecimal(t/1e8,3)+"\u4ebf":t>9999?Math.floor(t/1e4)+"\u4e07":t},s.showExpNum2=function(t){var e=t instanceof n?t:n(t);return e.gt(1e20)?e.dividedBy(1e20).toFixed(2)+"\u4ebf\u5146":e.gt(1e16)?e.dividedBy(1e16).toFixed(2)+"\u4e07\u5146":e.gt(999999999999)?e.dividedBy(1e12).toFixed(2)+"\u5146":e.gt(99999999)?e.dividedBy(1e8).toFixed(2)+"\u4ebf":e.gt(99999)?e.dividedBy(1e4).toFixed(1)+"\u4e07":e.toFixed(0)},s.toDecimal=function(t,e){var i=parseFloat(t);if(isNaN(i))return"0";var n=Math.pow(10,e),s=(i=Math.floor(i*n)/n).toString(),o=s.indexOf(".");for(o<0&&(o=s.length,s+=".");s.length<=o+e;)s+="0";return s},s.toDecimalNoZero=function(t,e){var i=parseFloat(t);if(isNaN(i))return"0";var n=Math.pow(10,e);return Math.round(i*n)/n},s.getNumDecimal=function(t,e){var i=(t+="").indexOf(".");if(i>=0){var n=t.substring(i+1,e?i+e+1:t.length);if(+n>0)return n}},s.format=function(t,e){if(arguments.length>0){if(1==arguments.length)return t;if(2==arguments.length&&"object"==typeof e){if(!e)return"";for(var i=0;i<e.length;i++)if(null!=e[i]){var n=new RegExp("([\u3010{]"+i+"[\u3011}])","g");t=t.replace(n,e[i].toString())}}else for(i=1;i<arguments.length;i++)if(null!=arguments[i]){n=new RegExp("([\u3010{]"+(i-1)+"[\u3011}])","g");t=t.replace(n,arguments[i].toString())}return t}return""},s.makeAttr=function(t){for(var e={},i=0;i<t.length;i++){var n,s=t[i],o=0,r=void 0;void 0!=s.key&&void 0!=s.val?(r=AttrConfig.get(s.key),o=s.val):2==s.length&&(r=AttrConfig.get(s[0]),o=s[1]),r&&((n=r.field)&&(e[n]=e[n]||0,e[n]+=parseInt(o)))}return e},s.makeAttrItemViewParamList=function(t,e,i,n){if(e=e||[],0==(t=t||[]).length&&0==e.length)return[];var o=s.makeAttr(t),r=s.makeAttr(e),a={};null==o.min_phy_atk&&null==o.max_phy_atk&&null==r.min_phy_atk&&null==r.max_phy_atk||(o.min_phy_atk=o.min_phy_atk||0,o.max_phy_atk=o.max_phy_atk||0,r.max_phy_atk?a.phyAtk=[[3,"\u7269\u7406\u653b\u51fb"],o.min_phy_atk+"~"+o.max_phy_atk,r.min_phy_atk+"~"+r.max_phy_atk]:a.phyAtk=[[3,"\u7269\u7406\u653b\u51fb"],o.min_phy_atk+"~"+o.max_phy_atk,null],delete o.min_phy_atk,delete o.max_phy_atk),null==o.min_mag_atk&&null==o.max_mag_atk&&null==r.min_mag_atk&&null==r.max_mag_atk||(o.min_mag_atk=o.min_mag_atk||0,o.max_mag_atk=o.max_mag_atk||0,r.max_mag_atk?a.magAtk=[[5,"\u9b54\u6cd5\u653b\u51fb"],o.min_mag_atk+"~"+o.max_mag_atk,r.min_mag_atk+"~"+r.max_mag_atk]:a.magAtk=[[5,"\u9b54\u6cd5\u653b\u51fb"],o.min_mag_atk+"~"+o.max_mag_atk,null],delete o.min_mag_atk,delete o.max_mag_atk),null==o.min_phy_def&&null==o.max_phy_def&&null==r.min_phy_def&&null==r.max_phy_def||(o.min_phy_def=o.min_phy_def||0,o.max_phy_def=o.max_phy_def||0,r.max_phy_def?a.phyDef=[[7,"\u7269\u7406\u9632\u5fa1"],o.min_phy_def+"~"+o.max_phy_def,r.min_phy_def+"~"+r.max_phy_def]:a.phyDef=[[7,"\u7269\u7406\u9632\u5fa1"],o.min_phy_def+"~"+o.max_phy_def,null],delete o.min_phy_def,delete o.max_phy_def),null==o.min_mag_def&&null==o.max_mag_def&&null==r.min_mag_def&&null==r.max_mag_def||(o.min_mag_def=o.min_mag_def||0,o.max_mag_def=o.max_mag_def||0,r.max_mag_def?a.magDef=[[9,"\u9b54\u6cd5\u9632\u5fa1"],o.min_mag_def+"~"+o.max_mag_def,r.min_mag_def+"~"+r.max_mag_def]:a.magDef=[[9,"\u9b54\u6cd5\u9632\u5fa1"],o.min_mag_def+"~"+o.max_mag_def,null],delete o.min_mag_def,delete o.max_mag_def);for(var c=[],h=!1,l=!1,u=!1,d=!1,f={},p=Math.max(t.length,e.length),m=0;m<p;m++){var _=t[m]?t[m]:e[m],g=void 0!=_.key?_.key:_[0],v=AttrConfig.get(g).field;"min_phy_atk"==v||"max_phy_atk"==v?h||(h=!0,c.push(a.phyAtk)):"min_mag_atk"==v||"max_mag_atk"==v?l||(l=!0,c.push(a.magAtk)):"min_phy_def"==v||"max_phy_def"==v?u||(u=!0,c.push(a.phyDef)):"min_mag_def"==v||"max_mag_def"==v?d||(d=!0,c.push(a.magDef)):f[v]||(f[v]=!0,c.push([g,o[v]||0,r[v]||0]))}return this.attrSort(c,i,n),c},s.attrSort=function(t,e,i){if(t&&t.length&&e&&e.length)for(var n=!0,s=t.length-1;n;){n=!1;for(var o=0;o<s;o++){var r=t[o],a=t[o+1],c=e.indexOf(r[0]),h=e.indexOf(a[0]);!i&&c<0&&(c=Number.MAX_VALUE),!i&&h<0&&(h=Number.MAX_VALUE),c>h&&(t[o+1]=r,t[o]=a,n=!0)}}return t},s.exchangeAttrValue=function(t,e,i){return void 0==i&&(i=1),cc.js.isNumber(e)&&1==AttrConfig.getValue(t,"ratio")?(e/100).toFixed(i)+"%":e},s.getAttrItemNameVal=function(t){if(!t)return null;var e,i=t[0],n=t[1],o=i;return isNaN(i)?(e=i[1],o=i[0]):e=AttrConfig.get(i).name,{name:e,val:n=s.exchangeAttrValue(o,n)}},s.attrMerge=function(t){t=t.concat([]);for(var e=[],i=function(i){for(var n=function(n){var s=e.find(function(e){return e[0]==t[i][n][0]});s?s[1]+=t[i][n][1]:e.push([t[i][n][0],t[i][n][1]])},s=0;s<t[i].length;s++)n(s)},n=0;n<t.length;n++)i(n);return e},s.attrMult=function(t,e){for(var i=[],n=t.length-1;n>=0;n--)i.unshift([t[n][0],t[n][1]*e]);return i},s.attrZero=function(t){for(var e=[],i=t.length-1;i>=0;i--){for(var n=t[i],s=[],o=n.length-1;o>=0;o--)s.unshift(0==o?n[o]:0);e.unshift(s)}return e},s.formatCommonAttr=function(t,e){return{name:isNaN(t)?t[1]:AttrConfig.get(t).name,val:this.exchangeAttrValue(t,e)}},s.packAttrs2Str=function(t,e,i){void 0==i&&(i=e,e=[]);for(var n="",o=s.makeAttrItemViewParamList(t,e),r=0;r<o.length;r++){var a=o[r],c=a[0],h=a[1],l=a[2],u=s.formatCommonAttr(c,h);n+=s.format(i,u.name,u.val),l&&(u=s.formatCommonAttr(c,l),n+=s.format(i,u.name,u.val))}return n},s._calcCombatPower=function(t){var e=0;for(var i in t){var n=AttrConfig.get(i);if(n){var s=n.combat_power_num;e+=t[i]*s}}return Math.floor(e/1e3)},s.calcCombatPower=function(t,e){for(var i=e||[],n={},o=function(t,e){var i=AttrConfig.get(t),s=i.relation;if(s){104!=t&&110!=t&&111!=t||(e*=.5);for(var o=0;o<s.length;o++)i.ratio&&(e=(n[o]||0)*e/1e4),n[s[o]]?n[s[o]]+=e:n[s[o]]=e}else n[t]?n[t]+=e:n[t]=e},r=0;r<i.length;r++){var a=i[r],c=void 0,h=void 0;Array.isArray(a)?(c=a[0],h=a[1]):(c=a.key,h=a.val),o(c,h)}for(var l=0;l<t.length;l++){var u=t[l],d=void 0,f=void 0;Array.isArray(u)?(d=u[0],f=u[1]):(d=u.key,f=u.val),o(d,f)}return s._calcCombatPower(n)},s.parseGiftContent=function(t){var e=[],i=[],n=GiftConfig.get(t);if(!n)return e;for(var o=n.gifts,r=0;r<o.length;r++){var a=o[r][2],c=o[r][3];if("fix"==a)for(var h=0;h<c.length;h++)e.push(s.parseGiftItem(c[h]));else if("drop_rule"==a){var l=n.show_gifts[0];if(l)for(var u=0;u<l.length;u++)e.push(s.parseGiftItem(l[u]));var d=n.show_gifts[1];if(d&&d&&d.length>0)for(var f=0;f<d.length;f++)i.push(s.parseGiftItem(d[f]))}else if(n.show_gifts.length>0){var p=n.show_gifts[0];if(p)for(var m=0;m<p.length;m++)e.push(s.parseGiftItem(p[m]));var _=n.show_gifts[1];if(_&&_&&_.length>0)for(var g=0;g<_.length;g++)i.push(s.parseGiftItem(_[g]))}else for(var v=0;v<c.length;v++)e.push(s.parseGiftItem(c[v][0]))}return i.length>0?{retList:e,retList2:i}:e},s.parseRewardListToDict=function(t){for(var e={},i=0;i<t.length;i++){var n=t[i];e[n.gtype_id]?e[n.gtype_id]+=parseInt(n.num):e[n.gtype_id]=parseInt(n.num)}return e},s.mergeAwardList=function(t){var e=this.parseRewardListToDict(t),i=[];for(var n in e)i.push({gtype_id:+n,num:+e[n]});return i},s.parseRewardList=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i],o=s.parseGiftItem(n);e.push(o)}return e},s.getValueByVIP=function(t,e){if(!isNaN(e))return e;if(!(e=this.Erl2Json(e)))return 0;for(var i=0;i<e.length;i++)if(e[i][0]==t)return e[i][1];return 0},s.parseLimitConfig=function(t){var e={};if(!t)return e;for(var i=0;i<t.length;i++)e[t[i][0]]=t[i][1];return e},s.formatHP=function(t){return"hp"==t&&(t="H P"),"mp"==t&&(t="M P"),t},s.getStrLength=function(t){var e=0;for(var i in t)e+=cc.textUtils.isUnicodeCJK(t[i])?2:1;return e},s.spliteStr=function(t,e){if(this.getStrLength(t)<=e)return t;for(var i=t.length,n=0,s=0;s<i;s++)if(0!=(65280&t.charCodeAt(s))&&n++,++n>e)return t.substring(0,s)},s.makeSpriteAtlas=function(t,e){var i=cc.js.createMap(!0);for(var n in t){var s=t[n],o=new cc.Rect(s.r[0],s.r[1],s.r[2],s.r[3]);(s.r[2]<0||s.r[3]<0)&&(o=new cc.Rect(0,0,1,1));var r=new cc.Vec2(s.o[0],s.o[1]),a=new cc.Size(s.s[0],s.s[1]),c=1===s.rotated,h=new cc.SpriteFrame(e,o,c,r,a);i[n]=h}return i},s.calcTextureMem=function(t){return t.width*t.height*4/1048576},s.findNodeByName=function(t,e){if(t.name===e)return t;for(var i=0;i<t.children.length;i++){var n=this.findNodeByName(t.children[i],e);if(null!==n)return n}return null},s.ArrayEquals=function(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var i=0,n=e.length;i<n;i++)if(t[i]instanceof Array&&e[i]instanceof Array){if(!s.ArrayEquals(t[i],e[i]))return!1}else if(t[i]!=e[i])return!1;return!0},s.sortRewardList=function(t){return t.sort(function(t,e){var i=GoodsConfig[t.gtype_id].color,n=GoodsConfig[e.gtype_id].color;return i==n?t.gtype_id-e.gtype_id:n-i})},s.formatNumber=function(t){var e=t.toString(),i="";i=e.substring(e.length-3,e.length);for(var n=e.length-3;n>0;n-=3){var s=n-3>0?n-3:0;i=e.substring(n,s)+","+i}return i},s.formatCP=function(t){var e,i,n;return t>999999999?(i=t/1e8,n=zk.Tools.getNumDecimal(i,2),e=Math.floor(i)+(n?"."+n:"")+"\u4ebf"):t>9999999&&(i=t/1e4,n=zk.Tools.getNumDecimal(i,1),e=Math.floor(i)+(n?"."+n:"")+"\u4e07"),e||t},s.getQueryString=function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),i=window.location.search.substr(1).match(e);return null!=i?unescape(i[2]):null},s.rankNicknameString=function(t){var e=Object.keys(RankNicknameConfig).length,i=s.rand(1,e-1),n=s.rand(1,e-1),o=RankNicknameConfig[i][1];return 1==(t=t)?o+RankNicknameConfig[n][2]:o+RankNicknameConfig[n][3]},s.getConditionByKey=function(t,e){if(e)return e.find(function(e){return e[0]==t})||["lv",0]},s.arraySub=function(t,e,i){for(var n=0,s=t.length;n<s;n++)if(e(t[n]))return i&&t.splice(n,1),n},s.arrayDel=function(t,e,i){if(t)for(var n=0,s=t.length;n<s;n++)if(e(t[n])){var o=t.splice(n,1);if(i)return o[0];n--,s--}},s.arrayDedup=function(t,e){for(var i=t.length-1;i>=0;i--)for(var n=t[i],s=t.length-1;s>=0;s--){var o=t[s];i!=s&&(!e&&n==o||e&&e(n,o))&&(t.splice(s,1),s<i&&i--)}return t},s.arrayGroup=function(t,e){for(var i={},n=t.length-1;n>=0;n--){var s=t[n],o=s[e];null!=o&&(o in i||(i[o]=[]),i[o].unshift(s))}return i},s.objFind=function(t,e,i){for(var n in t){var s=t[n];if(e(s))return i?{key:n,result:s}:s}},s.obj2Array=function(t){var e=[];for(var i in t)e.push(t[i]);return e},s.showBigNumber=function(t){var e=t instanceof n?t:n(t);return e.gt(1e20)?e.dividedBy(1e20).toFixed(1)+"\u4ebf\u5146":e.gt(1e16)?e.dividedBy(1e16).toFixed(1)+"\u4e07\u5146":e.gt(999999999999)?e.dividedBy(1e12).toFixed(1)+"\u5146":e.gt(99999999)?e.dividedBy(1e8).toFixed(1)+"\u4ebf":e.gt(99999)?e.dividedBy(1e4).toFixed(1)+"\u4e07":e.toFixed(0)},s.formatTalkContent=function(e){return e.replace("[\u73a9\u5bb6\u540d\u516d\u4e2a\u5b57]",t("RoleModel").nickname)},s.getRGColor=function(t,e,i,n){var s;return null==e&&(e=0),s=e?t?zk.DARK_HEX.GREEN:zk.DARK_HEX.RED:t?zk.LIGHT_HEX.GREEN:zk.LIGHT_HEX.RED,i?cc.color(s):n?"#"+s:s},s.getColorStr=function(t,e){return"<color="+t+">"+e+"</c>"},s.unifyRTColor=function(t,e){return t.replace(/<color=(.*?)>/gi,"<color="+e+">")},s.formatMrtParam=function(t){var e="";for(var i in t)e+=i+"="+t[i]+"|";return e&&(e.substring(0,e.length-1),e=":"+e),e},s.clipboard=function(t){var e=document.createElement("textarea");e.style.position="fixed",e.style.top=0,e.style.left=0,e.style.border="none",e.style.outline="none",e.style.resize="none",e.style.background="transparent",e.style.color="transparent",e.value=t,document.body.appendChild(e),e.select();try{var i=document.execCommand("copy")?"successful":"unsuccessful";console.log(i)}catch(t){console.log("unable to copy",t)}document.body.removeChild(e)},s.bubbleSort=function(t,e,i){if(i=null==i?1:i){for(var n=0;n<t.length-1;n++)for(var s=0;s<t.length-1-n;s++)if(t[s][e]>t[s+1][e]){var o=t[s];t[s]=t[s+1],t[s+1]=o}}else for(var r=0;r<t.length-1;r++)for(var a=0;a<t.length-1-r;a++)if(t[a][e]<t[a+1][e]){var c=t[a];t[a]=t[a+1],t[a+1]=c}},s.str2Vertical=function(t){for(var e="",i=t.length,n=0;n<i-1;n++)e+=t[n]+"\n";return i&&(e+=t[i-1]),e},s.getStrNum=function(t){if(t){var e=t.match(/\d+/g);if(e){for(var i=e.length-1;i>=0;i--)e[i]=+e[i];return 1==e.length?e[0]:e}}},s.calcDiscount=function(t,e){return Math.floor(20*t/e)/2},s.parseNode=function(t,e,i,n,s){if(cc.isValid(t)){Array.isArray(e)||(e=[e]),n||(n=t);for(var o={},r=e.length,a=0;a<r;a++){var c=e[a],h=Array.isArray(c)?c[0]:c;0,o[h]=a+1}for(var l=[].concat(t.children);l.length;){var u=l.shift(),d=o[u._name];if(d){var f=e[d-1],p=Array.isArray(f)?f[1]:null;if(n[u._name]=p?u.getComponent(p):u,delete o[u._name],!--r)break}i&&l.push.apply(l,u.children)}if(s&&r)for(var m in r)cc.error('Not find "'+m+'" node!')}},s.recursionNode=function(t,e,i){var n=this;cc.isValid(t)&&(i&&e(t),t.childrenCount&&t.children.forEach(function(t){n.recursionNode(t,e,!0)}))},s.getNodePath=function(t){for(var e;t&&!(t instanceof cc.Scene);)e=e?t.name+"/"+e:t.name,t=t.parent;return e},s.getMyParam=function(t,e,i){if(cc.isValid(t)){var n=t._myParam;if(n){var s=n[e];return null!=s&&i&&delete n[e],s}}},s.isInTarget=function(t,e){if(!e)return!1;if(!(t instanceof cc.Node)){var i=e,n=i.width,s=i.height,o=i.convertToNodeSpaceAR(t),r=o.x,a=o.y,c=-i.anchorX*n,h=-i.anchorY*s;return r>=c&&a>=h&&o.x<=n+c&&o.y<=s+h}},s.createEvt=function(t,e,i){if(t&&t.isValid){t.comName=t.comName||t.name.match(/\<(.*?)\>/g).pop().replace(/\<|>/g,"");var n=new cc.Component.EventHandler;return n.target=i||t.node,n.component=t.comName,n.handler=e,n}},s.getMaxDictFromConfig=function(t,e){null==e&&(e=0);var i={},n=t.asKeys();for(var s in n){var o=n[s].split("_"),r=o[0],a=o[1];r in i||(i[r]=e),a>i[r]&&(i[r]=parseInt(a))}return i},s.propClone=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},s.kv2Sub=function(t){for(var e=[],i=t.length-1;i>=0;i--)e.unshift([t[i].key,t[i].val]);return e},s.sub2KV=function(t){for(var e=[],i=t.length-1;i>=0;i--)e.unshift({key:t[i][0],val:t[i][1]});return e},s.strSpace=function(t){for(var e="",i=0,n=t.length;i<n;i++)e=e+t[i]+" ";return e.substring(0,e.length-1)},s.convertEmoStr2RT=function(t){for(var e=(new zk.HtmlTextParser).parse(t),i=0;i<e.length;i++){for(var n=e[i].text,s=n.split("#"),o=!1,r=0;r<s.length;r++)if(s[r]){var a=s[r].match(/^\d{2}/);r>0&&a&&(a[0].substr(0,2)<=63?(s[r]='<img src="'+a[0].substr(0,2)+'"/>'+s[r].substr(2),o=!0):s[r]="#"+s[r])}o&&(t=t.replace(n,s.join("")))}return t},s.updateImmediateLayout=function(t){for(var e=t.getComponent(cc.Layout);e;)e.updateLayout(),e=(e=e.node.parent)?e.getComponent(cc.Layout):null},s.updateImmediateWidget=function(t){for(var e=t.getComponent(cc.Widget);e;)e.updateAlignment(),e=(e=e.node.parent)?e.getComponent(cc.Widget):null},s.convertEmoStr2RT=function(t){for(var e=(new zk.HtmlTextParser).parse(t),i=0;i<e.length;i++){for(var n=e[i].text,s=n.split("#"),o=!1,r=0;r<s.length;r++)if(s[r]){var a=s[r].match(/^\d{2}/);r>0&&a&&(a[0].substr(0,2)<=63?(s[r]='<img src="'+a[0].substr(0,2)+'"/>'+s[r].substr(2),o=!0):s[r]="#"+s[r])}o&&(t=t.replace(n,s.join("")))}return t},s.calcCubicBezierPoint=function(t,e){for(var i,n,s,o,r,a,c,h,l,u,d=[],f=1/(e-1),p=0;p<e;p++)l=p*f,s=3*(t[1].x-t[0].x),n=3*(t[2].x-t[1].x)-s,i=t[3].x-t[0].x-s-n,a=3*(t[1].y-t[0].y),r=3*(t[2].y-t[1].y)-a,o=t[3].y-t[0].y-a-r,h=(c=l*l)*l,u=cc.v2(i*h+n*c+s*l+t[0].x,o*h+r*c+a*l+t[0].y),d.push(u);return d},s.isIdCardNo=function(t){if(t=t.toUpperCase(),!/(^\d{15}$)|(^\d{17}([0-9]|X)$)/.test(t))return!1;var e,i;if(null=={11:"\u5317\u4eac",12:"\u5929\u6d25",13:"\u6cb3\u5317",14:"\u5c71\u897f",15:"\u5185\u8499\u53e4",21:"\u8fbd\u5b81",22:"\u5409\u6797",23:"\u9ed1\u9f99\u6c5f ",31:"\u4e0a\u6d77",32:"\u6c5f\u82cf",33:"\u6d59\u6c5f",34:"\u5b89\u5fbd",35:"\u798f\u5efa",36:"\u6c5f\u897f",37:"\u5c71\u4e1c",41:"\u6cb3\u5357",42:"\u6e56\u5317",43:"\u6e56\u5357",44:"\u5e7f\u4e1c",45:"\u5e7f\u897f",46:"\u6d77\u5357",50:"\u91cd\u5e86",51:"\u56db\u5ddd",52:"\u8d35\u5dde",53:"\u4e91\u5357",54:"\u897f\u85cf",61:"\u9655\u897f",62:"\u7518\u8083",63:"\u9752\u6d77",64:"\u5b81\u590f",65:"\u65b0\u7586",71:"\u53f0\u6e7e",81:"\u9999\u6e2f",82:"\u6fb3\u95e8",91:"\u56fd\u5916"}[parseInt(t.substr(0,2))])return!1;if(15==(e=t.length)){i=new RegExp(/^(\d{6})(\d{2})(\d{2})(\d{2})(\d{3})$/);var n=t.match(i);if((a=new Date("19"+n[2]+"/"+n[3]+"/"+n[4])).getYear()==Number(n[2])&&a.getMonth()+1==Number(n[3])&&a.getDate()==Number(n[4])){var s=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2),o=new Array("1","0","X","9","8","7","6","5","4","3","2"),r=0;for(t=t.substr(0,6)+"19"+t.substr(6,t.length-6),c=0;c<17;c++)r+=t.substr(c,1)*s[c];return t+=o[r%11],!0}return!1}if(18==e){i=new RegExp(/^(\d{6})(\d{4})(\d{2})(\d{2})(\d{3})([0-9]|X)$/);var a;n=t.match(i);if((a=new Date(n[2]+"/"+n[3]+"/"+n[4])).getFullYear()==Number(n[2])&&a.getMonth()+1==Number(n[3])&&a.getDate()==Number(n[4])){var c;s=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2),o=new Array("1","0","X","9","8","7","6","5","4","3","2"),r=0;for(c=0;c<17;c++)r+=t.substr(c,1)*s[c];return o[r%11]==t.substr(17,1)}return!1}return!1},s.getFcm=function(){var t={};return t.key=SDKPackageModel.return_content,t.val={fail:1,sss:5,s8:2,s16:3,s18:4,s:1}[t.key]||5,t},s.isQMP=function(){var t=!1,e=cc.sys.windowPixelResolution,i=e.width%9;if(cc.sys.os==cc.sys.OS_ANDROID&&0==i){var n;n=e.height,-1!=[2280,2160,2244,3120,2248,2340,2310].indexOf(n)&&(t=!0)}var s=cc.view.getFrameSize(),o=/iPhone/gi.test(navigator.userAgent)&&375==Math.min(s.height,s.width)&&812==Math.max(s.height,s.width),r=414==Math.min(s.height,s.width)&&896==Math.max(s.height,s.width);return cc.sys.os!=cc.sys.OS_ANDROID&&(o||r)&&(t=!0),console.log("\u662f\u5426\u5168\u9762\u5c4f\uff1a",t),t},s.eq64=function(t,e){if(null===t||void 0===t||null===e||void 0===e)return!1;if(t.equals)try{return t.equals(e)}catch(t){return!1}if(e.equals)try{return e.equals(t)}catch(t){return!1}return t-e==0},zk.eq64=s.eq64,e.exports=zk.Tools=s,cc._RF.pop()},{BigNumber:"BigNumber",RoleModel:void 0}],polyfill:[function(t,e,i){"use strict";cc._RF.push(e,"a08e5Vt+E5EQJ85lfYexn6k","polyfill"),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var n=arguments[1],s=0;s<i;){var o=e[s];if(t.call(n,o,s,e))return o;s++}}}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var n=arguments[1],s=0;s<i;){var o=e[s];if(t.call(n,o,s,e))return s;s++}return-1}}),Array.prototype.every||(Array.prototype.every=function(t,e){var i,n;if(null==this)throw new TypeError("this is null or not defined");var s=Object(this),o=s.length>>>0;if("function"!=typeof t)throw new TypeError;for(arguments.length>1&&(i=e),n=0;n<o;){var r;if(n in s)if(r=s[n],!t.call(i,r,n,s))return!1;n++}return!0}),cc._RF.pop()},{}]},{},["Debug","Demo","Enemy","Game","GameBegin","Item1","Map","Player","ScrollWall","Tile","MapManager","polyfill","EventDispatcher","EventSystem","BigNumber","HtmlTextParser","Time","Tools","BaseUI","AdjustPos","AutoLayout","Breath","CDHelper","Drag","Gesture","KeyDown","Keypad","List","ListItem","Menu","MyButton","MyLabel","MyRichText","ProgressBar","Relation","Shake","Tab","TileHelper"]);